<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andrés González Santa Cruz">
<meta name="dcterms.date" content="2023-09-28">
<meta name="description" content="Explore and construct data, descriptives, several tests of patterns of polysubstance use, and imputation of missing variables">

<title>Data explore &amp; construction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="proposal_grant_23_24_2_files/libs/clipboard/clipboard.min.js"></script>
<script src="proposal_grant_23_24_2_files/libs/quarto-html/quarto.js"></script>
<script src="proposal_grant_23_24_2_files/libs/quarto-html/popper.min.js"></script>
<script src="proposal_grant_23_24_2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="proposal_grant_23_24_2_files/libs/quarto-html/anchor.min.js"></script>
<link href="proposal_grant_23_24_2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="proposal_grant_23_24_2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="proposal_grant_23_24_2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="proposal_grant_23_24_2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="proposal_grant_23_24_2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="proposal_grant_23_24_2_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="proposal_grant_23_24_2_files/libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="proposal_grant_23_24_2_files/libs/typedarray-0.1/typedarray.min.js"></script>
<script src="proposal_grant_23_24_2_files/libs/jquery-3.5.1/jquery.min.js"></script>
<link href="proposal_grant_23_24_2_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="proposal_grant_23_24_2_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="proposal_grant_23_24_2_files/libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="proposal_grant_23_24_2_files/libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<script src="proposal_grant_23_24_2_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="proposal_grant_23_24_2_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data explore &amp; construction</h1>
</div>

<div>
  <div class="description">
    <p>Explore and construct data, descriptives, several tests of patterns of polysubstance use, and imputation of missing variables</p>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Andrés González Santa Cruz </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 28, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<style type="text/css">
script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"

</style>
</div>
<div class="cell">
<script type="text/javascript">
$(document).ready(function() {

$('body').prepend('<div class=\"zoomDiv\"><img src=\"\" class=\"zoomImg\"></div>');

// onClick function for all plots (img's)

$('img:not(.zoomImg)').click(function() {
$('.zoomImg').attr('src', $(this).attr('src')).css({width: '100%'});
$('.zoomDiv').css({opacity: '1', width: 'auto', border: '1px solid white', borderRadius: '5px', position: 'fixed', top: '50%', left: '50%', marginRight: '-50%', transform: 'translate(-50%, -50%)', boxShadow: '0px 0px 50px #888888', zIndex: '50', overflow: 'auto', maxHeight: '100%'});
});

// onClick function for zoomImg

$('img.zoomImg').click(function() {
$('.zoomDiv').css({opacity: '0', width: '0%'});
});
});
</script>
</div>
<div class="cell">
<style type="text/css">
<script src="https://github.com/AGSCL/gine_brechas_pandemia/blob/main/hideOutput.js"></script>
</style>
</div>
<div class="cell">
<script type="text/javascript">
$(document).ready(function() {

\$chunks = \$('.fold');

\$chunks.each(function () { // add button to source code chunks
if ( \$(this).hasClass('s') ) {
    \$('pre.r', this).prepend("\<div class=\\"showopt\\"\>Show Source\</div\>\<br style=\\"line-height:22px;\\"/\>");
    \$('pre.r', this).children('code').attr('class', 'folded');
    } // add button to output chunks

    if ( \$(this).hasClass('o') ) {
        \$('pre:not(.r)', this).has('code').prepend("\<div class=\\"showopt\\"\>Show Output\</div\>\<br style=\\"line-height:22px;\\"/\>");
        \$('pre:not(.r)', this).children('code:not(r)').addClass('folded'); // add button to plots
        \$(this).find('img').wrap('\<pre class=\\"plot\\"\>\</pre\>');
        \$('pre.plot', this).prepend("\<div class=\\"showopt\\"\>Show Plot\</div\>\<br style=\\"line-height:22px;\\"/\>");
        \$('pre.plot', this).children('img').addClass('folded');
        }
}); // hide all chunks when document is loaded

\$('.folded').css('display', 'none') // function to toggle the visibility
\$('.showopt').click(function() {
        var label = \$(this).html();
        if (label.indexOf("Show") \>= 0) {
            \$(this).html(label.replace("Show", "Hide"));
        } else {
        \$(this).html(label.replace("Hide", "Show"));
        }

\$(this).siblings('code, img').slideToggle('fast', 'swing');
});
});
</script>
</div>

<style type="text/css">

.showopt {

background-color: #004c93; color: #FFFFFF; width: 100px; height: 20px; text-align: center; vertical-align: middle !important; float: right; font-family: sans-serif; border-radius: 8px;

}

.showopt:hover {
background-color: #dfe4f2;
color: #004c93;

}

pre.plot {
background-color: white !important;
}

.tablelines table, .tablelines td, .tablelines th {
border: 1px solid black;
}

.centrado {
text-align: center;
}

.table.center {
margin-left:auto;
margin-right:auto;
}

/* https://vivekjaiskumar.medium.com/css-is-and-not-selector-17c942ec83f :is()*/

/* Applies to outputs that are not code other than R*/

pre {
overflow-x: auto !important;
}

pre code {
word-wrap: normal !important;
white-space: pre !important;
}

/*
pre:not(.sourceCode) {
white-space: nowrap !important;
}
*/
.sourceCode { /* Important gives precedence */
font-size: 10px !important;
line-height: 50% !important;
}
body{ /* Normal */
text-align: justify;
}
.superbigimage{
overflow-y:scroll;
height:350px;
white-space: nowrap;
overflow-x: auto;
width:100%;
}
.superbigimage img{
overflow-y: scroll;
overflow-x: hidden;
}
.message { color:#446C6E; font-family: monospace;font-size: 10px; line-height: 110%; font-weight: bold;}
div.blue { background-color:#e6f0ff; border-radius: 5px; padding: 5px; text-align: justify;}
div.red { background-color:#e6bab1; border-radius: 5px; padding: 5px; text-align: justify;}
.pandoc-table { /* Should add !important; but it seems no necessary */
margin-left:auto; /* To center */
margin-right:auto;
border-collapse: collapse;
table-layout: auto;
font-size: 11px;
overflow-y: auto;
max-height:450px !important;
white-space: nowrap;
overflow-x: auto;
width:450px;
}
.pandoc-table th {/* header */
text-align: center !important;
font-size: 10px;
padding: 0px;
}
.pandoc-table td {
text-align: left !important;
font-size: 9px;
padding: 0px;
}
.pandoc-table caption {
text-align: left !important;
font-size: 11px !important;
}

.center-table {
text-align: left !important;
font-size: 9px;
padding: 0px;
overflow-y:scroll;
height:400px;
overflow-x: scroll;
}

.controlly{
overflow-y:scroll;
height:350px;
overflow-x: scroll;

}
</style>
<!-- We gotta do each function to hide code and outputs per section, by every ID, we gotta create a different function -->

<script>
function myFunction1() {
var x = document.getElementById("myDIV");
if (x.style.display === "none") {
x.style.display = "block";
} else {
x.style.display = "none";
}
}
</script>

<script>
function myFunction2() {
var x = document.getElementById("myDIV2");
if (x.style.display === "none") {
x.style.display = "block";
} else {
x.style.display = "none";
}
}
</script>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">"proposal_grant_23_24_files"</span>, <span class="at">recursive=</span>T)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#fuentes: </span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#https://rpubs.com/georgy_makarov/897844</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>path<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="fu">getwd</span>(),<span class="st">'/env'</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Sys.setenv(RETICULATE_PYTHON =  "")</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Sys.setenv(RETICULATE_PYTHON =  Sys.which("python"))</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#reticulate::py_config()</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#use_python(paste0(path,"/Scripts/python.exe"))</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Sys.setenv(LD_LIBRARY_PATH =  paste0(path,"/Lib"))</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Sys.setenv(LD_LIBRARY_PATH_64 =  paste0(path,"/Lib"))</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">#instalar paquetes de funcionalidades básicas para tener ubicaciones relativas y acceso a python (reticulate)</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(reticulate)){<span class="fu">install.packages</span>(<span class="st">"reticulate"</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: reticulate</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'reticulate' was built under R version 4.1.3</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(rstudioapi)){<span class="fu">install.packages</span>(<span class="st">"rstudioapi"</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: rstudioapi</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">invisible</span>(<span class="st">"Create env"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#https://stackoverflow.com/questions/54043607/how-to-set-pyenv-python-for-reticulate</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Directory H:/Mi unidad/PERSONAL ANDRES/UCH_salud_publica/asignaturas/env is not a Python virtualenv</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#virtualenv_create(envname  = path, packages = c("pip", "statsmodels", "matplotlib", "numpy", "pandas", "scipy"))</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># "C:/Users/andre/anaconda3/python.exe" -m venv "H:/Mi unidad/PERSONAL ANDRES/UCH_salud_publica/asignaturas/9_Computacion_Estadistica/env"</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#FUENTES:</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#https://rstudio.github.io/reticulate/articles/versions.html</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Virtual environment functions are not supported on Windows (the use of conda environments is recommended on Windows).</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">invisible</span>(<span class="st">"Use environment"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">#https://ugoproto.github.io/ugo_r_doc/pdf/reticulate.pdf</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># tx  &lt;- readLines(paste0(path,"/pyvenv.cfg"))</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># tx[[1]] &lt;- paste0("home = ",gsub('/', '\\', paste0(path,"/Scripts/python.exe"), fixed=T))</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># tx[[3]] &lt;- "version = 3.8.0"</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co">#writeLines(tx, con=paste0(path,"/pyvenv.cfg"))</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co">#H:/Mi unidad/PERSONAL ANDRES/UCH_salud_publica/asignaturas/env/Scripts/python.exe"</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co">#use_virtualenv(path)</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co">#usar entorno virtual ya creado</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="co">#información sobre entorno virtual</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="co">#py_discover_config()</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="co">#conda_python(envname =  "r-scrublet")</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="co"># FUENTES</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="co">#https://akrabat.com/creating-virtual-environments-with-pyenv/</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="co">#https://rstudio.github.io/reticulate/reference/install_python.html</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="co">#https://github.com/pyenv/pyenv/wiki#suggested-build-environment</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="co">#https://github.com/pyenv/pyenv</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="co">#https://stackoverflow.com/questions/56755156/reticulate-not-setting-python-path</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a><span class="co">#https://github.com/rstudio/reticulate/issues/291#issuecomment-437143751</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="co">#https://github.com/pyenv/pyenv</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="co">#https://github.com/pyenv-win/pyenv-win#installation</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="co">#https://stackoverflow.com/questions/52060867/how-to-use-pip-for-pyenv</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="co">#https://github.com/pyenv/pyenv/issues/2417</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pyenv install <span class="op">-</span>l <span class="op">|</span> findstr <span class="fl">3.8</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install <span class="op">--</span>upgrade pyenv<span class="op">-</span>win</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>env PYTHON_CONFIGURE_OPTS<span class="op">=</span><span class="st">"--enable-shared"</span> pyenv install</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>env PYTHON_CONFIGURE_OPTS<span class="op">=</span><span class="st">"--enable-shared"</span> pyenv install <span class="fl">3.7.5</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pyenv build</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `r format(Sys.time(),'%B %d, %Y')`</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Data import</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Load the data from Mariel Fiscalia Merge 4, created on 2023-05-26</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#load("14.Rdata", data_mariel_fisc_merge4 &lt;- new.env() )</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"an_grant_23_24.RData"</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># List all of the objects names in RData:</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#ls(.GlobalEnv)</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#ls(new_environment)</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#rm(new_environment)</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<p><br></p>
</section>
<section id="glca" class="level1">
<h1>GLCA</h1>
<ul>
<li><p>We omitted individuals who used only one substance.</p></li>
<li><p>We categorized each reported substance as licit (e.g., Alcohol), illicit (all other substances), or none (not reported).</p></li>
<li><p>We discarded substances labeled as “Other” because they could not be distinguished between licit and illicit substances.</p></li>
<li><p>Frequency of use were classified into no weekly use (Less than 1 day a week), non-daily use (1 to 3 days a week), and daily/near daily use or the equivalent of 4 or more times a week (+4 days a week and Daily) (https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7984420/ &amp; https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8855705/).</p></li>
</ul>
<div class="controlly">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(glca)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>mydata_preds1a<span class="ot">&lt;-</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#2023-09-03</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(Base_fiscalia_v16_grant_23_24, <span class="sc">!</span><span class="fu">is.na</span>(otras_sus1_mod)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(sus_principal_mod,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>      dg_trs_cons_sus_or,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>      freq_cons_sus_prin,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>      otras_sus1_mod,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>      otras_sus2_mod) <span class="sc">%&gt;%</span>  </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">data.table</span>()</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>mydata_preds2a_pre <span class="ot">&lt;-</span> mydata_preds1a<span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"dg_trs_cons_sus_or"</span>,<span class="st">"freq_cons_sus_prin"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(.)<span class="sc">~</span> <span class="st">"none"</span>, T<span class="sc">~</span> .))) <span class="sc">%&gt;%</span> </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#2023-09-03: Elminated Other substances</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>sus_principal_mod<span class="sc">==</span><span class="st">"Other"</span>,  <span class="sc">!</span>otras_sus1_mod<span class="sc">==</span><span class="st">"Other"</span>, <span class="sc">!</span>otras_sus2_mod<span class="sc">==</span><span class="st">"Other"</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">#2023-09-03: licit / illicit</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(.<span class="sc">==</span><span class="st">"Alcohol"</span><span class="sc">~</span> <span class="dv">2</span>, . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Cocaine hydrochloride"</span>, <span class="st">"Cocaine paste"</span>, <span class="st">"Marijuana"</span>)<span class="sc">~</span> <span class="dv">3</span>, .<span class="sc">==</span><span class="st">"none"</span><span class="sc">~</span> <span class="dv">1</span>,  T<span class="sc">~</span> <span class="dv">0</span>))) </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>mydata_preds2a <span class="ot">&lt;-</span>mydata_preds2a_pre <span class="sc">%&gt;%</span> </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">#2023-09-04: frequency and diagnosis</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">freq_cons_sus_prin=</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(freq_cons_sus_prin<span class="sc">==</span> <span class="st">"none"</span><span class="sc">~</span><span class="dv">1</span>, <span class="fu">grepl</span>(<span class="st">"Less than 1 day a week"</span>,freq_cons_sus_prin)<span class="sc">~</span><span class="dv">2</span>, <span class="fu">grepl</span>(<span class="st">"1 day a week or more|2 to 3 days a week"</span>,freq_cons_sus_prin)<span class="sc">~</span><span class="dv">3</span>, <span class="fu">grepl</span>(<span class="st">"Daily|4 to 6 days a week"</span>,freq_cons_sus_prin)<span class="sc">~</span> <span class="dv">4</span>,  T<span class="sc">~</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">dg_trs_cons_sus_or=</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(dg_trs_cons_sus_or<span class="sc">==</span> <span class="st">"none"</span><span class="sc">~</span><span class="dv">1</span>, <span class="fu">grepl</span>(<span class="st">"Hazardous consumption"</span>,dg_trs_cons_sus_or)<span class="sc">~</span><span class="dv">2</span>, <span class="fu">grepl</span>(<span class="st">"Drug dependence"</span>,dg_trs_cons_sus_or)<span class="sc">~</span><span class="dv">3</span>, T<span class="sc">~</span> <span class="dv">0</span>))</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">#test</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">#table(mydata_preds2a_pre$dg_trs_cons_sus_or, mydata_preds2a$dg_trs_cons_sus_or, exclude=NULL)</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">#table(mydata_preds2a_pre$freq_cons_sus_prin, mydata_preds2a$freq_cons_sus_prin, exclude=NULL)</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">#Count of substances</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>(mydata_preds2a,sus_principal_mod, otras_sus1_mod, otras_sus2_mod) <span class="sc">%&gt;%</span>  </span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">perc=</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n),<span class="dv">2</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(.<span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="st">"None (1)"</span>, .<span class="sc">==</span><span class="dv">2</span><span class="sc">~</span> <span class="st">"Licit (2)"</span>, .<span class="sc">==</span><span class="dv">3</span><span class="sc">~</span> <span class="st">"Illicit (3)"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">"markdown"</span>, <span class="at">caption=</span><span class="st">"Combinations of substances"</span>, <span class="at">col.names=</span> <span class="fu">c</span>(<span class="st">"Primary substance"</span>, <span class="st">"Other substances (1)"</span>, <span class="st">"Other substances (2)"</span>,<span class="st">"n"</span>, <span class="st">"%"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>count: now 7 rows and 4 columns, 3 group variables remaining (sus_principal_mod, otras_sus1_mod, otras_sus2_mod)</p>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Combinations of substances</caption>
<colgroup>
<col style="width: 26%">
<col style="width: 30%">
<col style="width: 30%">
<col style="width: 7%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Primary substance</th>
<th style="text-align: left;">Other substances (1)</th>
<th style="text-align: left;">Other substances (2)</th>
<th style="text-align: right;">n</th>
<th style="text-align: left;">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">8975</td>
<td style="text-align: left;">23%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">7414</td>
<td style="text-align: left;">19%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: right;">6818</td>
<td style="text-align: left;">17%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">5598</td>
<td style="text-align: left;">14%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">4477</td>
<td style="text-align: left;">11%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">3392</td>
<td style="text-align: left;">9%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">3006</td>
<td style="text-align: left;">8%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>first_five_a<span class="ot">&lt;-</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>(mydata_preds2a,sus_principal_mod, otras_sus1_mod, otras_sus2_mod) <span class="sc">%&gt;%</span>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">0</span>, <span class="sc">!</span><span class="st">"none"</span><span class="sc">==</span>otras_sus1_mod) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">sum</span>(n))<span class="sc">/</span><span class="fu">nrow</span>(mydata_preds2a) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>(.)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>count: now 7 rows and 4 columns, 3 group variables remaining (sus_principal_mod, otras_sus1_mod, otras_sus2_mod)</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"The first four (there is one that is exchangeable) make the "</span>, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">as.character</span>(scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">unlist</span>(first_five_a))),</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">" of the sample"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The first four (there is one that is exchangeable) make the 84% of the sample"</code></pre>
</div>
</div>
<ul>
<li>We made a latent class analysis with only substances.</li>
</ul>
<div class="controlly">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>(mydata_preds2a,sus_principal_mod, otras_sus1_mod, otras_sus2_mod) <span class="sc">%&gt;%</span>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">perc=</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n),<span class="dv">2</span>))) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">"markdown"</span>, <span class="at">caption=</span><span class="st">"Combinations of substances"</span>, <span class="at">col.names=</span> <span class="fu">c</span>(<span class="st">"Primary substance"</span>, <span class="st">"Other substances (1)"</span>, <span class="st">"Other substances (2)"</span>, <span class="st">"n"</span>, <span class="st">"%"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>count: now 7 rows and 4 columns, 3 group variables remaining (sus_principal_mod, otras_sus1_mod, otras_sus2_mod)</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mydata_preds3a <span class="ot">&lt;-</span> mydata_preds2a<span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    data.table<span class="sc">::</span><span class="fu">data.table</span>()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#2023-08-20. We cannot discard none categories for drug use patterns, but we can do it for drug dependence diagnosis and drug use frequency</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::filter(!dg_trs_cons_sus_or==1) %&gt;%  </span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::filter(!freq_cons_sus_prin==1) %&gt;%  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Combinations of substances</caption>
<colgroup>
<col style="width: 26%">
<col style="width: 30%">
<col style="width: 30%">
<col style="width: 7%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Primary substance</th>
<th style="text-align: right;">Other substances (1)</th>
<th style="text-align: right;">Other substances (2)</th>
<th style="text-align: right;">n</th>
<th style="text-align: left;">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8975</td>
<td style="text-align: left;">23%</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7414</td>
<td style="text-align: left;">19%</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">6818</td>
<td style="text-align: left;">17%</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5598</td>
<td style="text-align: left;">14%</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4477</td>
<td style="text-align: left;">11%</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3392</td>
<td style="text-align: left;">9%</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3006</td>
<td style="text-align: left;">8%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">invisible</span>(<span class="st">"glca format"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># We excluded otras_sus3_mod because it had only one value</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>f_preds3<span class="ot">&lt;-</span> <span class="fu">item</span>(sus_principal_mod, otras_sus1_mod, otras_sus2_mod, dg_trs_cons_sus_or, freq_cons_sus_prin) <span class="sc">~</span> <span class="dv">1</span> <span class="co">#, </span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>seed<span class="ot">&lt;-</span><span class="dv">2125</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>testiter <span class="ot">&lt;-</span> <span class="dv">500</span><span class="sc">*</span><span class="fl">1.5</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>n_bootstrap  <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>max_lca3   <span class="ot">&lt;-</span> <span class="dv">8</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>old <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(old)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-09-28 11:26:12 -03"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>lca302 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds3, <span class="at">data =</span> mydata_preds3a, <span class="at">nclass =</span> <span class="dv">2</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">#43 minutes each more or less</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>lca303 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds3, <span class="at">data =</span> mydata_preds3a, <span class="at">nclass =</span> <span class="dv">3</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>lca304 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds3, <span class="at">data =</span> mydata_preds3a, <span class="at">nclass =</span> <span class="dv">4</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>lca305 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds3, <span class="at">data =</span> mydata_preds3a, <span class="at">nclass =</span> <span class="dv">5</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>lca306 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds3, <span class="at">data =</span> mydata_preds3a, <span class="at">nclass =</span> <span class="dv">6</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>lca307 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds3, <span class="at">data =</span> mydata_preds3a, <span class="at">nclass =</span> <span class="dv">7</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>lca308 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds3, <span class="at">data =</span> mydata_preds3a, <span class="at">nclass =</span> <span class="dv">8</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>gof3<span class="ot">&lt;-</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gofglca</span>(lca302, lca303, lca304, lca305, lca306, lca307, lca308, <span class="at">test =</span> <span class="st">"chisq"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="alert alert-warning">
<p>Warning in gofglca(lca302, lca303, lca304, lca305, lca306, lca307, lca308, : Since responses are different, deviance table does not printed.</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>bootlrt3<span class="ot">&lt;-</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gofglca</span>(lca302, lca303, lca304, lca305, lca306, lca307, lca308, <span class="at">test =</span> <span class="st">"boot"</span>, <span class="at">nboot=</span> n_bootstrap, <span class="at">seed=</span><span class="dv">2125</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="alert alert-warning">
<p>Warning in gofglca(lca302, lca303, lca304, lca305, lca306, lca307, lca308, : Since responses are different, deviance table does not printed.</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>best_model_lca3<span class="ot">&lt;-</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">cbind.data.frame</span>(<span class="at">rn=</span><span class="dv">2</span><span class="sc">:</span>max_lca3,gof3<span class="sc">$</span>gtable) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="fu">which.min</span>(BIC)<span class="sc">+</span><span class="dv">1</span>))</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>new_med<span class="ot">&lt;-</span>(<span class="fu">Sys.time</span>())</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"The model took "</span>,<span class="fu">round</span>(new_med<span class="sc">-</span>old,<span class="dv">2</span>),<span class="st">" until every LCA was computed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The model took 2.48 until every LCA was computed"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(new_med)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-09-28 13:54:47 -03"</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://agscl.github.io/IVE/</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>sabic<span class="ot">&lt;-</span><span class="fu">c</span>()</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>( i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">2</span>,max_lca3)){</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  sabic<span class="ot">&lt;-</span><span class="fu">c</span>(sabic,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>(<span class="sc">-</span><span class="dv">2</span> <span class="sc">*</span> <span class="fu">get</span>(<span class="fu">paste0</span>(<span class="st">"lca3"</span>,<span class="fu">sprintf</span>(<span class="st">"%02.f"</span>, i)))<span class="sc">$</span>gof<span class="sc">$</span>loglik)<span class="sc">+</span> <span class="fu">get</span>(<span class="fu">paste0</span>(<span class="st">"lca3"</span>,<span class="fu">sprintf</span>(<span class="st">"%02.f"</span>, i)))<span class="sc">$</span>gof<span class="sc">$</span>df <span class="sc">*</span><span class="fu">log</span>(  (<span class="fu">nrow</span>(mydata_preds3) <span class="sc">+</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">24</span>    )</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>manualcolors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'indianred1'</span>, <span class="st">'cornflowerblue'</span>, <span class="st">'gray50'</span>, <span class="st">'darkolivegreen4'</span>, <span class="st">'slateblue2'</span>, </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'firebrick4'</span>, <span class="st">'goldenrod4'</span>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>levels4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"logLik"</span>, <span class="st">"AIC"</span>, <span class="st">"CAIC"</span>, <span class="st">"BIC"</span>, <span class="st">"entropy"</span>, <span class="st">"Res.Df"</span>, <span class="st">"Gsq"</span>, <span class="st">"SABIC"</span>)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>labels4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Log-Likelihood'</span>, <span class="st">'Akaike Information</span><span class="sc">\n</span><span class="st">Criteria(AIC)'</span>,<span class="st">'Corrected AIC'</span>,<span class="st">'Bayesian Information</span><span class="sc">\n</span><span class="st">Criteria (BIC)'</span>, <span class="st">'Entropy'</span>, <span class="st">'Residual degrees of freedom'</span>, <span class="st">'Deviance'</span>, <span class="st">"SABIC"</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>fig_lca_fit3<span class="ot">&lt;-</span> <span class="fu">cbind.data.frame</span>(<span class="at">rn=</span><span class="dv">2</span><span class="sc">:</span>max_lca3,gof3<span class="sc">$</span>gtable,<span class="at">SABIC=</span>sabic) <span class="sc">%&gt;%</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate_if</span>(is.character, as.numeric) <span class="sc">%&gt;%</span>  <span class="co"># convert character columns to numeric</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>rn,<span class="at">names_to =</span> <span class="st">"indices"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>, <span class="at">values_drop_na =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">indices =</span> <span class="fu">factor</span>(indices, <span class="at">levels =</span> levels4, <span class="at">labels =</span> labels4)) <span class="sc">%&gt;%</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"(AIC|BIC)"</span>,indices, <span class="at">ignore.case=</span>T))<span class="sc">%&gt;%</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">ModelIndex=</span> <span class="fu">factor</span>(rn, <span class="at">levels=</span><span class="dv">2</span><span class="sc">:</span>max_lca3)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ModelIndex, <span class="at">y =</span> value, <span class="at">group =</span> indices, <span class="at">color =</span> indices, <span class="at">linetype =</span> indices)) <span class="sc">+</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> manualcolors) <span class="sc">+</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_linetype_manual(values = c("solid", "dashed", "dotted")) +</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of classes"</span>, <span class="at">y=</span><span class="st">"Value"</span>, <span class="at">color=</span><span class="st">"Measure"</span>, <span class="at">linetype=</span><span class="st">"Measure"</span>)<span class="sc">+</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">#facet_wrap(.~indices, scales = "free_y", nrow = 4, ncol = 1) +</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>fig_lca_fit3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca2-licit-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Elbow plot of the information criteria</figcaption>
</figure>
</div>
</div>
</div>
<p>The best fit was obtained by the 6 class solution</p>
<div class="controlly">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glca(formula = f_preds3, data = mydata_preds3a, nclass = 6, n.init = 50, 
    decreasing = T, testiter = testiter, maxiter = 10000, seed = seed, 
    verbose = FALSE)

Manifest items : sus_principal_mod otras_sus1_mod otras_sus2_mod dg_trs_cons_sus_or freq_cons_sus_prin 

Categories for manifest items :
                   Y = 1 Y = 2 Y = 3 Y = 4
sus_principal_mod      2     3            
otras_sus1_mod         2     3            
otras_sus2_mod         1     2     3      
dg_trs_cons_sus_or     2     3            
freq_cons_sus_prin     1     2     3     4

Model : Latent class analysis 

Number of latent classes : 6 
Number of observations : 39680 
Number of parameters : 53 

log-likelihood : -127336.3 
     G-squared : 27.66963 
           AIC : 254778.5 
           BIC : 255233.7 

Marginal prevalences for latent classes :
Class 1 Class 2 Class 3 Class 4 Class 5 Class 6 
0.08588 0.14764 0.05638 0.26256 0.29751 0.15004 

Class prevalences by group :
    Class 1 Class 2 Class 3 Class 4 Class 5 Class 6
ALL 0.08588 0.14764 0.05638 0.26256 0.29751 0.15004

Item-response probabilities :
sus_principal_mod 
         Y = 1  Y = 2
Class 1 1.0000 0.0000
Class 2 0.9529 0.0471
Class 3 0.0000 1.0000
Class 4 0.0000 1.0000
Class 5 0.0000 1.0000
Class 6 0.0000 1.0000
otras_sus1_mod 
         Y = 1  Y = 2
Class 1 0.0000 1.0000
Class 2 0.0000 1.0000
Class 3 0.0000 1.0000
Class 4 0.0000 1.0000
Class 5 1.0000 0.0000
Class 6 0.7699 0.2301
otras_sus2_mod 
         Y = 1  Y = 2  Y = 3
Class 1 0.7290 0.0000 0.2710
Class 2 0.5578 0.0000 0.4422
Class 3 0.1793 0.8207 0.0000
Class 4 0.2824 0.4782 0.2394
Class 5 0.4835 0.0000 0.5165
Class 6 0.7134 0.0000 0.2866
dg_trs_cons_sus_or 
         Y = 1  Y = 2
Class 1 0.6469 0.3531
Class 2 0.1311 0.8689
Class 3 0.4864 0.5136
Class 4 0.0761 0.9239
Class 5 0.0782 0.9218
Class 6 0.6592 0.3408
freq_cons_sus_prin 
         Y = 1  Y = 2  Y = 3  Y = 4
Class 1 0.0074 0.0767 0.7118 0.2041
Class 2 0.0030 0.0134 0.2496 0.7340
Class 3 0.0063 0.1018 0.5530 0.3389
Class 4 0.0011 0.0182 0.1821 0.7987
Class 5 0.0001 0.0214 0.2522 0.7264
Class 6 0.0126 0.1262 0.5659 0.2953</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Medidas de ajuste (dividir por 1000 gsq_2)</caption>
<colgroup>
<col style="width: 3%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">rn</th>
<th style="text-align: right;">log_lik</th>
<th style="text-align: right;">aic</th>
<th style="text-align: right;">caic</th>
<th style="text-align: right;">bic</th>
<th style="text-align: right;">entropy</th>
<th style="text-align: right;">res_df</th>
<th style="text-align: right;">gsq</th>
<th style="text-align: right;">sabic</th>
<th style="text-align: right;">boot_p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">-133563.7</td>
<td style="text-align: right;">267161.3</td>
<td style="text-align: right;">267324.4</td>
<td style="text-align: right;">267307.4</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">78</td>
<td style="text-align: right;">12482.48</td>
<td style="text-align: right;">267461.1</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">-128831.3</td>
<td style="text-align: right;">257714.5</td>
<td style="text-align: right;">257963.8</td>
<td style="text-align: right;">257937.8</td>
<td style="text-align: right;">0.92</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">3017.67</td>
<td style="text-align: right;">257957.8</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">-127919.3</td>
<td style="text-align: right;">255908.5</td>
<td style="text-align: right;">256244.1</td>
<td style="text-align: right;">256209.1</td>
<td style="text-align: right;">0.81</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">1193.66</td>
<td style="text-align: right;">256095.3</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">-127484.2</td>
<td style="text-align: right;">255056.4</td>
<td style="text-align: right;">255478.3</td>
<td style="text-align: right;">255434.3</td>
<td style="text-align: right;">0.77</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">323.50</td>
<td style="text-align: right;">255186.6</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">-127336.3</td>
<td style="text-align: right;">254778.5</td>
<td style="text-align: right;">255286.7</td>
<td style="text-align: right;">255233.7</td>
<td style="text-align: right;">0.77</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">27.67</td>
<td style="text-align: right;">254852.3</td>
<td style="text-align: right;">0.11</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">-127326.4</td>
<td style="text-align: right;">254776.9</td>
<td style="text-align: right;">255371.4</td>
<td style="text-align: right;">255309.4</td>
<td style="text-align: right;">0.67</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">7.99</td>
<td style="text-align: right;">254794.1</td>
<td style="text-align: right;">0.92</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">-127323.7</td>
<td style="text-align: right;">254789.3</td>
<td style="text-align: right;">255470.1</td>
<td style="text-align: right;">255399.1</td>
<td style="text-align: right;">0.70</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">2.47</td>
<td style="text-align: right;">254750.0</td>
<td style="text-align: right;">0.99</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="controlly">
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#https://rdrr.io/cran/glca/src/R/plot.glca.R</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text =</span> <span class="fu">paste0</span>(<span class="st">"lca30"</span>,best_model_lca3))), <span class="at">ask=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca4-licit-fig1-details-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca4-licit-fig1-details-2.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca4-licit-fig1-details-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca4-licit-fig1-details-4.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca4-licit-fig1-details-5.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca4-licit-fig1-details-6.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>The following steps were involved in the following code:</p>
<ul>
<li>Analysis of the best LCA model’s parameter estimates.</li>
<li>Visualization of the probabilities of different responses across categories.</li>
<li>Extract the parameter ‘rho’ from the best model.</li>
<li>Transform and format the extracted data for visualization.</li>
<li>Read a correction table (<code>traductor_cats3</code>) for categories.</li>
<li>Merge the model data with the correction table.</li>
<li>The data is visualized using a ggplot2 stacked bar chart.</li>
<li>Categories are represented with varying shades of grey.</li>
<li>Each bar represents a variable from the model, and the sections of the bar represent the probability of each category for that variable.</li>
<li>The bars are split by ‘class’ with the use of facets.</li>
<li>The processed data (<code>lcmodel_glca3</code>) containing variables and their probabilities across different categories is saved to an Excel file named <code>variables_probabilities_in_category_glca_licit_ilicit.xlsx</code></li>
<li>The model’s parameters allow a deeper understanding of the probabilities across categories for different variables. The visualization provides a holistic view of the data for quick insights. The processed data is readily available for any further analysis or sharing.</li>
</ul>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#table(mydata_preds3a$sus_principal_mod)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>rho_glca3<span class="ot">&lt;-</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">"bind_rows"</span>,best_model_glca3<span class="sc">$</span>param<span class="sc">$</span>rho<span class="sc">$</span>ALL) <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">data.table</span>(<span class="at">keep.rownames =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  magrittr<span class="sc">::</span><span class="fu">set_colnames</span>(<span class="fu">c</span>(<span class="st">"variables"</span>, <span class="fu">paste0</span>(<span class="st">"Class"</span>,<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(best_model_glca3<span class="sc">$</span>param<span class="sc">$</span>gamma)))) <span class="sc">%&gt;%</span> </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(variables, <span class="at">into=</span><span class="fu">c</span>(<span class="st">"var"</span>, <span class="st">"prob"</span>), <span class="at">sep=</span><span class="st">".Y ="</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3 <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(rho_glca3, <span class="at">level=</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"class"</span><span class="ot">=</span><span class="st">"variable"</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co">#test the number of categories</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co">#table(mydata_preds3a$sus_principal_mod)</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co">#table(mydata_preds3a$otras_sus1_mod)</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>traductor_cats3 <span class="ot">&lt;-</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind.data.frame</span>(</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="at">var=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"sus_principal_mod"</span>,<span class="dv">3</span>), <span class="fu">rep</span>(<span class="st">"otras_sus1_mod"</span>,<span class="dv">3</span>), <span class="fu">rep</span>(<span class="st">"otras_sus2_mod"</span>,<span class="dv">3</span>), <span class="fu">rep</span>(<span class="st">"freq_cons_sus_prin"</span>,<span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">"dg_trs_cons_sus_or"</span>,<span class="dv">3</span>)),</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="at">lvl=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),<span class="dv">3</span>),<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="at">label=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"none"</span>,<span class="st">"Licit"</span>, <span class="st">"Illicit"</span>),<span class="dv">3</span>), <span class="fu">c</span>(<span class="st">"none"</span>, <span class="st">"Less than one day a week"</span>, <span class="st">"1 to 3 days a week"</span>, <span class="st">"4+ days a week"</span>), <span class="fu">c</span>(<span class="st">"none"</span>, <span class="st">"Hazardous consumption"</span>, <span class="st">"Drug dependence"</span>))</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(var) <span class="sc">%&gt;%</span> </span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">n=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">#restricted the levels of the manifest variables to those that were available</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(var<span class="sc">==</span><span class="st">"sus_principal_mod"</span> <span class="sc">&amp;</span> <span class="sc">!</span>lvl <span class="sc">%in%</span> <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">table</span>(mydata_preds3a<span class="sc">$</span>sus_principal_mod),<span class="st">"dimnames"</span>)[[<span class="dv">1</span>]])<span class="sc">~</span> F, T<span class="sc">~</span>T )) <span class="sc">%&gt;%</span> </span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(var<span class="sc">==</span><span class="st">"otras_sus1_mod"</span> <span class="sc">&amp;</span> <span class="sc">!</span>lvl <span class="sc">%in%</span> <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">table</span>(mydata_preds3a<span class="sc">$</span>otras_sus1_mod),<span class="st">"dimnames"</span>)[[<span class="dv">1</span>]])<span class="sc">~</span> F, T<span class="sc">~</span>T )) <span class="sc">%&gt;%</span> </span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(var<span class="sc">==</span><span class="st">"otras_sus2_mod"</span> <span class="sc">&amp;</span> <span class="sc">!</span>lvl <span class="sc">%in%</span> <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">table</span>(mydata_preds3a<span class="sc">$</span>otras_sus2_mod),<span class="st">"dimnames"</span>)[[<span class="dv">1</span>]])<span class="sc">~</span> F, T<span class="sc">~</span>T )) <span class="sc">%&gt;%</span> </span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(var<span class="sc">==</span><span class="st">"freq_cons_sus_prin"</span> <span class="sc">&amp;</span> <span class="sc">!</span>lvl <span class="sc">%in%</span> <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">table</span>(mydata_preds3a<span class="sc">$</span>freq_cons_sus_prin),<span class="st">"dimnames"</span>)[[<span class="dv">1</span>]])<span class="sc">~</span> F, T<span class="sc">~</span>T )) <span class="sc">%&gt;%</span> </span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(var<span class="sc">==</span><span class="st">"dg_trs_cons_sus_or"</span> <span class="sc">&amp;</span> <span class="sc">!</span>lvl <span class="sc">%in%</span> <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">table</span>(mydata_preds3a<span class="sc">$</span>dg_trs_cons_sus_or),<span class="st">"dimnames"</span>)[[<span class="dv">1</span>]])<span class="sc">~</span> F, T<span class="sc">~</span>T )) <span class="sc">%&gt;%</span> </span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(var) <span class="sc">%&gt;%</span> </span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">lvl2=</span><span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>()</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3<span class="ot">&lt;-</span> lcmodel_glca3 <span class="sc">%&gt;%</span> </span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pr=</span><span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"[^0-9.]+"</span>, <span class="st">""</span>, prob))) <span class="sc">%&gt;%</span> </span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(traductor_cats3[,<span class="fu">c</span>(<span class="st">"var"</span>, <span class="st">"lvl2"</span>, <span class="st">"label"</span>)], <span class="at">by=</span> <span class="fu">c</span>(<span class="st">"var"</span><span class="ot">=</span><span class="st">"var"</span>, <span class="st">"pr"</span><span class="ot">=</span><span class="st">"lvl2"</span>))  </span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::mutate(CATEGORIA= dplyr::case_when(var=="AÑO" &amp; prob==" 1"~"Perdidos", T~CATEGORIA))</span></span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3<span class="sc">$</span>text_label<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">""</span>,lcmodel_glca3<span class="sc">$</span>label,<span class="st">"&lt;br&gt;%: "</span>,scales<span class="sc">::</span><span class="fu">percent</span>(lcmodel_glca3<span class="sc">$</span>value))</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3<span class="sc">$</span>text_label2<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">""</span>,lcmodel_glca3<span class="sc">$</span>label,<span class="st">"</span><span class="sc">\n</span><span class="st"> "</span>,scales<span class="sc">::</span><span class="fu">percent</span>(lcmodel_glca3<span class="sc">$</span>value))</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>zp33 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(lcmodel_glca3,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(var, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"freq_cons_sus_prin"</span>,<span class="st">"dg_trs_cons_sus_or"</span>), <span class="at">labels=</span> <span class="fu">c</span>(<span class="st">"Primary</span><span class="sc">\n</span><span class="st">substance"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(1)"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(2)"</span>,<span class="st">"Freq.Subs.Use"</span>,<span class="st">"Dg.Subs.Dep"</span>)), <span class="at">y =</span> value, <span class="at">fill =</span> <span class="fu">factor</span>(pr), <span class="at">label=</span>text_label))</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>zp33 <span class="ot">&lt;-</span> zp33 <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>)</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>zp33 <span class="ot">&lt;-</span> zp33 <span class="sc">+</span> <span class="fu">facet_grid</span>(class <span class="sc">~</span> .) </span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>zp33 <span class="ot">&lt;-</span> zp33 <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">type=</span><span class="st">"seq"</span>, <span class="at">palette=</span><span class="st">"Greys"</span>, <span class="at">na.value =</span> <span class="st">"white"</span>) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>zp33 <span class="ot">&lt;-</span> zp33 <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Response probabilities"</span>, </span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a>                  <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span><span class="st">"Respone/ncategories"</span>)</span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a>zp33 <span class="ot">&lt;-</span> zp33 <span class="sc">+</span> <span class="fu">theme</span>( <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a>                    <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),                    </span>
<span id="cb26-53"><a href="#cb26-53" aria-hidden="true" tabindex="-1"></a>                    <span class="at">panel.grid.major.y=</span><span class="fu">element_blank</span>())</span>
<span id="cb26-54"><a href="#cb26-54" aria-hidden="true" tabindex="-1"></a>zp33 <span class="ot">&lt;-</span> zp33 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse=</span><span class="cn">TRUE</span>))</span>
<span id="cb26-55"><a href="#cb26-55" aria-hidden="true" tabindex="-1"></a>zp33 <span class="ot">&lt;-</span> zp33 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb26-56"><a href="#cb26-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>)</span>
<span id="cb26-57"><a href="#cb26-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-58"><a href="#cb26-58" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(zp33, <span class="at">tooltip =</span> <span class="fu">c</span>(<span class="st">"text_label"</span>))<span class="sc">%&gt;%</span> plotly<span class="sc">::</span><span class="fu">layout</span>(<span class="at">xaxis=</span> <span class="fu">list</span>(<span class="at">showticklabels =</span> T),<span class="at">height=</span><span class="dv">600</span>, <span class="at">width=</span><span class="dv">800</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="alert alert-warning">
<p>Warning: Specifying width/height in layout() is now deprecated. Please specify in ggplotly() or plot_ly()</p>
</div>
<div class="cell-output-display">
<div id="htmlwidget-820fc4530286fdc070d0" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-820fc4530286fdc070d0">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,1,0.27,0.35,0.99],"x":[1,2,3,5,4],"y":[1,0,0.73,0.65,0.01],"text":["text_label: Licit<br>%: 100.0%","text_label: Licit<br>%: 0.0%","text_label: none<br>%: 73.0%","text_label: Hazardous consumption<br>%: 65.0%","text_label: none<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0.05,1,0.44,0.87,0.99],"x":[1,2,3,5,4],"y":[0.95,0,0.56,0.13,0],"text":["text_label: Licit<br>%: 95.0%","text_label: Licit<br>%: 0.0%","text_label: none<br>%: 56.0%","text_label: Hazardous consumption<br>%: 13.0%","text_label: none<br>%: 0.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[1,1,0.82,0.51,0.99],"x":[1,2,3,5,4],"y":[0,0,0.18,0.49,0.0099999999999999],"text":["text_label: Licit<br>%: 0.0%","text_label: Licit<br>%: 0.0%","text_label: none<br>%: 18.0%","text_label: Hazardous consumption<br>%: 49.0%","text_label: none<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[1,1,0.72,0.92,1],"x":[1,2,3,5,4],"y":[0,0,0.28,0.08,0],"text":["text_label: Licit<br>%: 0.0%","text_label: Licit<br>%: 0.0%","text_label: none<br>%: 28.0%","text_label: Hazardous consumption<br>%: 8.0%","text_label: none<br>%: 0.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[1,0,0.52,0.92,1],"x":[1,2,3,5,4],"y":[0,1,0.48,0.08,0],"text":["text_label: Licit<br>%: 0.0%","text_label: Licit<br>%: 100.0%","text_label: none<br>%: 48.0%","text_label: Hazardous consumption<br>%: 8.0%","text_label: none<br>%: 0.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[1,0.23,0.29,0.34,1],"x":[1,2,3,5,4],"y":[0,0.77,0.71,0.66,0.01],"text":["text_label: Licit<br>%: 0.0%","text_label: Licit<br>%: 77.0%","text_label: none<br>%: 71.0%","text_label: Hazardous consumption<br>%: 66.0%","text_label: none<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.27,0,0.91],"x":[1,2,3,5,4],"y":[0,1,0,0.35,0.0800000000000001],"text":["text_label: Illicit<br>%: 0.0%","text_label: Illicit<br>%: 100.0%","text_label: Licit<br>%: 0.0%","text_label: Drug dependence<br>%: 35.0%","text_label: Less than one day a week<br>%: 8.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.44,0,0.98],"x":[1,2,3,5,4],"y":[0.05,1,0,0.87,0.01],"text":["text_label: Illicit<br>%: 5.0%","text_label: Illicit<br>%: 100.0%","text_label: Licit<br>%: 0.0%","text_label: Drug dependence<br>%: 87.0%","text_label: Less than one day a week<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0.89],"x":[1,2,3,5,4],"y":[1,1,0.82,0.51,0.1],"text":["text_label: Illicit<br>%: 100.0%","text_label: Illicit<br>%: 100.0%","text_label: Licit<br>%: 82.0%","text_label: Drug dependence<br>%: 51.0%","text_label: Less than one day a week<br>%: 10.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.24,0,0.98],"x":[1,2,3,5,4],"y":[1,1,0.48,0.92,0.02],"text":["text_label: Illicit<br>%: 100.0%","text_label: Illicit<br>%: 100.0%","text_label: Licit<br>%: 48.0%","text_label: Drug dependence<br>%: 92.0%","text_label: Less than one day a week<br>%: 2.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.52,0,0.98],"x":[1,2,3,5,4],"y":[1,0,0,0.92,0.02],"text":["text_label: Illicit<br>%: 100.0%","text_label: Illicit<br>%: 0.0%","text_label: Licit<br>%: 0.0%","text_label: Drug dependence<br>%: 92.0%","text_label: Less than one day a week<br>%: 2.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.29,0,0.87],"x":[1,2,3,5,4],"y":[1,0.23,0,0.34,0.13],"text":["text_label: Illicit<br>%: 100.0%","text_label: Illicit<br>%: 23.0%","text_label: Licit<br>%: 0.0%","text_label: Drug dependence<br>%: 34.0%","text_label: Less than one day a week<br>%: 13.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.2],"x":[3,4],"y":[0.27,0.71],"text":["text_label: Illicit<br>%: 27.0%","text_label: 1 to 3 days a week<br>%: 71.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.73],"x":[3,4],"y":[0.44,0.25],"text":["text_label: Illicit<br>%: 44.0%","text_label: 1 to 3 days a week<br>%: 25.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.34],"x":[3,4],"y":[0,0.55],"text":["text_label: Illicit<br>%: 0.0%","text_label: 1 to 3 days a week<br>%: 55.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.8],"x":[3,4],"y":[0.24,0.18],"text":["text_label: Illicit<br>%: 24.0%","text_label: 1 to 3 days a week<br>%: 18.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.73],"x":[3,4],"y":[0.52,0.25],"text":["text_label: Illicit<br>%: 52.0%","text_label: 1 to 3 days a week<br>%: 25.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.3],"x":[3,4],"y":[0.29,0.57],"text":["text_label: Illicit<br>%: 29.0%","text_label: 1 to 3 days a week<br>%: 57.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.2],"text":"text_label: 4+ days a week<br>%: 20.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.73],"text":"text_label: 4+ days a week<br>%: 73.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.34],"text":"text_label: 4+ days a week<br>%: 34.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.8],"text":"text_label: 4+ days a week<br>%: 80.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.73],"text":"text_label: 4+ days a week<br>%: 73.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.3],"text":"text_label: 4+ days a week<br>%: 30.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":37.9178082191781,"r":18.9954337899543,"b":25.5707762557078,"l":25.5707762557078},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["Primary<br />substance","Other<br />subs(1)","Other<br />subs(2)","Freq.Subs.Use","Dg.Subs.Dep"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Primary<br />substance","Other<br />subs(1)","Other<br />subs(2)","Freq.Subs.Use","Dg.Subs.Dep"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-30,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"y6","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.839041095890411,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"annotations":[{"text":"Response probabilities","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-7.30593607305936},{"text":"Class1","x":1,"y":0.919520547945206,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class2","x":1,"y":0.75,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class3","x":1,"y":0.583333333333333,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class4","x":1,"y":0.416666666666667,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class5","x":1,"y":0.25,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class6","x":1,"y":0.0804794520547946,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"}],"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.839041095890411,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.839041095890411,"y1":1,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.672374429223744,"y1":0.827625570776256},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.672374429223744,"y1":0.827625570776256,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.505707762557078,"y1":0.660958904109589},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.505707762557078,"y1":0.660958904109589,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.339041095890411,"y1":0.494292237442922},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.339041095890411,"y1":0.494292237442922,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.172374429223744,"y1":0.327625570776256},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.172374429223744,"y1":0.327625570776256,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.160958904109589},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0,"y1":0.160958904109589,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"}],"yaxis2":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.672374429223744,0.827625570776256],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.505707762557078,0.660958904109589],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.339041095890411,0.494292237442922],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.172374429223744,0.327625570776256],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis6":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0,0.160958904109589],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative","height":600,"width":800},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"14bc27de4078":{"x":{},"y":{},"fill":{},"label":{},"type":"bar"}},"cur_data":"14bc27de4078","visdat":{"14bc27de4078":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Selected Model</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"_fig3_LCA_distribuciones_glca_licit_ilicit.png"</span>,zp33, <span class="at">dpi=</span> <span class="dv">600</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3 <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"variables_probabilities_in_category_glca_licit_ilicit.xlsx"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>zp33b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(lcmodel_glca3,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(var, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"freq_cons_sus_prin"</span>,<span class="st">"dg_trs_cons_sus_or"</span>), <span class="at">labels=</span> <span class="fu">c</span>(<span class="st">"Primary</span><span class="sc">\n</span><span class="st">substance"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(1)"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(2)"</span>,<span class="st">"Freq.Subs.Use"</span>,<span class="st">"Dg.Subs.Dep"</span>)), <span class="at">y =</span> value, <span class="at">fill =</span> <span class="fu">factor</span>(pr), <span class="at">label=</span>text_label2))</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>zp33b <span class="ot">&lt;-</span> zp33b <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>zp33b <span class="ot">&lt;-</span> zp33b <span class="sc">+</span> <span class="fu">facet_grid</span>(class <span class="sc">~</span> .) </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>zp33b <span class="ot">&lt;-</span> zp33b <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">type=</span><span class="st">"seq"</span>, <span class="at">palette=</span><span class="st">"Greys"</span>, <span class="at">na.value =</span> <span class="st">"white"</span>) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>zp33b <span class="ot">&lt;-</span> zp33b <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Response probabilities"</span>, </span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span><span class="st">"Respone/ncategories"</span>)</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>zp33b <span class="ot">&lt;-</span> zp33b <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">paste0</span>(<span class="st">"grey"</span>,<span class="fu">seq</span>(<span class="dv">20</span>,<span class="dv">80</span>, <span class="at">by=</span><span class="dv">60</span><span class="sc">/</span><span class="dv">6</span>))) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>zp33b <span class="ot">&lt;-</span> zp33b <span class="sc">+</span> <span class="fu">theme</span>( <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>                    <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),                    </span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>                    <span class="at">panel.grid.major.y=</span><span class="fu">element_blank</span>())</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>zp33b <span class="ot">&lt;-</span> zp33b <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse=</span><span class="cn">TRUE</span>))</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>zp33b <span class="ot">&lt;-</span> zp33b <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>)</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"zp33b.png"</span>, </span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>       zp33b<span class="sc">+</span> ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="co">#aes(#y=half, label=lab),</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">max.iter =</span> <span class="fl">1e6</span>,</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>)<span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>), </span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">height=</span><span class="dv">13</span>)<span class="co">#, fill = "white" --&gt; dentro de label repel</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3 <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>( class, var, label, value) <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"tab_cond_pr_licit_illicit.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For ease of interpretation, we summarized the main characteristics of each class based on the probabilities provided:</p>
<ul>
<li><p><strong>1. Hazardous, Frequent Primary Licit Substance Use with Secondary Illicit Substance</strong>: Patients who primarily use a legal or licit substance in a manner that is considered hazardous and also consumes an illicit drug.</p></li>
<li><p><strong>2. Dependence on, and Very Frequent Licit Substance Use with Secondary Illicit Substance</strong>: Individuals dependent on a legal substance which they use very frequently, and they also use an illicit substance.</p></li>
<li><p><strong>3. Mixed Dependence, Frequent Broad-Spectrum Illicit Substance Use</strong>: Patients with mixed dependence symptoms and use a wide range of illegal drugs frequently.</p></li>
<li><p><strong>4. Dependence on, and Very Frequent Illicit Substance Use with Secondary and Tertiary Mixed Substance Use</strong>: Patients dependent on and frequently use an illicit substance and also use another illicit drug. Additionally, they have a mixed pattern of using a third set of substances.</p></li>
<li><p><strong>5. Dependence on, and Very Frequent Illicit Substance Use with Secondary Licit and Tertiary Mixed (Illicit vs.&nbsp;Absence) Substance Use</strong>: Patients who are dependent on an illicit drug which they use very often. They also use a licit substance and have a mixed pattern of using a third set of substances, alternating between illicit use and absence of use.</p></li>
<li><p><strong>6. Hazardous, Frequent Illicit Substance Use with Secondary Licit Substance</strong>: Patients who use an illegal drug frequently in a hazardous manner and also use a legal substance.</p></li>
</ul>
<p>(For more info, see this <a href="https://chat.openai.com/share/ca7a6658-7bbc-4d43-972a-1fc0a20179b3">link</a>)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Classifying by posterior probs.</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>posterior_glca3_05_final<span class="ot">&lt;-</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>best_model_glca3<span class="sc">$</span>posterior<span class="sc">$</span>ALL <span class="sc">%&gt;%</span> </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">ifelse</span>(.<span class="sc">&gt;</span>.<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_05=</span>dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="st">`</span><span class="at">Class 1</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">1</span>,<span class="st">`</span><span class="at">Class 2</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">2</span>, <span class="st">`</span><span class="at">Class 3</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">3</span>,<span class="st">`</span><span class="at">Class 4</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">4</span>, <span class="st">`</span><span class="at">Class 5</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">5</span>, <span class="st">`</span><span class="at">Class 6</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">6</span>))</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>posterior_glca3_07_final<span class="ot">&lt;-</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>best_model_glca3<span class="sc">$</span>posterior<span class="sc">$</span>ALL <span class="sc">%&gt;%</span> </span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">ifelse</span>(.<span class="sc">&gt;</span>.<span class="dv">7</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_07=</span>dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="st">`</span><span class="at">Class 1</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">1</span>,<span class="st">`</span><span class="at">Class 2</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">2</span>, <span class="st">`</span><span class="at">Class 3</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">3</span>,<span class="st">`</span><span class="at">Class 4</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">4</span>, <span class="st">`</span><span class="at">Class 5</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">5</span>, <span class="st">`</span><span class="at">Class 6</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">6</span>))</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Unite the posterior probabilities with the original database</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>bd_mydata_preds3_posterior3<span class="ot">&lt;-</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind.data.frame</span>(mydata_preds3a,<span class="at">final_07=</span>posterior_glca3_07_final<span class="sc">$</span>final_07,<span class="at">final_05=</span>posterior_glca3_05_final<span class="sc">$</span>final_05)</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>sum_prob_post<span class="ot">&lt;-</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(bd_mydata_preds3_posterior3<span class="sc">$</span>final_05, </span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>      bd_mydata_preds3_posterior3<span class="sc">$</span>final_07,<span class="at">exclude=</span><span class="cn">NULL</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(Freq<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Perc=</span> scales<span class="sc">::</span><span class="fu">percent</span>(Freq<span class="sc">/</span><span class="fu">sum</span>(Freq))) <span class="sc">%&gt;%</span> </span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(Var2), Var1,<span class="fu">desc</span>(Freq)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Var2)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="fu">parse_number</span>(Perc)))</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a><span class="co">#Determining misclassification</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(bd_mydata_preds3_posterior3<span class="sc">$</span>final_05, </span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>      bd_mydata_preds3_posterior3<span class="sc">$</span>final_07,<span class="at">exclude=</span><span class="cn">NULL</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(Freq<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Perc=</span> scales<span class="sc">::</span><span class="fu">percent</span>(Freq<span class="sc">/</span><span class="fu">sum</span>(Freq))) <span class="sc">%&gt;%</span> </span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(Var2), Var1,<span class="fu">desc</span>(Freq)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">"markdown"</span>, <span class="at">caption=</span><span class="st">"Posterior probabilities of Classification"</span>, </span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>             <span class="at">col.names=</span> <span class="fu">c</span>(<span class="st">"Classifying w/ .5"</span>, <span class="st">"Classifying w/ .7"</span>, <span class="st">"Frequency"</span>, <span class="st">"%"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Posterior probabilities of Classification</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Classifying w/ .5</th>
<th style="text-align: left;">Classifying w/ .7</th>
<th style="text-align: right;">Frequency</th>
<th style="text-align: left;">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">6</td>
<td style="text-align: left;">6</td>
<td style="text-align: right;">3258</td>
<td style="text-align: left;">8.21%</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
<td style="text-align: right;">10025</td>
<td style="text-align: left;">25.26%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;">8898</td>
<td style="text-align: left;">22.42%</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: right;">670</td>
<td style="text-align: left;">1.69%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: right;">3814</td>
<td style="text-align: left;">9.61%</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: right;">1949</td>
<td style="text-align: left;">4.91%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">727</td>
<td style="text-align: left;">1.83%</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">2500</td>
<td style="text-align: left;">6.30%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">178</td>
<td style="text-align: left;">0.45%</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3111</td>
<td style="text-align: left;">7.84%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">2754</td>
<td style="text-align: left;">6.94%</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1194</td>
<td style="text-align: left;">3.01%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">602</td>
<td style="text-align: left;">1.52%</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>When using classification criteria based on the model output, if at least 50% of an observation’s posterior probability is accounted for by a particular class, only 1.52% of the patients remain unclassified. However, if we raise this threshold to 70%, then 27.9% of the patients would not be assigned to any latent class. This observation aligns with relative entropy principles.</p>
<div class="cell" data-paged.print="true">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(easyalluvial)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(parcats)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>p_alluvial3<span class="ot">&lt;-</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind.data.frame</span>(<span class="fu">subset</span>(Base_fiscalia_v16_grant_23_24, <span class="sc">!</span><span class="fu">is.na</span>(otras_sus1_mod)) <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"dg_trs_cons_sus_or"</span>,<span class="st">"freq_cons_sus_prin"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(.)<span class="sc">~</span> <span class="st">"none"</span>, T<span class="sc">~</span> .))) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>sus_principal_mod<span class="sc">==</span><span class="st">"Other"</span>,  <span class="sc">!</span>otras_sus1_mod<span class="sc">==</span><span class="st">"Other"</span>, <span class="sc">!</span>otras_sus2_mod<span class="sc">==</span><span class="st">"Other"</span>),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="at">final_07=</span>posterior_glca3_07_final<span class="sc">$</span>final_07, <span class="at">final_05=</span>posterior_glca3_05_final<span class="sc">$</span>final_05) <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">event_comp=</span> <span class="fu">factor</span>(event_comp, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Completion"</span>, <span class="st">"Non-completion"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_05=</span><span class="fu">factor</span>(final_05, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"C1: Hazardous Licit Usen</span><span class="sc">\n</span><span class="st">+ Secondary Illicit"</span>, <span class="st">"C2: Dependent Frequent Licit</span><span class="sc">\n</span><span class="st">+ Secondary Illicit"</span>, <span class="st">"C3: Mixed Dependence</span><span class="sc">\n</span><span class="st">+ Broad Illicit Use"</span>, <span class="st">"C4: Dependent Frequent Illicit</span><span class="sc">\n</span><span class="st">+ Mixed Secondary/Tertiary"</span>, <span class="st">"C5: Dependent Frequent Illicit</span><span class="sc">\n</span><span class="st">+ Secondary Licit</span><span class="sc">\n</span><span class="st">&amp; Mixed Tertiary"</span>, <span class="st">"C6: Hazardous Frequent Illicit</span><span class="sc">\n</span><span class="st">+ Secondary Licit"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#sus_principal_mod,</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  otras_sus1_mod,</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  otras_sus2_mod,</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    final_05,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>      event_comp) <span class="sc">%&gt;%</span>  </span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>      easyalluvial<span class="sc">::</span><span class="fu">alluvial_wide</span>(</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bin=</span><span class="dv">2</span>,</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bin_labels =</span> <span class="fu">c</span>(<span class="st">"ambulatory"</span>, <span class="st">"residential"</span>),</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">order_levels=</span> <span class="fu">c</span>(<span class="st">"ambulatory"</span>, <span class="st">"residential"</span>,<span class="st">"censored"</span>),</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill_by =</span> <span class="st">'first_variable'</span>,</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">NA_label =</span> <span class="st">"non-classified"</span>,</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">auto_rotate_xlabs =</span> T,</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>                  <span class="at">stratum_label_size =</span> <span class="dv">3</span>,</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">colorful_fill_variable_stratum =</span> F)<span class="sc">+</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>p_alluvial3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca5-alluvial-1.png" class="img-fluid figure-img" width="3500"></p>
<figcaption class="figure-caption">Figure 2. Sankey Plot of Transitions by Treatment Modality</figcaption>
</figure>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"glca_res_comp_off_licit_illicit.png"</span>, </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>       p_alluvial3, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">height=</span><span class="dv">13</span>)<span class="co">#, fill = "white" --&gt; dentro de label repel</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>Saving 7 x 13 in image</p>
</div>
</div>
<section id="covariate-tr.-completion" class="level4">
<h4 class="anchored" data-anchor-id="covariate-tr.-completion">Covariate: Tr. completion</h4>
<ul>
<li>Adjusting by treatment completion status</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>mydata_preds323<span class="ot">&lt;-</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cbind.data.frame</span>(<span class="fu">subset</span>(Base_fiscalia_v16_grant_23_24, <span class="sc">!</span><span class="fu">is.na</span>(otras_sus1_mod)) <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"dg_trs_cons_sus_or"</span>,<span class="st">"freq_cons_sus_prin"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(.)<span class="sc">~</span> <span class="st">"none"</span>, T<span class="sc">~</span> .))) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>sus_principal_mod<span class="sc">==</span><span class="st">"Other"</span>,  <span class="sc">!</span>otras_sus1_mod<span class="sc">==</span><span class="st">"Other"</span>, <span class="sc">!</span>otras_sus2_mod<span class="sc">==</span><span class="st">"Other"</span>),</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">final_07=</span>posterior_glca3_07_final<span class="sc">$</span>final_07, <span class="at">final_05=</span>posterior_glca3_05_final<span class="sc">$</span>final_05,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    mydata_preds3a) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">event_comp=</span> <span class="fu">factor</span>(event_comp, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Completion"</span>, <span class="st">"Non-completion"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_05=</span><span class="fu">factor</span>(final_05, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"C1: Hazardous Licit Usen</span><span class="sc">\n</span><span class="st">+ Secondary Illicit"</span>, <span class="st">"C2: Dependent Frequent Licit</span><span class="sc">\n</span><span class="st">+ Secondary Illicit"</span>, <span class="st">"C3: Mixed Dependence</span><span class="sc">\n</span><span class="st">+ Broad Illicit Use"</span>, <span class="st">"C4: Dependent Frequent Illicit</span><span class="sc">\n</span><span class="st">+ Mixed Secondary/Tertiary"</span>, <span class="st">"C5: Dependent Frequent Illicit</span><span class="sc">\n</span><span class="st">+ Secondary Licit</span><span class="sc">\n</span><span class="st">&amp; Mixed Tertiary"</span>, <span class="st">"C6: Hazardous Frequent Illicit</span><span class="sc">\n</span><span class="st">+ Secondary Licit"</span>)))</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>f_preds23_adj<span class="ot">&lt;-</span> <span class="fu">item</span>(sus_principal_mod_2, otras_sus1_mod_2, otras_sus2_mod_2, dg_trs_cons_sus_or_2, freq_cons_sus_prin_2) <span class="sc">~</span> event_comp </span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>lca3062 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds23_adj, <span class="at">data =</span> mydata_preds323, <span class="at">nclass =</span> <span class="dv">6</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>, <span class="at">testiter =</span> testiter)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>gof_lca_adj<span class="ot">&lt;-</span> <span class="fu">gofglca</span>(lca3062, <span class="at">test=</span><span class="st">"boot"</span>, <span class="at">nboot=</span>n_bootstrap, <span class="at">seed=</span><span class="dv">2125</span>)</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>df_lca3062<span class="ot">&lt;-</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="fu">coef</span>(lca3062)) <span class="sc">%&gt;%</span> <span class="fu">rownames_to_column</span>(<span class="st">"term"</span>) <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="st">"rowname"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">"key"</span>, <span class="at">value =</span> <span class="st">"value"</span>, <span class="sc">-</span>rowname) <span class="sc">%&gt;%</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">spread</span>(<span class="at">key =</span> <span class="st">"rowname"</span>, <span class="at">value =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_names</span>(<span class="fu">as.character</span>(<span class="fu">unlist</span>(<span class="fu">tail</span>(., <span class="dv">1</span>)))) <span class="sc">%&gt;%</span> </span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">term=</span><span class="fu">strsplit</span>(<span class="fu">sub</span>(<span class="st">'^(.*?_.*?_.*?)_(.*)$'</span>, <span class="st">'</span><span class="sc">\\</span><span class="st">1,</span><span class="sc">\\</span><span class="st">2'</span>, term), <span class="st">','</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(<span class="at">col=</span>term,<span class="at">into =</span> <span class="fu">c</span>(<span class="st">"prefix"</span>, <span class="st">"suffix"</span>),  <span class="at">sep =</span> <span class="st">", "</span>, <span class="at">extra =</span> <span class="st">"merge"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"prefix"</span>, <span class="st">"suffix"</span>), <span class="sc">~</span><span class="fu">gsub</span>(<span class="st">'</span><span class="sc">\\</span><span class="st">(|"|</span><span class="sc">\\</span><span class="st">)'</span>, <span class="st">""</span>, .)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Class 1 / 6 :
                         Odds Ratio Coefficient  Std. Error  t value  Pr(&gt;|t|)
(Intercept)                 1.53077     0.42577     0.20099    2.118   0.03600
event_compNon-completion    1.27869     0.24584     0.07545    3.258   0.00142
                           
(Intercept)              * 
event_compNon-completion **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Class 2 / 6 :
                         Odds Ratio Coefficient  Std. Error  t value  Pr(&gt;|t|)
(Intercept)                  0.5184     -0.6570      0.3187   -2.061    0.0412
event_compNon-completion     1.9554      0.6706      0.1044    6.426  2.15e-09
                            
(Intercept)              *  
event_compNon-completion ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Class 3 / 6 :
                         Odds Ratio Coefficient  Std. Error  t value  Pr(&gt;|t|)
(Intercept)                 2.02959     0.70783     0.13749    5.148  9.24e-07
event_compNon-completion    1.86896     0.62538     0.06306    9.916   &lt; 2e-16
                            
(Intercept)              ***
event_compNon-completion ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Class 4 / 6 :
                         Odds Ratio Coefficient  Std. Error  t value  Pr(&gt;|t|)
(Intercept)                 2.58440     0.94949     0.13079    7.260  2.91e-11
event_compNon-completion    1.63761     0.49324     0.06089    8.101  3.10e-13
                            
(Intercept)              ***
event_compNon-completion ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Class 5 / 6 :
                         Odds Ratio Coefficient  Std. Error  t value  Pr(&gt;|t|)
(Intercept)                 1.28567     0.25128     0.16873    1.489     0.139
event_compNon-completion    1.44113     0.36543     0.07279    5.020  1.63e-06
                            
(Intercept)                 
event_compNon-completion ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="message">
<p>gather: reorganized (term, all_class1_6_odds_ratio, all_class1_6_coefficient, all_class1_6_std_error, all_class1_6_t_value, …) into (key, value) [was 2x27, now 52x3]</p>
</div>
<div class="message">
<p>spread: reorganized (rowname, value) into (1, 2) [was 52x3, now 26x3]</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df_lca30622<span class="ot">&lt;-</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df_lca3062<span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(suffix <span class="sc">==</span> <span class="st">"coefficient"</span> <span class="sc">|</span> suffix <span class="sc">==</span> <span class="st">"std_error"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>suffix, <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">"(Intercept)"</span>, <span class="st">"event_compNon-completion"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate_at</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="sc">~</span><span class="fu">as.numeric</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_log_or_int =</span> <span class="st">`</span><span class="at">(Intercept)_coefficient</span><span class="st">`</span> <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="st">`</span><span class="at">(Intercept)_std_error</span><span class="st">`</span>,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper_log_or_int =</span> <span class="st">`</span><span class="at">(Intercept)_coefficient</span><span class="st">`</span> <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="st">`</span><span class="at">event_compNon-completion_std_error</span><span class="st">`</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_log_or_comp =</span> <span class="st">`</span><span class="at">event_compNon-completion_coefficient</span><span class="st">`</span> <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="st">`</span><span class="at">event_compNon-completion_std_error</span><span class="st">`</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper_log_or_comp =</span> <span class="st">`</span><span class="at">event_compNon-completion_coefficient</span><span class="st">`</span> <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="st">`</span><span class="at">event_compNon-completion_std_error</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"int_coef"</span><span class="ot">=</span><span class="st">"(Intercept)_coefficient"</span>, <span class="st">"int_std_error"</span><span class="ot">=</span><span class="st">"(Intercept)_std_error"</span>, <span class="st">"comp_coef"</span><span class="ot">=</span><span class="st">"event_compNon-completion_coefficient"</span>,<span class="st">"comp_std_error"</span><span class="ot">=</span><span class="st">"event_compNon-completion_std_error"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(prefix,<span class="co">#t_coef int_std_error comp_coef comp_std_error </span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>                int_coef, int_std_error, comp_coef, comp_std_error, </span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>                lower_log_or_int, upper_log_or_int, lower_log_or_comp, upper_log_or_comp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>pivot_wider: reorganized (suffix, (Intercept), event_compNon-completion) into ((Intercept)_coefficient, (Intercept)_std_error, event_compNon-completion_coefficient, event_compNon-completion_std_error) [was 10x4, now 5x5]</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List of call classes</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>call_classes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"call_class1_6"</span>, <span class="st">"call_class2_6"</span>, <span class="st">"call_class3_6"</span>, <span class="st">"call_class4_6"</span>, <span class="st">"call_class5_6"</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Use map_df to loop through each call class and apply the summarise logic</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Long, S. and Freese, J. (2014) Regression Models for Categorical Dependent Variables Using Stata. 3rd Edition, Stata Press, College Station.</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9041638/ #eq 3</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#$\frac{exp(\alpha+\sum_{k=1}^{K}\beta_{mk}X_{ik})}{1+exp(\alpha+\sum_{k=1}^{K}\beta_{mk}X_{ik})}$</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">#https://www3.nd.edu/~rwilliam/stats3/Mlogit1.pdf</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">map_df</span>(call_classes, <span class="sc">~</span> {</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  df_lca30622 <span class="sc">%&gt;%</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">int_comp_coef=</span>int_coef<span class="sc">+</span>comp_coef) <span class="sc">%&gt;%</span> </span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">call_class =</span> .x,</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">nom =</span> <span class="fu">sum</span>(<span class="fu">ifelse</span>(prefix <span class="sc">==</span> .x, <span class="fu">exp</span>(int_comp_coef), <span class="dv">0</span>)),</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>                     <span class="at">den =</span> <span class="fu">sum</span>(<span class="fu">exp</span>(int_comp_coef)),</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>                     <span class="at">prob =</span> nom<span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>den))</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>result_lo <span class="ot">&lt;-</span> <span class="fu">map_df</span>(call_classes, <span class="sc">~</span> {</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    df_lca30622 <span class="sc">%&gt;%</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">int_comp_coef=</span>lower_log_or_int<span class="sc">+</span>lower_log_or_comp) <span class="sc">%&gt;%</span> </span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">call_class =</span> .x,</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nom =</span> <span class="fu">sum</span>(<span class="fu">ifelse</span>(prefix <span class="sc">==</span> .x, <span class="fu">exp</span>(int_comp_coef), <span class="dv">0</span>)),</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>                         <span class="at">den =</span> <span class="fu">sum</span>(<span class="fu">exp</span>(int_comp_coef)),</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>                         <span class="at">prob =</span> nom<span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>den))</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>result_hi <span class="ot">&lt;-</span> <span class="fu">map_df</span>(call_classes, <span class="sc">~</span> {</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>    df_lca30622 <span class="sc">%&gt;%</span></span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">int_comp_coef=</span>upper_log_or_int<span class="sc">+</span>upper_log_or_comp) <span class="sc">%&gt;%</span> </span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">call_class =</span> .x,</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nom =</span> <span class="fu">sum</span>(<span class="fu">ifelse</span>(prefix <span class="sc">==</span> .x, <span class="fu">exp</span>(int_comp_coef), <span class="dv">0</span>)),</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>                         <span class="at">den =</span> <span class="fu">sum</span>(<span class="fu">exp</span>(int_comp_coef)),</span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>                         <span class="at">prob =</span> nom<span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>den))</span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>df_lca30622_probs<span class="ot">&lt;-</span></span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind.data.frame</span>(</span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a><span class="at">est=</span><span class="fu">c</span>(result<span class="sc">$</span>prob, <span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span><span class="fu">unique</span>(result<span class="sc">$</span>den))),</span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a><span class="at">lo=</span><span class="fu">c</span>(result_lo<span class="sc">$</span>prob, <span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span><span class="fu">unique</span>(result_lo<span class="sc">$</span>den))),</span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a><span class="at">hi=</span><span class="fu">c</span>(result_hi<span class="sc">$</span>prob, <span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span><span class="fu">unique</span>(result_hi<span class="sc">$</span>den))))</span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">cbind</span>(sus_principal_mod_2, otras_sus1_mod_2, otras_sus2_mod_2, dg_trs_cons_sus_or_2, freq_cons_sus_prin_2) <span class="sc">~</span> event_comp </span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a>gss.lc2 <span class="ot">&lt;-</span> <span class="fu">poLCA</span>(f,mydata_preds323,<span class="at">nclass=</span><span class="dv">6</span>, <span class="at">nrep=</span> testiter, <span class="at">maxiter=</span> <span class="fl">1e5</span>, <span class="at">verbose=</span>F, <span class="at">calc.se=</span>T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="alert alert-warning">
<p>Warning in sqrt(diag(VCE.beta)): Se han producido NaNs</p>
</div>
<div class="alert alert-warning">
<p>Warning in sqrt(diag(VCE.mix)): Se han producido NaNs</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>gss.lc2<span class="sc">$</span>eflag</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">invisible</span>(<span class="st">"no llegan a lo mismo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>rho_glca3_adj<span class="ot">&lt;-</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">"bind_rows"</span>,lca3062<span class="sc">$</span>param<span class="sc">$</span>rho<span class="sc">$</span>ALL) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">data.table</span>(<span class="at">keep.rownames =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  magrittr<span class="sc">::</span><span class="fu">set_colnames</span>(<span class="fu">c</span>(<span class="st">"variables"</span>, <span class="fu">paste0</span>(<span class="st">"Class"</span>,<span class="dv">1</span><span class="sc">:</span><span class="fu">dim</span>(lca3062<span class="sc">$</span>param<span class="sc">$</span>gamma[[<span class="dv">1</span>]])[[<span class="dv">2</span>]]))) <span class="sc">%&gt;%</span> </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(variables, <span class="at">into=</span><span class="fu">c</span>(<span class="st">"var"</span>, <span class="st">"prob"</span>), <span class="at">sep=</span><span class="st">".Y ="</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3_adj <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(rho_glca3_adj, <span class="at">level=</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"class"</span><span class="ot">=</span><span class="st">"variable"</span>)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3_adj<span class="ot">&lt;-</span> lcmodel_glca3_adj <span class="sc">%&gt;%</span> </span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pr=</span><span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"[^0-9.]+"</span>, <span class="st">""</span>, prob))) <span class="sc">%&gt;%</span> </span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(traductor_cats3[,<span class="fu">c</span>(<span class="st">"var"</span>, <span class="st">"lvl2"</span>, <span class="st">"label"</span>)] <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">var=</span> <span class="fu">paste0</span>(var, <span class="st">"_2"</span>)), <span class="at">by=</span> <span class="fu">c</span>(<span class="st">"var"</span><span class="ot">=</span><span class="st">"var"</span>, <span class="st">"pr"</span><span class="ot">=</span><span class="st">"lvl2"</span>))  </span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::mutate(CATEGORIA= dplyr::case_when(var=="AÑO" &amp; prob==" 1"~"Perdidos", T~CATEGORIA))</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3_adj<span class="sc">$</span>text_label<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">""</span>,lcmodel_glca3_adj<span class="sc">$</span>label,<span class="st">"&lt;br&gt;%: "</span>,scales<span class="sc">::</span><span class="fu">percent</span>(lcmodel_glca3_adj<span class="sc">$</span>value))</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3_adj<span class="sc">$</span>text_label2<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">""</span>,lcmodel_glca3_adj<span class="sc">$</span>label,<span class="st">"</span><span class="sc">\n</span><span class="st"> "</span>,scales<span class="sc">::</span><span class="fu">percent</span>(lcmodel_glca3_adj<span class="sc">$</span>value))</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(lcmodel_glca3_adj,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(var, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"sus_principal_mod_2"</span>, <span class="st">"otras_sus1_mod_2"</span>, <span class="st">"otras_sus2_mod_2"</span>,<span class="st">"freq_cons_sus_prin_2"</span>,<span class="st">"dg_trs_cons_sus_or_2"</span>), <span class="at">labels=</span> <span class="fu">c</span>(<span class="st">"Primary</span><span class="sc">\n</span><span class="st">substance"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(1)"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(2)"</span>,<span class="st">"Freq.Subs.Use"</span>,<span class="st">"Dg.Subs.Dep"</span>)), <span class="at">y =</span> value, <span class="at">fill =</span> <span class="fu">factor</span>(pr), <span class="at">label=</span>text_label))</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>)</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">facet_grid</span>(class <span class="sc">~</span> .) </span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">type=</span><span class="st">"seq"</span>, <span class="at">palette=</span><span class="st">"Greys"</span>, <span class="at">na.value =</span> <span class="st">"white"</span>) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Response probabilities"</span>, </span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>                  <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span><span class="st">"Respone/ncategories"</span>)</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">theme</span>( <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>                    <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),                    </span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>                    <span class="at">panel.grid.major.y=</span><span class="fu">element_blank</span>())</span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse=</span><span class="cn">TRUE</span>))</span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>)</span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(zp332, <span class="at">tooltip =</span> <span class="fu">c</span>(<span class="st">"text_label"</span>))<span class="sc">%&gt;%</span> plotly<span class="sc">::</span><span class="fu">layout</span>(<span class="at">xaxis=</span> <span class="fu">list</span>(<span class="at">showticklabels =</span> T),<span class="at">height=</span><span class="dv">600</span>, <span class="at">width=</span><span class="dv">800</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="alert alert-warning">
<p>Warning: Specifying width/height in layout() is now deprecated. Please specify in ggplotly() or plot_ly()</p>
</div>
<div class="cell-output-display">
<div id="htmlwidget-2ca0bbbb7a898ca83dcf" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2ca0bbbb7a898ca83dcf">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,1,0.26,0.33,0.99],"x":[1,2,3,5,4],"y":[1,0,0.74,0.67,0.01],"text":["text_label: Licit<br>%: 100.0%","text_label: Licit<br>%: 0.0%","text_label: none<br>%: 74.0%","text_label: Hazardous consumption<br>%: 67.0%","text_label: none<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,1,0.44,0.86,0.99],"x":[1,2,3,5,4],"y":[1,0,0.56,0.14,0],"text":["text_label: Licit<br>%: 100.0%","text_label: Licit<br>%: 0.0%","text_label: none<br>%: 56.0%","text_label: Hazardous consumption<br>%: 14.0%","text_label: none<br>%: 0.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[1,1,0.72,0.52,1],"x":[1,2,3,5,4],"y":[0,0,0.27,0.48,0.01],"text":["text_label: Licit<br>%: 0.0%","text_label: Licit<br>%: 0.0%","text_label: none<br>%: 27.0%","text_label: Hazardous consumption<br>%: 48.0%","text_label: none<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[1,1,0.71,0.92,1],"x":[1,2,3,5,4],"y":[0,0,0.29,0.08,0],"text":["text_label: Licit<br>%: 0.0%","text_label: Licit<br>%: 0.0%","text_label: none<br>%: 29.0%","text_label: Hazardous consumption<br>%: 8.0%","text_label: none<br>%: 0.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[1,0,0.51,0.92,1],"x":[1,2,3,5,4],"y":[0,1,0.49,0.08,0],"text":["text_label: Licit<br>%: 0.0%","text_label: Licit<br>%: 100.0%","text_label: none<br>%: 49.0%","text_label: Hazardous consumption<br>%: 8.0%","text_label: none<br>%: 0.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[1,0.18,0.28,0.32,0.99],"x":[1,2,3,5,4],"y":[0,0.82,0.72,0.68,0.0099999999999999],"text":["text_label: Licit<br>%: 0.0%","text_label: Licit<br>%: 82.0%","text_label: none<br>%: 72.0%","text_label: Hazardous consumption<br>%: 68.0%","text_label: none<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.26,0,0.91],"x":[1,2,3,5,4],"y":[0,1,0,0.33,0.0800000000000001],"text":["text_label: Illicit<br>%: 0.0%","text_label: Illicit<br>%: 100.0%","text_label: Licit<br>%: 0.0%","text_label: Drug dependence<br>%: 33.0%","text_label: Less than one day a week<br>%: 8.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.44,0,0.98],"x":[1,2,3,5,4],"y":[0,1,0,0.86,0.01],"text":["text_label: Illicit<br>%: 0.0%","text_label: Illicit<br>%: 100.0%","text_label: Licit<br>%: 0.0%","text_label: Drug dependence<br>%: 86.0%","text_label: Less than one day a week<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.05,0,0.89],"x":[1,2,3,5,4],"y":[1,1,0.67,0.52,0.11],"text":["text_label: Illicit<br>%: 100.0%","text_label: Illicit<br>%: 100.0%","text_label: Licit<br>%: 67.0%","text_label: Drug dependence<br>%: 52.0%","text_label: Less than one day a week<br>%: 11.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.24,0,0.98],"x":[1,2,3,5,4],"y":[1,1,0.47,0.92,0.02],"text":["text_label: Illicit<br>%: 100.0%","text_label: Illicit<br>%: 100.0%","text_label: Licit<br>%: 47.0%","text_label: Drug dependence<br>%: 92.0%","text_label: Less than one day a week<br>%: 2.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.51,0,0.98],"x":[1,2,3,5,4],"y":[1,0,0,0.92,0.02],"text":["text_label: Illicit<br>%: 100.0%","text_label: Illicit<br>%: 0.0%","text_label: Licit<br>%: 0.0%","text_label: Drug dependence<br>%: 92.0%","text_label: Less than one day a week<br>%: 2.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9],"base":[0,0,0.28,0,0.86],"x":[1,2,3,5,4],"y":[1,0.18,0,0.32,0.13],"text":["text_label: Illicit<br>%: 100.0%","text_label: Illicit<br>%: 18.0%","text_label: Licit<br>%: 0.0%","text_label: Drug dependence<br>%: 32.0%","text_label: Less than one day a week<br>%: 13.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.19],"x":[3,4],"y":[0.26,0.72],"text":["text_label: Illicit<br>%: 26.0%","text_label: 1 to 3 days a week<br>%: 72.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.72],"x":[3,4],"y":[0.44,0.26],"text":["text_label: Illicit<br>%: 44.0%","text_label: 1 to 3 days a week<br>%: 26.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.35],"x":[3,4],"y":[0.05,0.54],"text":["text_label: Illicit<br>%: 5.0%","text_label: 1 to 3 days a week<br>%: 54.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.8],"x":[3,4],"y":[0.24,0.18],"text":["text_label: Illicit<br>%: 24.0%","text_label: 1 to 3 days a week<br>%: 18.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.72],"x":[3,4],"y":[0.51,0.26],"text":["text_label: Illicit<br>%: 51.0%","text_label: 1 to 3 days a week<br>%: 26.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.29],"x":[3,4],"y":[0.28,0.57],"text":["text_label: Illicit<br>%: 28.0%","text_label: 1 to 3 days a week<br>%: 57.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.19],"text":"text_label: 4+ days a week<br>%: 19.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.72],"text":"text_label: 4+ days a week<br>%: 72.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.35],"text":"text_label: 4+ days a week<br>%: 35.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.8],"text":"text_label: 4+ days a week<br>%: 80.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.72],"text":"text_label: 4+ days a week<br>%: 72.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[0.29],"text":"text_label: 4+ days a week<br>%: 29.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":37.9178082191781,"r":18.9954337899543,"b":25.5707762557078,"l":25.5707762557078},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["Primary<br />substance","Other<br />subs(1)","Other<br />subs(2)","Freq.Subs.Use","Dg.Subs.Dep"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Primary<br />substance","Other<br />subs(1)","Other<br />subs(2)","Freq.Subs.Use","Dg.Subs.Dep"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-30,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"y6","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.839041095890411,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"annotations":[{"text":"Response probabilities","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-7.30593607305936},{"text":"Class1","x":1,"y":0.919520547945206,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class2","x":1,"y":0.75,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class3","x":1,"y":0.583333333333333,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class4","x":1,"y":0.416666666666667,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class5","x":1,"y":0.25,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class6","x":1,"y":0.0804794520547946,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"}],"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.839041095890411,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.839041095890411,"y1":1,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.672374429223744,"y1":0.827625570776256},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.672374429223744,"y1":0.827625570776256,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.505707762557078,"y1":0.660958904109589},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.505707762557078,"y1":0.660958904109589,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.339041095890411,"y1":0.494292237442922},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.339041095890411,"y1":0.494292237442922,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.172374429223744,"y1":0.327625570776256},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.172374429223744,"y1":0.327625570776256,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.160958904109589},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0,"y1":0.160958904109589,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"}],"yaxis2":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.672374429223744,0.827625570776256],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.505707762557078,0.660958904109589],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.339041095890411,0.494292237442922],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.172374429223744,0.327625570776256],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis6":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0,0.160958904109589],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative","height":600,"width":800},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"14bc70dc5401":{"x":{},"y":{},"fill":{},"label":{},"type":"bar"}},"cur_data":"14bc70dc5401","visdat":{"14bc70dc5401":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Selected Model (adjusted)</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"_fig3_adj_LCA_distribuciones_glca_licit_illicit_adj.png"</span>,zp32, <span class="at">dpi=</span> <span class="dv">600</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>lcmodel_glca <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"variables_probabilities_in_category_glca_licit_illicit_adj.xlsx"</span>)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>zp32b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(lcmodel_glca3_adj,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(var, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"sus_principal_mod_2"</span>, <span class="st">"otras_sus1_mod_2"</span>, <span class="st">"otras_sus2_mod_2"</span>,<span class="st">"freq_cons_sus_prin_2"</span>,<span class="st">"dg_trs_cons_sus_or_2"</span>), <span class="at">labels=</span> <span class="fu">c</span>(<span class="st">"Primary</span><span class="sc">\n</span><span class="st">substance"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(1)"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(2)"</span>,<span class="st">"Freq.Subs.Use"</span>,<span class="st">"Dg.Subs.Dep"</span>)), <span class="at">y =</span> value, <span class="at">fill =</span> <span class="fu">factor</span>(pr), <span class="at">label=</span>text_label2))</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>zp32b <span class="ot">&lt;-</span> zp32b <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>zp32b <span class="ot">&lt;-</span> zp32b <span class="sc">+</span> <span class="fu">facet_grid</span>(class <span class="sc">~</span> .) </span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>zp32b <span class="ot">&lt;-</span> zp32b <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">type=</span><span class="st">"seq"</span>, <span class="at">palette=</span><span class="st">"Greys"</span>, <span class="at">na.value =</span> <span class="st">"white"</span>) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>zp32b <span class="ot">&lt;-</span> zp32b <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Response probabilities"</span>, </span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span><span class="st">"Respone/ncategories"</span>)</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>zp32b <span class="ot">&lt;-</span> zp32b <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">paste0</span>(<span class="st">"grey"</span>,<span class="fu">seq</span>(<span class="dv">20</span>,<span class="dv">80</span>, <span class="at">by=</span><span class="dv">60</span><span class="sc">/</span><span class="dv">6</span>))) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>zp32b <span class="ot">&lt;-</span> zp32b <span class="sc">+</span> <span class="fu">theme</span>( <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>                    <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),                    </span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>                    <span class="at">panel.grid.major.y=</span><span class="fu">element_blank</span>())</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>zp32b <span class="ot">&lt;-</span> zp32b <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse=</span><span class="cn">TRUE</span>))</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>zp32b <span class="ot">&lt;-</span> zp32b <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>)</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"zp23.png"</span>, </span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>       zp32b<span class="sc">+</span> ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="co">#aes(#y=half, label=lab),</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">max.iter =</span> <span class="fl">1e6</span>,</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>)<span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>), </span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">height=</span><span class="dv">13</span>)<span class="co">#, fill = "white" --&gt; dentro de label repel</span></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>lcmodel_glca3_adj <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>( class, var, label, value) <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"tab_cond_pr_licit_illicit_adj.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
</section>
<section id="bivariate" class="level4">
<h4 class="anchored" data-anchor-id="bivariate">Bivariate</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>variables_comp3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"porc_pobr"</span>,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"clas_r"</span>,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>               <span class="st">"fis_comorbidity_icd_10"</span>,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">"edad_b_ap_top_num"</span>,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">"comorbidity_icd_10"</span>,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"con_quien_vive_joel"</span>,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>               <span class="st">"sus_ini_mod"</span>,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>               <span class="st">"estado_conyugal_2"</span>,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>               <span class="st">"compromiso_biopsicosocial"</span>,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>               <span class="st">"macrozona"</span>,</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>               <span class="st">"escolaridad_rec"</span>,</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>               <span class="st">"event_comp"</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>               )     </span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>tbone_desc_merge_grant_23_24_licit_illicit<span class="ot">&lt;-</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="fu">CreateTableOne</span>(<span class="at">vars=</span> variables_comp3, </span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">data=</span>  <span class="fu">cbind.data.frame</span>(<span class="fu">subset</span>(Base_fiscalia_v16_grant_23_24, <span class="sc">!</span><span class="fu">is.na</span>(otras_sus1_mod)) <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"dg_trs_cons_sus_or"</span>,<span class="st">"freq_cons_sus_prin"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(.)<span class="sc">~</span> <span class="st">"none"</span>, T<span class="sc">~</span> .))) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>sus_principal_mod<span class="sc">==</span><span class="st">"Other"</span>,  <span class="sc">!</span>otras_sus1_mod<span class="sc">==</span><span class="st">"Other"</span>, <span class="sc">!</span>otras_sus2_mod<span class="sc">==</span><span class="st">"Other"</span>),</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="at">final_07=</span>posterior_glca3_07_final<span class="sc">$</span>final_07, <span class="at">final_05=</span>posterior_glca3_05_final<span class="sc">$</span>final_05) <span class="sc">%&gt;%</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">event_comp=</span> <span class="fu">factor</span>(event_comp, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Completion"</span>, <span class="st">"Non-completion"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_05=</span><span class="fu">factor</span>(final_05, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"C1: Hazardous Licit Usen</span><span class="sc">\n</span><span class="st">+ Secondary Illicit"</span>, <span class="st">"C2: Dependent Frequent Licit</span><span class="sc">\n</span><span class="st">+ Secondary Illicit"</span>, <span class="st">"C3: Mixed Dependence</span><span class="sc">\n</span><span class="st">+ Broad Illicit Use"</span>, <span class="st">"C4: Dependent Frequent Illicit</span><span class="sc">\n</span><span class="st">+ Mixed Secondary/Tertiary"</span>, <span class="st">"C5: Dependent Frequent Illicit</span><span class="sc">\n</span><span class="st">+ Secondary Licit</span><span class="sc">\n</span><span class="st">&amp; Mixed Tertiary"</span>, <span class="st">"C6: Hazardous Frequent Illicit</span><span class="sc">\n</span><span class="st">+ Secondary Licit"</span>))), </span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">factorVars =</span> <span class="fu">setdiff</span>(variables_comp3, <span class="fu">c</span>(<span class="st">"edad_b_ap_top_num"</span>, <span class="st">"porc_pobr"</span>)), </span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">smd=</span>T, </span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">strata=</span><span class="st">"final_05"</span>, </span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">addOverall =</span> T, </span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">includeNA=</span>T, </span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">test=</span>T)<span class="co">#</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#define a table</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>as.data.frame.TableOne <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {<span class="fu">capture.output</span>(<span class="fu">print</span>(x,</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">showAllLevels =</span> <span class="cn">TRUE</span>, ...) <span class="ot">-&gt;</span> x)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(x)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  y<span class="sc">$</span>characteristic <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">na_if</span>(<span class="fu">rownames</span>(x), <span class="st">""</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> y <span class="sc">%&gt;%</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(characteristic, <span class="at">.direction =</span> <span class="st">"down"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(characteristic, <span class="fu">everything</span>())</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(y) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  y}</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame.TableOne</span>(tbone_desc_merge_grant_23_24_licit_illicit, <span class="at">smd=</span>T, <span class="at">nonnormal=</span> T)<span class="sc">%&gt;%</span> </span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">char2=</span>characteristic) <span class="sc">%&gt;%</span> </span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">fill</span>(char2) <span class="sc">%&gt;%</span> </span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(char2,<span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">level=</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(level),<span class="st">"[Missing]"</span>,level)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">char2=</span>dplyr<span class="sc">::</span><span class="fu">case_when</span>(characteristic<span class="sc">==</span><span class="st">"NA"</span><span class="sc">~</span><span class="cn">NA_character_</span>,T<span class="sc">~</span><span class="fu">as.character</span>(characteristic))) <span class="sc">%&gt;%</span> </span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_cells</span>(<span class="dv">1</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">names</span>(.)), <span class="st">"bold"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">format=</span><span class="st">"html"</span>,<span class="at">caption=</span> <span class="st">"Summary descriptives, Latent classes"</span>, <span class="at">escape=</span>T) <span class="sc">%&gt;%</span> </span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"500px"</span>, <span class="at">height =</span> <span class="st">"400px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>fill: changed 29 values (69%) of ‘characteristic’ (29 fewer NA)</p>
</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:500px; ">
<table class="lightable-classic table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Summary descriptives, Latent classes</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">characteristic</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">level</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Overall</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C1: Hazardous Licit Usen + Secondary Illicit</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C2: Dependent Frequent Licit + Secondary Illicit</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C3: Mixed Dependence + Broad Illicit Use</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C4: Dependent Frequent Illicit + Mixed Secondary/Tertiary</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C5: Dependent Frequent Illicit + Secondary Licit &amp; Mixed Tertiary</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C6: Hazardous Frequent Illicit + Secondary Licit</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">p</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">test</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">SMD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">**n**</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">**39680**</td>
<td style="text-align: left;">**2676**</td>
<td style="text-align: left;">**6314**</td>
<td style="text-align: left;">**848**</td>
<td style="text-align: left;">**12009**</td>
<td style="text-align: left;">**12779**</td>
<td style="text-align: left;">**4452**</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">porc_pobr (median [IQR])</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.09 [0.06, 0.14]</td>
<td style="text-align: left;">0.09 [0.06, 0.14]</td>
<td style="text-align: left;">0.09 [0.06, 0.14]</td>
<td style="text-align: left;">0.09 [0.07, 0.13]</td>
<td style="text-align: left;">0.10 [0.07, 0.14]</td>
<td style="text-align: left;">0.09 [0.06, 0.13]</td>
<td style="text-align: left;">0.09 [0.06, 0.13]</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">nonnorm</td>
<td style="text-align: left;">0.039</td>
</tr>
<tr class="odd">
<td style="text-align: left;">clas_r (%)</td>
<td style="text-align: left;">Mixta</td>
<td style="text-align: left;">3862 ( 9.7)</td>
<td style="text-align: left;">414 (15.5)</td>
<td style="text-align: left;">608 ( 9.6)</td>
<td style="text-align: left;">93 (11.0)</td>
<td style="text-align: left;">1029 ( 8.6)</td>
<td style="text-align: left;">1147 ( 9.0)</td>
<td style="text-align: left;">515 (11.6)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.151</td>
</tr>
<tr class="even">
<td style="text-align: left;">clas_r (%)</td>
<td style="text-align: left;">Rural</td>
<td style="text-align: left;">2778 ( 7.0)</td>
<td style="text-align: left;">341 (12.7)</td>
<td style="text-align: left;">546 ( 8.6)</td>
<td style="text-align: left;">53 ( 6.2)</td>
<td style="text-align: left;">697 ( 5.8)</td>
<td style="text-align: left;">778 ( 6.1)</td>
<td style="text-align: left;">325 ( 7.3)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">clas_r (%)</td>
<td style="text-align: left;">Urbana</td>
<td style="text-align: left;">33040 (83.3)</td>
<td style="text-align: left;">1921 (71.8)</td>
<td style="text-align: left;">5160 (81.7)</td>
<td style="text-align: left;">702 (82.8)</td>
<td style="text-align: left;">10283 (85.6)</td>
<td style="text-align: left;">10854 (84.9)</td>
<td style="text-align: left;">3612 (81.1)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">fis_comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Without physical comorbidity</td>
<td style="text-align: left;">14982 (37.8)</td>
<td style="text-align: left;">1002 (37.4)</td>
<td style="text-align: left;">2194 (34.7)</td>
<td style="text-align: left;">317 (37.4)</td>
<td style="text-align: left;">4548 (37.9)</td>
<td style="text-align: left;">4955 (38.8)</td>
<td style="text-align: left;">1760 (39.5)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.103</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fis_comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Diagnosis unknown (under study)</td>
<td style="text-align: left;">22550 (56.8)</td>
<td style="text-align: left;">1545 (57.7)</td>
<td style="text-align: left;">3591 (56.9)</td>
<td style="text-align: left;">503 (59.3)</td>
<td style="text-align: left;">6883 (57.3)</td>
<td style="text-align: left;">7111 (55.6)</td>
<td style="text-align: left;">2542 (57.1)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">fis_comorbidity_icd_10 (%)</td>
<td style="text-align: left;">One or more</td>
<td style="text-align: left;">2148 ( 5.4)</td>
<td style="text-align: left;">129 ( 4.8)</td>
<td style="text-align: left;">529 ( 8.4)</td>
<td style="text-align: left;">28 ( 3.3)</td>
<td style="text-align: left;">578 ( 4.8)</td>
<td style="text-align: left;">713 ( 5.6)</td>
<td style="text-align: left;">150 ( 3.4)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">edad_b_ap_top_num (median [IQR])</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">32.64 [26.75, 39.25]</td>
<td style="text-align: left;">35.64 [27.07, 43.09]</td>
<td style="text-align: left;">37.72 [31.35, 46.07]</td>
<td style="text-align: left;">27.80 [24.68, 33.44]</td>
<td style="text-align: left;">30.36 [25.76, 35.41]</td>
<td style="text-align: left;">33.56 [27.78, 40.74]</td>
<td style="text-align: left;">32.17 [26.30, 39.58]</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">nonnorm</td>
<td style="text-align: left;">0.471</td>
</tr>
<tr class="even">
<td style="text-align: left;">comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Diagnosis unknown (under study)</td>
<td style="text-align: left;">8465 (21.3)</td>
<td style="text-align: left;">460 (17.2)</td>
<td style="text-align: left;">1125 (17.8)</td>
<td style="text-align: left;">162 (19.1)</td>
<td style="text-align: left;">2987 (24.9)</td>
<td style="text-align: left;">2772 (21.7)</td>
<td style="text-align: left;">836 (18.8)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.164</td>
</tr>
<tr class="odd">
<td style="text-align: left;">comorbidity_icd_10 (%)</td>
<td style="text-align: left;">One</td>
<td style="text-align: left;">16332 (41.2)</td>
<td style="text-align: left;">1088 (40.7)</td>
<td style="text-align: left;">2755 (43.6)</td>
<td style="text-align: left;">295 (34.8)</td>
<td style="text-align: left;">4865 (40.5)</td>
<td style="text-align: left;">5368 (42.0)</td>
<td style="text-align: left;">1714 (38.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Two or more</td>
<td style="text-align: left;">808 ( 2.0)</td>
<td style="text-align: left;">33 ( 1.2)</td>
<td style="text-align: left;">169 ( 2.7)</td>
<td style="text-align: left;">17 ( 2.0)</td>
<td style="text-align: left;">254 ( 2.1)</td>
<td style="text-align: left;">292 ( 2.3)</td>
<td style="text-align: left;">39 ( 0.9)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Without psychiatric comorbidity</td>
<td style="text-align: left;">14075 (35.5)</td>
<td style="text-align: left;">1095 (40.9)</td>
<td style="text-align: left;">2265 (35.9)</td>
<td style="text-align: left;">374 (44.1)</td>
<td style="text-align: left;">3903 (32.5)</td>
<td style="text-align: left;">4347 (34.0)</td>
<td style="text-align: left;">1863 (41.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">con_quien_vive_joel (%)</td>
<td style="text-align: left;">Alone</td>
<td style="text-align: left;">3337 ( 8.4)</td>
<td style="text-align: left;">274 (10.2)</td>
<td style="text-align: left;">778 (12.3)</td>
<td style="text-align: left;">38 ( 4.5)</td>
<td style="text-align: left;">856 ( 7.1)</td>
<td style="text-align: left;">1093 ( 8.6)</td>
<td style="text-align: left;">260 ( 5.8)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.225</td>
</tr>
<tr class="odd">
<td style="text-align: left;">con_quien_vive_joel (%)</td>
<td style="text-align: left;">Family of origin</td>
<td style="text-align: left;">18217 (45.9)</td>
<td style="text-align: left;">999 (37.3)</td>
<td style="text-align: left;">2546 (40.3)</td>
<td style="text-align: left;">423 (49.9)</td>
<td style="text-align: left;">6341 (52.8)</td>
<td style="text-align: left;">5724 (44.8)</td>
<td style="text-align: left;">1880 (42.2)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">con_quien_vive_joel (%)</td>
<td style="text-align: left;">Others</td>
<td style="text-align: left;">3520 ( 8.9)</td>
<td style="text-align: left;">205 ( 7.7)</td>
<td style="text-align: left;">666 (10.5)</td>
<td style="text-align: left;">71 ( 8.4)</td>
<td style="text-align: left;">1082 ( 9.0)</td>
<td style="text-align: left;">1158 ( 9.1)</td>
<td style="text-align: left;">301 ( 6.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">con_quien_vive_joel (%)</td>
<td style="text-align: left;">With couple/children</td>
<td style="text-align: left;">14606 (36.8)</td>
<td style="text-align: left;">1198 (44.8)</td>
<td style="text-align: left;">2324 (36.8)</td>
<td style="text-align: left;">316 (37.3)</td>
<td style="text-align: left;">3730 (31.1)</td>
<td style="text-align: left;">4804 (37.6)</td>
<td style="text-align: left;">2011 (45.2)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Alcohol</td>
<td style="text-align: left;">21988 (55.4)</td>
<td style="text-align: left;">2249 (84.0)</td>
<td style="text-align: left;">5138 (81.4)</td>
<td style="text-align: left;">382 (45.0)</td>
<td style="text-align: left;">3926 (32.7)</td>
<td style="text-align: left;">7687 (60.2)</td>
<td style="text-align: left;">2492 (56.0)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.581</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Cocaína</td>
<td style="text-align: left;">1512 ( 3.8)</td>
<td style="text-align: left;">41 ( 1.5)</td>
<td style="text-align: left;">87 ( 1.4)</td>
<td style="text-align: left;">28 ( 3.3)</td>
<td style="text-align: left;">556 ( 4.6)</td>
<td style="text-align: left;">499 ( 3.9)</td>
<td style="text-align: left;">250 ( 5.6)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Marihuana</td>
<td style="text-align: left;">13855 (34.9)</td>
<td style="text-align: left;">334 (12.5)</td>
<td style="text-align: left;">909 (14.4)</td>
<td style="text-align: left;">393 (46.3)</td>
<td style="text-align: left;">6697 (55.8)</td>
<td style="text-align: left;">3708 (29.0)</td>
<td style="text-align: left;">1422 (31.9)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Otros</td>
<td style="text-align: left;">647 ( 1.6)</td>
<td style="text-align: left;">18 ( 0.7)</td>
<td style="text-align: left;">78 ( 1.2)</td>
<td style="text-align: left;">11 ( 1.3)</td>
<td style="text-align: left;">219 ( 1.8)</td>
<td style="text-align: left;">247 ( 1.9)</td>
<td style="text-align: left;">67 ( 1.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Pasta Base</td>
<td style="text-align: left;">1549 ( 3.9)</td>
<td style="text-align: left;">22 ( 0.8)</td>
<td style="text-align: left;">72 ( 1.1)</td>
<td style="text-align: left;">31 ( 3.7)</td>
<td style="text-align: left;">580 ( 4.8)</td>
<td style="text-align: left;">615 ( 4.8)</td>
<td style="text-align: left;">193 ( 4.3)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">129 ( 0.3)</td>
<td style="text-align: left;">12 ( 0.4)</td>
<td style="text-align: left;">30 ( 0.5)</td>
<td style="text-align: left;">3 ( 0.4)</td>
<td style="text-align: left;">31 ( 0.3)</td>
<td style="text-align: left;">23 ( 0.2)</td>
<td style="text-align: left;">28 ( 0.6)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">Married/Shared living arrangements</td>
<td style="text-align: left;">12022 (30.3)</td>
<td style="text-align: left;">995 (37.2)</td>
<td style="text-align: left;">2024 (32.1)</td>
<td style="text-align: left;">251 (29.6)</td>
<td style="text-align: left;">3020 (25.1)</td>
<td style="text-align: left;">3972 (31.1)</td>
<td style="text-align: left;">1603 (36.0)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.207</td>
</tr>
<tr class="odd">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">Separated/Divorced</td>
<td style="text-align: left;">3401 ( 8.6)</td>
<td style="text-align: left;">261 ( 9.8)</td>
<td style="text-align: left;">853 (13.5)</td>
<td style="text-align: left;">45 ( 5.3)</td>
<td style="text-align: left;">731 ( 6.1)</td>
<td style="text-align: left;">1094 ( 8.6)</td>
<td style="text-align: left;">372 ( 8.4)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">Single</td>
<td style="text-align: left;">23960 (60.4)</td>
<td style="text-align: left;">1402 (52.4)</td>
<td style="text-align: left;">3359 (53.2)</td>
<td style="text-align: left;">549 (64.7)</td>
<td style="text-align: left;">8196 (68.2)</td>
<td style="text-align: left;">7612 (59.6)</td>
<td style="text-align: left;">2445 (54.9)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">Widower</td>
<td style="text-align: left;">249 ( 0.6)</td>
<td style="text-align: left;">10 ( 0.4)</td>
<td style="text-align: left;">69 ( 1.1)</td>
<td style="text-align: left;">2 ( 0.2)</td>
<td style="text-align: left;">49 ( 0.4)</td>
<td style="text-align: left;">90 ( 0.7)</td>
<td style="text-align: left;">27 ( 0.6)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">48 ( 0.1)</td>
<td style="text-align: left;">8 ( 0.3)</td>
<td style="text-align: left;">9 ( 0.1)</td>
<td style="text-align: left;">1 ( 0.1)</td>
<td style="text-align: left;">13 ( 0.1)</td>
<td style="text-align: left;">11 ( 0.1)</td>
<td style="text-align: left;">5 ( 0.1)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">compromiso_biopsicosocial (%)</td>
<td style="text-align: left;">1-Mild</td>
<td style="text-align: left;">2784 ( 7.0)</td>
<td style="text-align: left;">511 (19.1)</td>
<td style="text-align: left;">335 ( 5.3)</td>
<td style="text-align: left;">141 (16.6)</td>
<td style="text-align: left;">349 ( 2.9)</td>
<td style="text-align: left;">585 ( 4.6)</td>
<td style="text-align: left;">800 (18.0)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.534</td>
</tr>
<tr class="even">
<td style="text-align: left;">compromiso_biopsicosocial (%)</td>
<td style="text-align: left;">2-Moderate</td>
<td style="text-align: left;">22773 (57.4)</td>
<td style="text-align: left;">1893 (70.7)</td>
<td style="text-align: left;">3697 (58.6)</td>
<td style="text-align: left;">589 (69.5)</td>
<td style="text-align: left;">6141 (51.1)</td>
<td style="text-align: left;">6953 (54.4)</td>
<td style="text-align: left;">3101 (69.7)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">compromiso_biopsicosocial (%)</td>
<td style="text-align: left;">3-Severe</td>
<td style="text-align: left;">13382 (33.7)</td>
<td style="text-align: left;">220 ( 8.2)</td>
<td style="text-align: left;">2170 (34.4)</td>
<td style="text-align: left;">96 (11.3)</td>
<td style="text-align: left;">5320 (44.3)</td>
<td style="text-align: left;">5017 (39.3)</td>
<td style="text-align: left;">438 ( 9.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">compromiso_biopsicosocial (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">741 ( 1.9)</td>
<td style="text-align: left;">52 ( 1.9)</td>
<td style="text-align: left;">112 ( 1.8)</td>
<td style="text-align: left;">22 ( 2.6)</td>
<td style="text-align: left;">199 ( 1.7)</td>
<td style="text-align: left;">224 ( 1.8)</td>
<td style="text-align: left;">113 ( 2.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">macrozona (%)</td>
<td style="text-align: left;">Center</td>
<td style="text-align: left;">30550 (77.0)</td>
<td style="text-align: left;">1914 (71.5)</td>
<td style="text-align: left;">4630 (73.3)</td>
<td style="text-align: left;">660 (77.8)</td>
<td style="text-align: left;">9486 (79.0)</td>
<td style="text-align: left;">9867 (77.2)</td>
<td style="text-align: left;">3519 (79.0)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.199</td>
</tr>
<tr class="even">
<td style="text-align: left;">macrozona (%)</td>
<td style="text-align: left;">North</td>
<td style="text-align: left;">6295 (15.9)</td>
<td style="text-align: left;">384 (14.3)</td>
<td style="text-align: left;">823 (13.0)</td>
<td style="text-align: left;">156 (18.4)</td>
<td style="text-align: left;">1917 (16.0)</td>
<td style="text-align: left;">2194 (17.2)</td>
<td style="text-align: left;">716 (16.1)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">macrozona (%)</td>
<td style="text-align: left;">South</td>
<td style="text-align: left;">2825 ( 7.1)</td>
<td style="text-align: left;">376 (14.1)</td>
<td style="text-align: left;">860 (13.6)</td>
<td style="text-align: left;">32 ( 3.8)</td>
<td style="text-align: left;">603 ( 5.0)</td>
<td style="text-align: left;">716 ( 5.6)</td>
<td style="text-align: left;">215 ( 4.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">macrozona (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">10 ( 0.0)</td>
<td style="text-align: left;">2 ( 0.1)</td>
<td style="text-align: left;">1 ( 0.0)</td>
<td style="text-align: left;">0 ( 0.0)</td>
<td style="text-align: left;">3 ( 0.0)</td>
<td style="text-align: left;">2 ( 0.0)</td>
<td style="text-align: left;">2 ( 0.0)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">escolaridad_rec (%)</td>
<td style="text-align: left;">1-More than high school</td>
<td style="text-align: left;">7101 (17.9)</td>
<td style="text-align: left;">572 (21.4)</td>
<td style="text-align: left;">1343 (21.3)</td>
<td style="text-align: left;">153 (18.0)</td>
<td style="text-align: left;">1870 (15.6)</td>
<td style="text-align: left;">2224 (17.4)</td>
<td style="text-align: left;">855 (19.2)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.110</td>
</tr>
<tr class="even">
<td style="text-align: left;">escolaridad_rec (%)</td>
<td style="text-align: left;">2-Completed high school or less</td>
<td style="text-align: left;">22804 (57.5)</td>
<td style="text-align: left;">1457 (54.4)</td>
<td style="text-align: left;">3395 (53.8)</td>
<td style="text-align: left;">522 (61.6)</td>
<td style="text-align: left;">7114 (59.2)</td>
<td style="text-align: left;">7302 (57.1)</td>
<td style="text-align: left;">2636 (59.2)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">escolaridad_rec (%)</td>
<td style="text-align: left;">3-Completed primary school or less</td>
<td style="text-align: left;">9656 (24.3)</td>
<td style="text-align: left;">633 (23.7)</td>
<td style="text-align: left;">1548 (24.5)</td>
<td style="text-align: left;">171 (20.2)</td>
<td style="text-align: left;">3006 (25.0)</td>
<td style="text-align: left;">3215 (25.2)</td>
<td style="text-align: left;">946 (21.2)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">escolaridad_rec (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">119 ( 0.3)</td>
<td style="text-align: left;">14 ( 0.5)</td>
<td style="text-align: left;">28 ( 0.4)</td>
<td style="text-align: left;">2 ( 0.2)</td>
<td style="text-align: left;">19 ( 0.2)</td>
<td style="text-align: left;">38 ( 0.3)</td>
<td style="text-align: left;">15 ( 0.3)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">event_comp (%)</td>
<td style="text-align: left;">Completion</td>
<td style="text-align: left;">7461 (18.8)</td>
<td style="text-align: left;">700 (26.2)</td>
<td style="text-align: left;">1410 (22.3)</td>
<td style="text-align: left;">144 (17.0)</td>
<td style="text-align: left;">1934 (16.1)</td>
<td style="text-align: left;">2325 (18.2)</td>
<td style="text-align: left;">857 (19.2)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.111</td>
</tr>
<tr class="even">
<td style="text-align: left;">event_comp (%)</td>
<td style="text-align: left;">Non-completion</td>
<td style="text-align: left;">32219 (81.2)</td>
<td style="text-align: left;">1976 (73.8)</td>
<td style="text-align: left;">4904 (77.7)</td>
<td style="text-align: left;">704 (83.0)</td>
<td style="text-align: left;">10075 (83.9)</td>
<td style="text-align: left;">10454 (81.8)</td>
<td style="text-align: left;">3595 (80.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame.TableOne</span>(tbone_desc_merge_grant_23_24_licit_illicit, <span class="at">smd=</span>T, <span class="at">nonnormal=</span> T)<span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">char2=</span>characteristic) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">fill</span>(char2) <span class="sc">%&gt;%</span> </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(char2,<span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">level=</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(level),<span class="st">"[Missing]"</span>,level)) <span class="sc">%&gt;%</span> </span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">char2=</span>dplyr<span class="sc">::</span><span class="fu">case_when</span>(characteristic<span class="sc">==</span><span class="st">"NA"</span><span class="sc">~</span><span class="cn">NA_character_</span>,T<span class="sc">~</span><span class="fu">as.character</span>(characteristic))) <span class="sc">%&gt;%</span> </span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_cells</span>(<span class="dv">1</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">names</span>(.)), <span class="st">"bold"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"tab_car_licit_illicit.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>fill: changed 29 values (69%) of ‘characteristic’ (29 fewer NA)</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">#RUral: +c1, - c4 y c3; com fis: c2 + 1o&gt;; edad: c3 &lt;; c2 &gt;; com psi: +c3, c6 y c1, -c4 y c5; con quien vive: -c3 y c6 , +c2 alone, c4+ con fam origen, c1+ con pareja e hijos; sus ini mod: c1 y c2, +alcohol, coc + c6, mar -c1 y c2, +c4, pbc- c1 y c2; casado -c4, +c1 y c6, separado +c2, soltero -c1 y c2 y c6, +c4 y c3; biopsicosocial: severo -c1 y c6 y c3, leve +c1 y c6 y c3; macrozona: norte -c2 sur +c1 y c2; escolaridad: + media +c1 y c2, -primaria -c3 y media completa +c3; completa + c1 y c2, -c4, no completa -c1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<!---
#https://chat.openai.com/share/5849496c-2bd7-447f-9820-7ebfdeb0de3c 
--->
<p><strong>C1: Hazardous Licit Use + Secondary Illicit</strong>: Highest percentage of individuals from mixed (Mixta) areas at 15.5% and rural areas at 12.7%; Physical Comorbidity: 37.4% without physical comorbidity; Age: Median age of 35.64; Psychiatric Comorbidity: 40.9% without psychiatric comorbidity; Living Arrangement: 10.2% living alone; Substance Initiation: 84.0% initiated with alcohol; Marital Status: 37.2% in married/shared living arrangements; Biopsychosocial Commitment: 19.1% with mild commitment and 70.7% with moderate commitment; Region: 71.5% from the center region; Education Level: 21.4% with more than high school education; Event Completion: 26.2% completion. Simply put, C1 seems to represent a group with hazardous licit use, living in mixed or rural areas, and having a higher educational background.</p>
<p><strong>C2: Dependent Frequent Licit + Secondary Illicit</strong>: Residential Area: 9.6% from mixed areas. Living Arrangement: 12.3% living alone. Substance Initiation: 81.4% initiated with alcohol. Age: Median age of 37.72. Biopsychosocial Commitment: 58.6% with moderate commitment. In summary, C1 seems to represent a group with hazardous licit use, living in mixed or rural areas, and having a higher educational background. Summarizing, C2 is characterized by dependent frequent licit use, living alone, and predominantly initiating with alcohol.</p>
<p><strong>C3: Mixed Dependence + Broad Illicit Use</strong>: Physical Comorbidity: 59.3% with diagnosis unknown (under study) and 8.4% with one or more physical comorbidities. Psychiatric Comorbidity: 43.6% with one psychiatric comorbidity. Age: Median age of 27.80. Substance Initiation: 46.3% initiated with marijuana. Education Level: 61.6% completed high school or less. C3 represents an older group with mixed dependence and broad illicit use, having multiple comorbidities.</p>
<p><strong>C4: Dependent Frequent Illicit + Mixed Secondary/Tertiary</strong>: Residential Area: 85.6% urban. Psychiatric Comorbidity: 24.9% with diagnosis unknown (under study). Living Arrangement: 52.8% live with their family of origin. Substance Initiation: 55.8% initiated with marijuana. Marital Status: 68.2% singles. Biopsychosocial Commitment: 44.3% with severe commitment. Region: 79.0% from the center region. Poverty index of the municipallity/commune of residence: Median of 0.10. C4 is characterized by dependent frequent illicit use, urban living, initiation with marijuana, and severe biopsychosocial commitment.</p>
<p><strong>C5: Dependent Frequent Illicit + Secondary Licit &amp; Mixed Tertiary</strong>: Residential Area: 84.9% urban. Substance Initiation: 60.2% initiated with alcohol and 29.0% with marijuana. Biopsychosocial Commitment: 54.4% with moderate commitment. Region: 77.2% from the center region. C5 represents a group with dependent frequent illicit use, urban living, and moderate biopsychosocial commitment.</p>
<p><strong>C6: Hazardous Frequent Illicit + Secondary Licit</strong>: Physical Comorbidity: 39.5% without physical comorbidity. Psychiatric Comorbidity: 41.8% without psychiatric comorbidity. Living Arrangement: 45.2% living with a couple/children. Marital Status: 36.0% in married/shared living arrangements. Biopsychosocial Commitment: 69.7% with moderate commitment. Region: 79.0% from the center region. C6 is characterized by hazardous frequent illicit use, living with a partner or children, and having no comorbidities.</p>
<p>Rural location was more prevalent in C1 than in the overall sample, while less prevalent in C4 and C3. C2 had more individuals with one or more physical comorbidities than in the overall sample. C3 had a younger median age, while C2 had an older median age than in the overall sample. C3, C6, and C1 have more individuals with psychiatric comorbidity than the overall population.</p>
<p><br></p>
</section>
</section>
<section id="glca-2" class="level1">
<h1>GLCA (2)</h1>
<ul>
<li><p>We omitted individuals who used only one substance.</p></li>
<li><p>We categorized the second substance as licit (e.g., Alcohol), illicit (all other substances), or none (not reported).</p></li>
<li><p>We discarded substances labeled as “Other” because they could not be distinguished between licit and illicit substances.</p></li>
<li><p>Frequency of use were classified into no weekly use (Less than 1 day a week), non-daily use (1 to 3 days a week), and daily/near daily use or the equivalent of 4 or more times a week (+4 days a week and Daily) (https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7984420/ &amp; https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8855705/).</p></li>
</ul>
<div class="controlly">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>mydata_preds21a<span class="ot">&lt;-</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#2023-09-25</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(Base_fiscalia_v16_grant_23_24, <span class="sc">!</span><span class="fu">is.na</span>(otras_sus1_mod)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(sus_principal_mod,</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>      dg_trs_cons_sus_or,</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>      freq_cons_sus_prin,</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>      otras_sus1_mod,</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>      otras_sus2_mod) <span class="sc">%&gt;%</span>  </span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">data.table</span>()</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>mydata_preds22a_pre <span class="ot">&lt;-</span> mydata_preds21a<span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"dg_trs_cons_sus_or"</span>,<span class="st">"freq_cons_sus_prin"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(<span class="fu">as.character</span>(.))<span class="sc">~</span> <span class="st">"none"</span>, <span class="cn">TRUE</span><span class="sc">~</span> <span class="fu">as.character</span>(.)))) <span class="sc">%&gt;%</span> </span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#2023-09-03: Eliminated Other substances</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>sus_principal_mod<span class="sc">==</span><span class="st">"Other"</span>,  <span class="sc">!</span>otras_sus1_mod<span class="sc">==</span><span class="st">"Other"</span>, <span class="sc">!</span>otras_sus2_mod<span class="sc">==</span><span class="st">"Other"</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#2023-09-03: licit / illicit</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(.<span class="sc">==</span><span class="st">"Alcohol"</span><span class="sc">~</span> <span class="dv">2</span>, . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Cocaine hydrochloride"</span>, <span class="st">"Cocaine paste"</span>, <span class="st">"Marijuana"</span>)<span class="sc">~</span> <span class="dv">3</span>, .<span class="sc">==</span><span class="st">"none"</span><span class="sc">~</span> <span class="dv">1</span>,  <span class="cn">TRUE</span><span class="sc">~</span> <span class="fu">as.numeric</span>(.)))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="alert alert-warning">
<p>Warning in eval_tidy(pair$rhs, env = default_env): NAs introducidos por coerción</p>
</div>
<div class="alert alert-warning">
<p>Warning in eval_tidy(pair$rhs, env = default_env): NAs introducidos por coerción</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>mydata_preds22a <span class="ot">&lt;-</span>mydata_preds22a_pre <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">#2023-09-04: frequency and diagnosis</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">freq_cons_sus_prin=</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(freq_cons_sus_prin<span class="sc">==</span> <span class="st">"none"</span><span class="sc">~</span><span class="dv">1</span>, <span class="fu">grepl</span>(<span class="st">"Less than 1 day a week"</span>,freq_cons_sus_prin)<span class="sc">~</span><span class="dv">2</span>, <span class="fu">grepl</span>(<span class="st">"1 day a week or more|2 to 3 days a week"</span>,freq_cons_sus_prin)<span class="sc">~</span><span class="dv">3</span>, <span class="fu">grepl</span>(<span class="st">"Daily|4 to 6 days a week"</span>,freq_cons_sus_prin)<span class="sc">~</span> <span class="dv">4</span>,  <span class="cn">TRUE</span><span class="sc">~</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">dg_trs_cons_sus_or=</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(dg_trs_cons_sus_or<span class="sc">==</span> <span class="st">"none"</span><span class="sc">~</span><span class="dv">1</span>, <span class="fu">grepl</span>(<span class="st">"Hazardous consumption"</span>,dg_trs_cons_sus_or)<span class="sc">~</span><span class="dv">2</span>, <span class="fu">grepl</span>(<span class="st">"Drug dependence"</span>,dg_trs_cons_sus_or)<span class="sc">~</span><span class="dv">3</span>, <span class="cn">TRUE</span><span class="sc">~</span> <span class="dv">0</span>))</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Count of substances</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>(mydata_preds22a, sus_principal_mod, otras_sus1_mod, otras_sus2_mod) <span class="sc">%&gt;%</span>  </span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">perc=</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n),<span class="dv">2</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(.<span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="st">"None (1)"</span>, .<span class="sc">==</span><span class="dv">2</span><span class="sc">~</span> <span class="st">"Licit (2)"</span>, .<span class="sc">==</span><span class="dv">3</span><span class="sc">~</span> <span class="st">"Illicit (3)"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">"markdown"</span>, <span class="at">caption=</span><span class="st">"Combinations of substances"</span>, <span class="at">col.names=</span> <span class="fu">c</span>(<span class="st">"Primary substance"</span>, <span class="st">"Other substances (1)"</span>, <span class="st">"Other substances (2)"</span>,<span class="st">"n"</span>, <span class="st">"%"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>count: now 17 rows and 4 columns, 3 group variables remaining (sus_principal_mod, otras_sus1_mod, otras_sus2_mod)</p>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Combinations of substances</caption>
<colgroup>
<col style="width: 30%">
<col style="width: 28%">
<col style="width: 28%">
<col style="width: 6%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Primary substance</th>
<th style="text-align: left;">Other substances (1)</th>
<th style="text-align: left;">Other substances (2)</th>
<th style="text-align: right;">n</th>
<th style="text-align: left;">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Alcohol</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">5598</td>
<td style="text-align: left;">14%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: right;">4473</td>
<td style="text-align: left;">11%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">4327</td>
<td style="text-align: left;">11%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">3983</td>
<td style="text-align: left;">10%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">3976</td>
<td style="text-align: left;">10%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Alcohol</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">3392</td>
<td style="text-align: left;">9%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">2904</td>
<td style="text-align: left;">7%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">2472</td>
<td style="text-align: left;">6%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">2294</td>
<td style="text-align: left;">6%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: right;">1879</td>
<td style="text-align: left;">5%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">1162</td>
<td style="text-align: left;">3%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">1016</td>
<td style="text-align: left;">3%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">615</td>
<td style="text-align: left;">2%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">536</td>
<td style="text-align: left;">1%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Licit (2)</td>
<td style="text-align: right;">466</td>
<td style="text-align: left;">1%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">None (1)</td>
<td style="text-align: right;">411</td>
<td style="text-align: left;">1%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: left;">Illicit (3)</td>
<td style="text-align: right;">176</td>
<td style="text-align: left;">0%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>first_five_a2<span class="ot">&lt;-</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>(mydata_preds22a,sus_principal_mod, otras_sus1_mod, otras_sus2_mod) <span class="sc">%&gt;%</span>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">0</span>, <span class="sc">!</span><span class="st">"none"</span><span class="sc">==</span>otras_sus1_mod) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">sum</span>(n))<span class="sc">/</span><span class="fu">nrow</span>(mydata_preds2a) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>(.)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>count: now 17 rows and 4 columns, 3 group variables remaining (sus_principal_mod, otras_sus1_mod, otras_sus2_mod)</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"The first four (there is one that is exchangeable) make the "</span>, </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">as.character</span>(scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">unlist</span>(first_five_a2))),</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">" of the sample"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The first four (there is one that is exchangeable) make the 56% of the sample"</code></pre>
</div>
</div>
<ul>
<li>We made a latent class analysis with only substances.</li>
</ul>
<div class="controlly">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>(mydata_preds22a,sus_principal_mod, otras_sus1_mod, otras_sus2_mod) <span class="sc">%&gt;%</span>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">perc=</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n),<span class="dv">2</span>))) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">"markdown"</span>, <span class="at">caption=</span><span class="st">"Combinations of substances"</span>, <span class="at">col.names=</span> <span class="fu">c</span>(<span class="st">"Primary substance"</span>, <span class="st">"Other substances (1)"</span>, <span class="st">"Other substances (2)"</span>, <span class="st">"n"</span>, <span class="st">"%"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>count: now 17 rows and 4 columns, 3 group variables remaining (sus_principal_mod, otras_sus1_mod, otras_sus2_mod)</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>mydata_preds23a <span class="ot">&lt;-</span> mydata_preds22a<span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    data.table<span class="sc">::</span><span class="fu">data.table</span>()</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#2023-08-20. We cannot discard none categories for drug use patterns, but we can do it for drug dependence diagnosis and drug use frequency</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::filter(!dg_trs_cons_sus_or==1) %&gt;%  </span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::filter(!freq_cons_sus_prin==1) %&gt;%  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Combinations of substances</caption>
<colgroup>
<col style="width: 30%">
<col style="width: 28%">
<col style="width: 28%">
<col style="width: 6%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Primary substance</th>
<th style="text-align: right;">Other substances (1)</th>
<th style="text-align: right;">Other substances (2)</th>
<th style="text-align: right;">n</th>
<th style="text-align: left;">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Alcohol</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5598</td>
<td style="text-align: left;">14%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4473</td>
<td style="text-align: left;">11%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4327</td>
<td style="text-align: left;">11%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3983</td>
<td style="text-align: left;">10%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3976</td>
<td style="text-align: left;">10%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Alcohol</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3392</td>
<td style="text-align: left;">9%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2904</td>
<td style="text-align: left;">7%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2472</td>
<td style="text-align: left;">6%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine paste</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2294</td>
<td style="text-align: left;">6%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1879</td>
<td style="text-align: left;">5%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1162</td>
<td style="text-align: left;">3%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1016</td>
<td style="text-align: left;">3%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">615</td>
<td style="text-align: left;">2%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cocaine hydrochloride</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">536</td>
<td style="text-align: left;">1%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">466</td>
<td style="text-align: left;">1%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">411</td>
<td style="text-align: left;">1%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marijuana</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">176</td>
<td style="text-align: left;">0%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">invisible</span>(<span class="st">"glca format"</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># We excluded otras_sus3_mod because it had only one value</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>f_preds4<span class="ot">&lt;-</span> <span class="fu">item</span>(sus_principal_mod, otras_sus1_mod, dg_trs_cons_sus_or, freq_cons_sus_prin) <span class="sc">~</span> <span class="dv">1</span> <span class="co">#, </span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>seed<span class="ot">&lt;-</span><span class="dv">2125</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>testiter <span class="ot">&lt;-</span> <span class="dv">500</span><span class="sc">*</span><span class="fl">1.5</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>n_bootstrap  <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>max_lca4   <span class="ot">&lt;-</span> <span class="dv">8</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>old <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(old)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-09-28 17:48:32 -03"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>lca402 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds4, <span class="at">data =</span> mydata_preds23a, <span class="at">nclass =</span> <span class="dv">2</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#43 minutes each more or less</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>lca403 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds4, <span class="at">data =</span> mydata_preds23a, <span class="at">nclass =</span> <span class="dv">3</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>lca404 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds4, <span class="at">data =</span> mydata_preds23a, <span class="at">nclass =</span> <span class="dv">4</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>lca405 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds4, <span class="at">data =</span> mydata_preds23a, <span class="at">nclass =</span> <span class="dv">5</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>lca406 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds4, <span class="at">data =</span> mydata_preds23a, <span class="at">nclass =</span> <span class="dv">6</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>lca407 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds4, <span class="at">data =</span> mydata_preds23a, <span class="at">nclass =</span> <span class="dv">7</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>lca408 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds4, <span class="at">data =</span> mydata_preds23a, <span class="at">nclass =</span> <span class="dv">8</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span>T, <span class="at">maxiter =</span> <span class="fl">1e4</span>,<span class="at">testiter =</span> testiter)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>gof4<span class="ot">&lt;-</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gofglca</span>(lca402, lca403, lca404, lca405, lca406, lca407, lca408, <span class="at">test =</span> <span class="st">"chisq"</span>)</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>bootlrt4<span class="ot">&lt;-</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a><span class="fu">gofglca</span>(lca402, lca403, lca404, lca405, lca406, lca407, lca408, <span class="at">test =</span> <span class="st">"boot"</span>, <span class="at">nboot=</span> n_bootstrap, <span class="at">seed=</span><span class="dv">2125</span>) </span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>best_model_lca4<span class="ot">&lt;-</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">cbind.data.frame</span>(<span class="at">rn=</span><span class="dv">2</span><span class="sc">:</span>max_lca4,gof4<span class="sc">$</span>gtable) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="fu">which.min</span>(BIC)<span class="sc">+</span><span class="dv">1</span>))</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>new_med<span class="ot">&lt;-</span>(<span class="fu">Sys.time</span>())</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"The model took "</span>,<span class="fu">round</span>(new_med<span class="sc">-</span>old,<span class="dv">2</span>),<span class="st">" until every LCA was computed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The model took 3.04 until every LCA was computed"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(new_med)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-09-28 20:50:58 -03"</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://agscl.github.io/IVE/</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>sabic<span class="ot">&lt;-</span><span class="fu">c</span>()</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>( i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">2</span>,max_lca4)){</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  sabic<span class="ot">&lt;-</span><span class="fu">c</span>(sabic,</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>(<span class="sc">-</span><span class="dv">2</span> <span class="sc">*</span> <span class="fu">get</span>(<span class="fu">paste0</span>(<span class="st">"lca4"</span>,<span class="fu">sprintf</span>(<span class="st">"%02.f"</span>, i)))<span class="sc">$</span>gof<span class="sc">$</span>loglik)<span class="sc">+</span> <span class="fu">get</span>(<span class="fu">paste0</span>(<span class="st">"lca4"</span>,<span class="fu">sprintf</span>(<span class="st">"%02.f"</span>, i)))<span class="sc">$</span>gof<span class="sc">$</span>df <span class="sc">*</span><span class="fu">log</span>(  (<span class="fu">nrow</span>(mydata_preds23a) <span class="sc">+</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">24</span>    )</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>manualcolors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'indianred1'</span>, <span class="st">'cornflowerblue'</span>, <span class="st">'gray50'</span>, <span class="st">'darkolivegreen4'</span>, <span class="st">'slateblue2'</span>, </span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'firebrick4'</span>, <span class="st">'goldenrod4'</span>)</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>levels5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"logLik"</span>, <span class="st">"AIC"</span>, <span class="st">"CAIC"</span>, <span class="st">"BIC"</span>, <span class="st">"entropy"</span>, <span class="st">"Res.Df"</span>, <span class="st">"Gsq"</span>, <span class="st">"SABIC"</span>)</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>labels5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Log-Likelihood'</span>, <span class="st">'Akaike Information</span><span class="sc">\n</span><span class="st">Criteria(AIC)'</span>,<span class="st">'Corrected AIC'</span>,<span class="st">'Bayesian Information</span><span class="sc">\n</span><span class="st">Criteria (BIC)'</span>, <span class="st">'Entropy'</span>, <span class="st">'Residual degrees of freedom'</span>, <span class="st">'Deviance'</span>, <span class="st">"SABIC"</span>)</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>fig_lca_fit4<span class="ot">&lt;-</span> <span class="fu">cbind.data.frame</span>(<span class="at">rn=</span><span class="dv">2</span><span class="sc">:</span>max_lca4,gof4<span class="sc">$</span>gtable,<span class="at">SABIC=</span>sabic) <span class="sc">%&gt;%</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate_if</span>(is.character, as.numeric) <span class="sc">%&gt;%</span>  <span class="co"># convert character columns to numeric</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>rn,<span class="at">names_to =</span> <span class="st">"indices"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>, <span class="at">values_drop_na =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">indices =</span> <span class="fu">factor</span>(indices, <span class="at">levels =</span> levels5, <span class="at">labels =</span> labels5)) <span class="sc">%&gt;%</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"(AIC|BIC)"</span>,indices, <span class="at">ignore.case=</span>T))<span class="sc">%&gt;%</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">ModelIndex=</span> <span class="fu">factor</span>(rn, <span class="at">levels=</span><span class="dv">2</span><span class="sc">:</span>max_lca4)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ModelIndex, <span class="at">y =</span> value, <span class="at">group =</span> indices, <span class="at">color =</span> indices, <span class="at">linetype =</span> indices)) <span class="sc">+</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> manualcolors) <span class="sc">+</span></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_linetype_manual(values = c("solid", "dashed", "dotted")) +</span></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of classes"</span>, <span class="at">y=</span><span class="st">"Value"</span>, <span class="at">color=</span><span class="st">"Measure"</span>, <span class="at">linetype=</span><span class="st">"Measure"</span>)<span class="sc">+</span></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">#facet_wrap(.~indices, scales = "free_y", nrow = 4, ncol = 1) +</span></span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>fig_lca_fit4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca22-licit-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Elbow plot of the information criteria</figcaption>
</figure>
</div>
</div>
</div>
<p>The best fit was obtained by the 5 class solution</p>
<div class="controlly">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glca(formula = f_preds4, data = mydata_preds23a, nclass = 5, 
    n.init = 50, decreasing = T, testiter = testiter, maxiter = 10000, 
    seed = seed, verbose = FALSE)

Manifest items : sus_principal_mod otras_sus1_mod dg_trs_cons_sus_or freq_cons_sus_prin 

Categories for manifest items :
                     Y = 1                 Y = 2         Y = 3     Y = 4
sus_principal_mod  Alcohol Cocaine hydrochloride Cocaine paste Marijuana
otras_sus1_mod           2                     3                        
dg_trs_cons_sus_or       2                     3                        
freq_cons_sus_prin       1                     2             3         4

Model : Latent class analysis 

Number of latent classes : 5 
Number of observations : 39680 
Number of parameters : 44 

log-likelihood : -121582.9 
     G-squared : 111.2323 
           AIC : 243253.9 
           BIC : 243631.8 

Marginal prevalences for latent classes :
Class 1 Class 2 Class 3 Class 4 Class 5 
0.12905 0.21937 0.42630 0.12189 0.10339 

Class prevalences by group :
    Class 1 Class 2 Class 3 Class 4 Class 5
ALL 0.12905 0.21937  0.4263 0.12189 0.10339

Item-response probabilities :
sus_principal_mod 
         Y = 1  Y = 2  Y = 3  Y = 4
Class 1 0.8639 0.0000 0.1361 0.0000
Class 2 0.5246 0.0026 0.4600 0.0129
Class 3 0.0000 0.3123 0.5928 0.0949
Class 4 0.0000 0.6988 0.3012 0.0000
Class 5 0.0000 0.3268 0.4375 0.2357
otras_sus1_mod 
         Y = 1  Y = 2
Class 1 0.0000 1.0000
Class 2 0.0000 1.0000
Class 3 0.6135 0.3865
Class 4 0.6875 0.3125
Class 5 0.6548 0.3452
dg_trs_cons_sus_or 
         Y = 1  Y = 2
Class 1 0.5460 0.4540
Class 2 0.1136 0.8864
Class 3 0.0000 1.0000
Class 4 0.3750 0.6250
Class 5 1.0000 0.0000
freq_cons_sus_prin 
         Y = 1  Y = 2  Y = 3  Y = 4
Class 1 0.0076 0.0657 0.6953 0.2314
Class 2 0.0019 0.0148 0.1582 0.8251
Class 3 0.0005 0.0214 0.1707 0.8075
Class 4 0.0092 0.1216 0.8692 0.0000
Class 5 0.0090 0.0842 0.3266 0.5802</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Medidas de ajuste (dividir por 1000 gsq_2)</caption>
<colgroup>
<col style="width: 3%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">rn</th>
<th style="text-align: right;">log_lik</th>
<th style="text-align: right;">aic</th>
<th style="text-align: right;">caic</th>
<th style="text-align: right;">bic</th>
<th style="text-align: right;">entropy</th>
<th style="text-align: right;">res_df</th>
<th style="text-align: right;">gsq</th>
<th style="text-align: right;">sabic</th>
<th style="text-align: right;">boot_p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">-124004.5</td>
<td style="text-align: right;">248043.0</td>
<td style="text-align: right;">248206.0</td>
<td style="text-align: right;">248189.0</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">4954.33</td>
<td style="text-align: right;">248349.9</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">-122321.9</td>
<td style="text-align: right;">244695.8</td>
<td style="text-align: right;">244945.1</td>
<td style="text-align: right;">244919.1</td>
<td style="text-align: right;">0.63</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">1589.16</td>
<td style="text-align: right;">244918.0</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">-121819.6</td>
<td style="text-align: right;">243709.2</td>
<td style="text-align: right;">244044.8</td>
<td style="text-align: right;">244009.8</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">584.55</td>
<td style="text-align: right;">243846.7</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">-121582.9</td>
<td style="text-align: right;">243253.9</td>
<td style="text-align: right;">243675.8</td>
<td style="text-align: right;">243631.8</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">111.23</td>
<td style="text-align: right;">243306.7</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">-121539.8</td>
<td style="text-align: right;">243185.5</td>
<td style="text-align: right;">243693.7</td>
<td style="text-align: right;">243640.7</td>
<td style="text-align: right;">0.66</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">24.83</td>
<td style="text-align: right;">243153.6</td>
<td style="text-align: right;">0.12</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">-121532.2</td>
<td style="text-align: right;">243188.4</td>
<td style="text-align: right;">243782.9</td>
<td style="text-align: right;">243720.9</td>
<td style="text-align: right;">0.60</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.74</td>
<td style="text-align: right;">243071.8</td>
<td style="text-align: right;">0.84</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">-121529.1</td>
<td style="text-align: right;">243200.2</td>
<td style="text-align: right;">243881.0</td>
<td style="text-align: right;">243810.0</td>
<td style="text-align: right;">0.59</td>
<td style="text-align: right;">-8</td>
<td style="text-align: right;">3.55</td>
<td style="text-align: right;">242998.9</td>
<td style="text-align: right;">0.93</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="controlly">
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">#https://rdrr.io/cran/glca/src/R/plot.glca.R</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text =</span> <span class="fu">paste0</span>(<span class="st">"lca40"</span>,best_model_lca4))), <span class="at">ask=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca24-licit-fig1-details-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca24-licit-fig1-details-2.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca24-licit-fig1-details-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca24-licit-fig1-details-4.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca24-licit-fig1-details-5.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Selected Model</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>The following steps were involved in the following code:</p>
<ul>
<li>Analysis of the best LCA model’s parameter estimates.</li>
<li>Visualization of the probabilities of different responses across categories.</li>
<li>Extract the parameter ‘rho’ from the best model.</li>
<li>Transform and format the extracted data for visualization.</li>
<li>Read a correction table (<code>traductor_cats4</code>) for categories.</li>
<li>Merge the model data with the correction table.</li>
<li>The data is visualized using a ggplot2 stacked bar chart.</li>
<li>Categories are represented with varying shades of grey.</li>
<li>Each bar represents a variable from the model, and the sections of the bar represent the probability of each category for that variable.</li>
<li>The bars are split by ‘class’ with the use of facets.</li>
<li>The processed data (<code>lcmodel_glca4</code>) containing variables and their probabilities across different categories is saved to an Excel file named <code>variables_probabilities_in_category_glca_licit_ilicit_2.xlsx</code></li>
<li>The model’s parameters allow a deeper understanding of the probabilities across categories for different variables. The visualization provides a holistic view of the data for quick insights. The processed data is readily available for any further analysis or sharing.</li>
</ul>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">#table(mydata_preds3a$sus_principal_mod)</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>rho_glca4<span class="ot">&lt;-</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">"bind_rows"</span>,best_model_glca4<span class="sc">$</span>param<span class="sc">$</span>rho<span class="sc">$</span>ALL) <span class="sc">%&gt;%</span> </span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">data.table</span>(<span class="at">keep.rownames =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  magrittr<span class="sc">::</span><span class="fu">set_colnames</span>(<span class="fu">c</span>(<span class="st">"variables"</span>, <span class="fu">paste0</span>(<span class="st">"Class"</span>,<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(best_model_glca4<span class="sc">$</span>param<span class="sc">$</span>gamma)))) <span class="sc">%&gt;%</span> </span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(variables, <span class="at">into=</span><span class="fu">c</span>(<span class="st">"var"</span>, <span class="st">"prob"</span>), <span class="at">sep=</span><span class="st">".Y ="</span>)</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4 <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(rho_glca4, <span class="at">level=</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"class"</span><span class="ot">=</span><span class="st">"variable"</span>)</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="co">#test the number of categories</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="co">#table(mydata_preds23a$sus_principal_mod)</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="co">#table(mydata_preds23a$otras_sus1_mod)</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>traductor_cats4 <span class="ot">&lt;-</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind.data.frame</span>(</span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="at">var=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"sus_principal_mod"</span>,<span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">"otras_sus1_mod"</span>,<span class="dv">3</span>), <span class="fu">rep</span>(<span class="st">"freq_cons_sus_prin"</span>,<span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">"dg_trs_cons_sus_or"</span>,<span class="dv">3</span>)),</span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a><span class="at">lvl=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),<span class="dv">1</span>),<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a><span class="at">label=</span> <span class="fu">c</span>(<span class="fu">c</span>(<span class="st">"Alcohol"</span>, <span class="st">"Cocaine hydrochloride"</span>,<span class="st">"Cocaine paste"</span>, <span class="st">"Marijuana"</span>),<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"none"</span>,<span class="st">"Licit"</span>, <span class="st">"Illicit"</span>),<span class="dv">1</span>), <span class="fu">c</span>(<span class="st">"none"</span>, <span class="st">"Less than one day a week"</span>, <span class="st">"1 to 3 days a week"</span>, <span class="st">"4+ days a week"</span>), <span class="fu">c</span>(<span class="st">"none"</span>, <span class="st">"Hazardous consumption"</span>, <span class="st">"Drug dependence"</span>))</span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(var) <span class="sc">%&gt;%</span> </span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">n=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">#restricted the levels of the manifest variables to those that were available</span></span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::filter(dplyr::case_when(var=="sus_principal_mod" &amp; !lvl %in% as.numeric(attr(table(mydata_preds23a$sus_principal_mod),"dimnames")[[1]])~ FALSE, TRUE~TRUE ))%&gt;% </span></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(var<span class="sc">==</span><span class="st">"otras_sus1_mod"</span> <span class="sc">&amp;</span> <span class="sc">!</span>lvl <span class="sc">%in%</span> <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">table</span>(mydata_preds23a<span class="sc">$</span>otras_sus1_mod),<span class="st">"dimnames"</span>)[[<span class="dv">1</span>]])<span class="sc">~</span> <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="sc">~</span><span class="cn">TRUE</span> ))<span class="sc">%&gt;%</span> </span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(var<span class="sc">==</span><span class="st">"otras_sus2_mod"</span> <span class="sc">&amp;</span> <span class="sc">!</span>lvl <span class="sc">%in%</span> <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">table</span>(mydata_preds23a<span class="sc">$</span>otras_sus2_mod),<span class="st">"dimnames"</span>)[[<span class="dv">1</span>]])<span class="sc">~</span> <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="sc">~</span><span class="cn">TRUE</span> ))<span class="sc">%&gt;%</span> </span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(var<span class="sc">==</span><span class="st">"freq_cons_sus_prin"</span> <span class="sc">&amp;</span> <span class="sc">!</span>lvl <span class="sc">%in%</span> <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">table</span>(mydata_preds23a<span class="sc">$</span>freq_cons_sus_prin),<span class="st">"dimnames"</span>)[[<span class="dv">1</span>]])<span class="sc">~</span> <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="sc">~</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(var<span class="sc">==</span><span class="st">"dg_trs_cons_sus_or"</span> <span class="sc">&amp;</span> <span class="sc">!</span>lvl <span class="sc">%in%</span> <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">table</span>(mydata_preds23a<span class="sc">$</span>dg_trs_cons_sus_or),<span class="st">"dimnames"</span>)[[<span class="dv">1</span>]])<span class="sc">~</span> <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="sc">~</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span> </span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(var) <span class="sc">%&gt;%</span> </span>
<span id="cb60-32"><a href="#cb60-32" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">lvl2=</span><span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb60-33"><a href="#cb60-33" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>()</span>
<span id="cb60-34"><a href="#cb60-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-35"><a href="#cb60-35" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4<span class="ot">&lt;-</span> lcmodel_glca4 <span class="sc">%&gt;%</span> </span>
<span id="cb60-36"><a href="#cb60-36" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pr=</span><span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"[^0-9.]+"</span>, <span class="st">""</span>, prob))) <span class="sc">%&gt;%</span> </span>
<span id="cb60-37"><a href="#cb60-37" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(traductor_cats4[,<span class="fu">c</span>(<span class="st">"var"</span>, <span class="st">"lvl2"</span>, <span class="st">"label"</span>)], <span class="at">by=</span> <span class="fu">c</span>(<span class="st">"var"</span><span class="ot">=</span><span class="st">"var"</span>, <span class="st">"pr"</span><span class="ot">=</span><span class="st">"lvl2"</span>))  </span>
<span id="cb60-38"><a href="#cb60-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::mutate(CATEGORIA= dplyr::case_when(var=="AÑO" &amp; prob==" 1"~"Perdidos", T~CATEGORIA))</span></span>
<span id="cb60-39"><a href="#cb60-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-40"><a href="#cb60-40" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4<span class="sc">$</span>text_label<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">""</span>,lcmodel_glca4<span class="sc">$</span>label,<span class="st">"&lt;br&gt;%: "</span>,scales<span class="sc">::</span><span class="fu">percent</span>(lcmodel_glca4<span class="sc">$</span>value))</span>
<span id="cb60-41"><a href="#cb60-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-42"><a href="#cb60-42" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4<span class="sc">$</span>text_label2<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">""</span>,lcmodel_glca4<span class="sc">$</span>label,<span class="st">"</span><span class="sc">\n</span><span class="st"> "</span>,scales<span class="sc">::</span><span class="fu">percent</span>(lcmodel_glca4<span class="sc">$</span>value))</span>
<span id="cb60-43"><a href="#cb60-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-44"><a href="#cb60-44" aria-hidden="true" tabindex="-1"></a>zp43 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(lcmodel_glca4,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(var, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"freq_cons_sus_prin"</span>,<span class="st">"dg_trs_cons_sus_or"</span>), <span class="at">labels=</span> <span class="fu">c</span>(<span class="st">"Primary</span><span class="sc">\n</span><span class="st">substance"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(1)"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(2)"</span>,<span class="st">"Freq.Subs.Use"</span>,<span class="st">"Dg.Subs.Dep"</span>)), <span class="at">y =</span> value, <span class="at">fill =</span> <span class="fu">factor</span>(pr), <span class="at">label=</span>text_label))</span>
<span id="cb60-45"><a href="#cb60-45" aria-hidden="true" tabindex="-1"></a>zp43 <span class="ot">&lt;-</span> zp43 <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>)</span>
<span id="cb60-46"><a href="#cb60-46" aria-hidden="true" tabindex="-1"></a>zp43 <span class="ot">&lt;-</span> zp43 <span class="sc">+</span> <span class="fu">facet_grid</span>(class <span class="sc">~</span> .) </span>
<span id="cb60-47"><a href="#cb60-47" aria-hidden="true" tabindex="-1"></a>zp43 <span class="ot">&lt;-</span> zp43 <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">type=</span><span class="st">"seq"</span>, <span class="at">palette=</span><span class="st">"Greys"</span>, <span class="at">na.value =</span> <span class="st">"white"</span>) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb60-48"><a href="#cb60-48" aria-hidden="true" tabindex="-1"></a>zp43 <span class="ot">&lt;-</span> zp43 <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Response probabilities"</span>, </span>
<span id="cb60-49"><a href="#cb60-49" aria-hidden="true" tabindex="-1"></a>                  <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb60-50"><a href="#cb60-50" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span><span class="st">"Respone/ncategories"</span>)</span>
<span id="cb60-51"><a href="#cb60-51" aria-hidden="true" tabindex="-1"></a>zp43 <span class="ot">&lt;-</span> zp43 <span class="sc">+</span> <span class="fu">theme</span>( <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb60-52"><a href="#cb60-52" aria-hidden="true" tabindex="-1"></a>                    <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),                    </span>
<span id="cb60-53"><a href="#cb60-53" aria-hidden="true" tabindex="-1"></a>                    <span class="at">panel.grid.major.y=</span><span class="fu">element_blank</span>())</span>
<span id="cb60-54"><a href="#cb60-54" aria-hidden="true" tabindex="-1"></a>zp43 <span class="ot">&lt;-</span> zp43 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse=</span><span class="cn">TRUE</span>))</span>
<span id="cb60-55"><a href="#cb60-55" aria-hidden="true" tabindex="-1"></a>zp43 <span class="ot">&lt;-</span> zp43 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb60-56"><a href="#cb60-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>)</span>
<span id="cb60-57"><a href="#cb60-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-58"><a href="#cb60-58" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(zp43, <span class="at">tooltip =</span> <span class="fu">c</span>(<span class="st">"text_label"</span>),<span class="at">height=</span><span class="dv">600</span>, <span class="at">width=</span><span class="dv">800</span>)<span class="sc">%&gt;%</span> plotly<span class="sc">::</span><span class="fu">layout</span>(<span class="at">xaxis=</span> <span class="fu">list</span>(<span class="at">showticklabels =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-94bb310c9982118a2bc1" style="width:100%;height:487px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-94bb310c9982118a2bc1">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0.14,1,0.45,1],"x":[1,2,4,3],"y":[0.86,0,0.55,0.01],"text":["text_label: Alcohol<br>%: 86.0%","text_label: Licit<br>%: 0.0%","text_label: Hazardous consumption<br>%: 55.0%","text_label: none<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0.47,1,0.89,1],"x":[1,2,4,3],"y":[0.52,0,0.11,0],"text":["text_label: Alcohol<br>%: 52.0%","text_label: Licit<br>%: 0.0%","text_label: Hazardous consumption<br>%: 11.0%","text_label: none<br>%: 0.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0.99,0.39,1,1],"x":[1,2,4,3],"y":[0,0.61,0,0],"text":["text_label: Alcohol<br>%: 0.0%","text_label: Licit<br>%: 61.0%","text_label: Hazardous consumption<br>%: 0.0%","text_label: none<br>%: 0.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[1,0.31,0.63,0.99],"x":[1,2,4,3],"y":[0,0.69,0.37,0.01],"text":["text_label: Alcohol<br>%: 0.0%","text_label: Licit<br>%: 69.0%","text_label: Hazardous consumption<br>%: 37.0%","text_label: none<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[1.01,0.35,0,0.99],"x":[1,2,4,3],"y":[0,0.65,1,0.01],"text":["text_label: Alcohol<br>%: 0.0%","text_label: Licit<br>%: 65.0%","text_label: Hazardous consumption<br>%: 100.0%","text_label: none<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0.14,0,0,0.93],"x":[1,2,4,3],"y":[0,1,0.45,0.0700000000000001],"text":["text_label: Cocaine hydrochloride<br>%: 0.0%","text_label: Illicit<br>%: 100.0%","text_label: Drug dependence<br>%: 45.0%","text_label: Less than one day a week<br>%: 7.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0.47,0,0,0.99],"x":[1,2,4,3],"y":[0,1,0.89,0.01],"text":["text_label: Cocaine hydrochloride<br>%: 0.0%","text_label: Illicit<br>%: 100.0%","text_label: Drug dependence<br>%: 89.0%","text_label: Less than one day a week<br>%: 1.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0.68,0,0,0.98],"x":[1,2,4,3],"y":[0.31,0.39,1,0.0199999999999999],"text":["text_label: Cocaine hydrochloride<br>%: 31.0%","text_label: Illicit<br>%: 39.0%","text_label: Drug dependence<br>%: 100.0%","text_label: Less than one day a week<br>%: 2.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0.3,0,0,0.87],"x":[1,2,4,3],"y":[0.7,0.31,0.63,0.12],"text":["text_label: Cocaine hydrochloride<br>%: 70.0%","text_label: Illicit<br>%: 31.0%","text_label: Drug dependence<br>%: 63.0%","text_label: Less than one day a week<br>%: 12.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0.68,0,0,0.91],"x":[1,2,4,3],"y":[0.33,0.35,0,0.0800000000000001],"text":["text_label: Cocaine hydrochloride<br>%: 33.0%","text_label: Illicit<br>%: 35.0%","text_label: Drug dependence<br>%: 0.0%","text_label: Less than one day a week<br>%: 8.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0.23],"x":[1,3],"y":[0.14,0.7],"text":["text_label: Cocaine paste<br>%: 14.0%","text_label: 1 to 3 days a week<br>%: 70.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0.01,0.83],"x":[1,3],"y":[0.46,0.16],"text":["text_label: Cocaine paste<br>%: 46.0%","text_label: 1 to 3 days a week<br>%: 16.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0.09,0.81],"x":[1,3],"y":[0.59,0.17],"text":["text_label: Cocaine paste<br>%: 59.0%","text_label: 1 to 3 days a week<br>%: 17.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,3],"y":[0.3,0.87],"text":["text_label: Cocaine paste<br>%: 30.0%","text_label: 1 to 3 days a week<br>%: 87.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0.24,0.58],"x":[1,3],"y":[0.44,0.33],"text":["text_label: Cocaine paste<br>%: 44.0%","text_label: 1 to 3 days a week<br>%: 33.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,3],"y":[0,0.23],"text":["text_label: Marijuana<br>%: 0.0%","text_label: 4+ days a week<br>%: 23.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,3],"y":[0.01,0.83],"text":["text_label: Marijuana<br>%: 1.0%","text_label: 4+ days a week<br>%: 83.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,3],"y":[0.09,0.81],"text":["text_label: Marijuana<br>%: 9.0%","text_label: 4+ days a week<br>%: 81.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,3],"y":[0,0],"text":["text_label: Marijuana<br>%: 0.0%","text_label: 4+ days a week<br>%: 0.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,3],"y":[0.24,0.58],"text":["text_label: Marijuana<br>%: 24.0%","text_label: 4+ days a week<br>%: 58.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":37.4307458143075,"r":18.9954337899543,"b":25.0837138508371,"l":25.5707762557078},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,4.6],"tickmode":"array","ticktext":["Primary<br />substance","Other<br />subs(1)","Freq.Subs.Use","Dg.Subs.Dep"],"tickvals":[1,2,3,4],"categoryorder":"array","categoryarray":["Primary<br />substance","Other<br />subs(1)","Freq.Subs.Use","Dg.Subs.Dep"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-30,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"y5","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.809132420091324,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"annotations":[{"text":"Response probabilities","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-7.30593607305936},{"text":"Class1","x":1,"y":0.904566210045662,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class2","x":1,"y":0.7,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class3","x":1,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class4","x":1,"y":0.3,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class5","x":1,"y":0.0954337899543379,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"}],"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.809132420091324,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.809132420091324,"y1":1,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.609132420091324,"y1":0.790867579908676},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.609132420091324,"y1":0.790867579908676,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.409132420091324,"y1":0.590867579908676},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.409132420091324,"y1":0.590867579908676,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.209132420091324,"y1":0.390867579908676},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.209132420091324,"y1":0.390867579908676,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.190867579908676},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0,"y1":0.190867579908676,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"}],"yaxis2":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.609132420091324,0.790867579908676],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.409132420091324,0.590867579908676],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.209132420091324,0.390867579908676],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":false,"range":[-0.0505,1.0605],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0,0.190867579908676],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","width":800,"height":600,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"14bc11151e15":{"x":{},"y":{},"fill":{},"label":{},"type":"bar"}},"cur_data":"14bc11151e15","visdat":{"14bc11151e15":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Selected Model</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"_fig3_LCA_distribuciones_glca_licit_ilicit_2.png"</span>,zp43, <span class="at">dpi=</span> <span class="dv">600</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4 <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"variables_probabilities_in_category_glca_licit_ilicit_2.xlsx"</span>)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>zp43b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(lcmodel_glca4,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(var, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"freq_cons_sus_prin"</span>,<span class="st">"dg_trs_cons_sus_or"</span>), <span class="at">labels=</span> <span class="fu">c</span>(<span class="st">"Primary</span><span class="sc">\n</span><span class="st">substance"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(1)"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(2)"</span>,<span class="st">"Freq.Subs.Use"</span>,<span class="st">"Dg.Subs.Dep"</span>)), <span class="at">y =</span> value, <span class="at">fill =</span> <span class="fu">factor</span>(pr), <span class="at">label=</span>text_label2))</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>zp43b <span class="ot">&lt;-</span> zp43b <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>)</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>zp43b <span class="ot">&lt;-</span> zp43b <span class="sc">+</span> <span class="fu">facet_grid</span>(class <span class="sc">~</span> .) </span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>zp43b <span class="ot">&lt;-</span> zp43b <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">type=</span><span class="st">"seq"</span>, <span class="at">palette=</span><span class="st">"Greys"</span>, <span class="at">na.value =</span> <span class="st">"white"</span>) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>zp43b <span class="ot">&lt;-</span> zp43b <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Response probabilities"</span>, </span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span><span class="st">"Respone/ncategories"</span>)</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>zp43b <span class="ot">&lt;-</span> zp43b <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">paste0</span>(<span class="st">"grey"</span>,<span class="fu">seq</span>(<span class="dv">20</span>,<span class="dv">80</span>, <span class="at">by=</span><span class="dv">60</span><span class="sc">/</span><span class="dv">6</span>))) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>zp43b <span class="ot">&lt;-</span> zp43b <span class="sc">+</span> <span class="fu">theme</span>( <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>                    <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),                    </span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>                    <span class="at">panel.grid.major.y=</span><span class="fu">element_blank</span>())</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>zp43b <span class="ot">&lt;-</span> zp43b <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse=</span><span class="cn">TRUE</span>))</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>zp43b <span class="ot">&lt;-</span> zp43b <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>)</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"zp43b.png"</span>, </span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>       zp43b<span class="sc">+</span> ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="co">#aes(#y=half, label=lab),</span></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">max.iter =</span> <span class="fl">1e6</span>,</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>)<span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>), </span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">height=</span><span class="dv">13</span>)<span class="co">#, fill = "white" --&gt; dentro de label repel</span></span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4 <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>( class, var, label, value) <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"tab_cond_pr_licit_illicit_2.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For ease of interpretation, we summarized the main characteristics of each class based on the probabilities provided:</p>
<p><strong>1)“Hazardous Alcohol Users w/ Illicit Substances”</strong>: This class represents individuals who mainly consume alcohol (0.86) in moderate frequency (1-3 days a week; 0.70) and an illicit secondary substance (1.00). They mostly indulge in hazardous consumption (0.55).</p>
<p><strong>2)“Intense Illicit Users”</strong>: This class embodies users who are heavily reliant on Alcohol (0.52) or Cocaine paste (0.46) as the primary substance, with a secondary illicit substance (1.00). They exhibit a strong drug dependence (0.89), consuming their preferred substance +4 days a week (0.83).</p>
<p><strong>3)“Varied Cocaine Consumers”</strong>: Members of this class have a varied cocaine preference, ranging from cocaine paste (0.59) to cocaine hydrochloride (0.31). However, they probably will use licit substances as a secondary substance (0.61). They show consistent drug dependence (1.00) and frequent use of the primary substance (+4 days a week; 0.81).</p>
<p><strong>4)“Cocaine Hydrochloride Regulars”</strong>: This group is characterized by a preference for cocaine hydrochloride (0.70) with licit secondary substance (0.69), with a balanced profile of hazardous consumption (0.37) and drug dependence (0.63). Their main substance use is regular (1-3 days a week, 0.87; Less than one day a week, 0.12) but not daily.</p>
<p><strong>5)“Diverse Substance Users”</strong>: This class displays a broader substance usage palette, ranging from cocaine (0.33) and cocaine paste (0.44) to marijuana (0.24) as the primary substance, with a licit secondary substance (0.65). They lean heavily towards hazardous consumption (1.00) with varied frequency patterns, predominantly (+4 days a week; 0.58).</p>
<p>(For more info, see this <a href="https://chat.openai.com/c/84e78f89-c680-4d5d-8d81-7b4a88892c3e">link</a>)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Classifying by posterior probs.</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>posterior_glca4_05_final<span class="ot">&lt;-</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>best_model_glca4<span class="sc">$</span>posterior<span class="sc">$</span>ALL <span class="sc">%&gt;%</span> </span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">ifelse</span>(.<span class="sc">&gt;</span>.<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_05=</span>dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="st">`</span><span class="at">Class 1</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">1</span>,<span class="st">`</span><span class="at">Class 2</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">2</span>, <span class="st">`</span><span class="at">Class 3</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">3</span>,<span class="st">`</span><span class="at">Class 4</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">4</span>, <span class="st">`</span><span class="at">Class 5</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">5</span>))</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>posterior_glca4_07_final<span class="ot">&lt;-</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>best_model_glca4<span class="sc">$</span>posterior<span class="sc">$</span>ALL <span class="sc">%&gt;%</span> </span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">ifelse</span>(.<span class="sc">&gt;</span>.<span class="dv">7</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_07=</span>dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="st">`</span><span class="at">Class 1</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">1</span>,<span class="st">`</span><span class="at">Class 2</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">2</span>, <span class="st">`</span><span class="at">Class 3</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">3</span>,<span class="st">`</span><span class="at">Class 4</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">4</span>, <span class="st">`</span><span class="at">Class 5</span><span class="st">`</span><span class="sc">==</span><span class="dv">1</span><span class="sc">~</span><span class="dv">5</span>))</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Unite the posterior probabilities with the original database</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>bd_mydata_preds4_posterior3<span class="ot">&lt;-</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind.data.frame</span>(mydata_preds23a,<span class="at">final_07=</span>posterior_glca4_07_final<span class="sc">$</span>final_07,<span class="at">final_05=</span>posterior_glca4_05_final<span class="sc">$</span>final_05)</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>sum_prob_post_2<span class="ot">&lt;-</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(bd_mydata_preds4_posterior3<span class="sc">$</span>final_05, </span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>      bd_mydata_preds4_posterior3<span class="sc">$</span>final_07,<span class="at">exclude=</span><span class="cn">NULL</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(Freq<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Perc=</span> scales<span class="sc">::</span><span class="fu">percent</span>(Freq<span class="sc">/</span><span class="fu">sum</span>(Freq))) <span class="sc">%&gt;%</span> </span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(Var2), Var1,<span class="fu">desc</span>(Freq)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Var2)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="fu">parse_number</span>(Perc)))</span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a><span class="co">#Determining misclassification</span></span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(bd_mydata_preds4_posterior3<span class="sc">$</span>final_05, </span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a>      bd_mydata_preds4_posterior3<span class="sc">$</span>final_07,<span class="at">exclude=</span><span class="cn">NULL</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(Freq<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Perc=</span> scales<span class="sc">::</span><span class="fu">percent</span>(Freq<span class="sc">/</span><span class="fu">sum</span>(Freq))) <span class="sc">%&gt;%</span> </span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(Var2), Var1,<span class="fu">desc</span>(Freq)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">"markdown"</span>, <span class="at">caption=</span><span class="st">"Posterior probabilities of Classification"</span>, </span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a>             <span class="at">col.names=</span> <span class="fu">c</span>(<span class="st">"Classifying w/ .5"</span>, <span class="st">"Classifying w/ .7"</span>, <span class="st">"Frequency"</span>, <span class="st">"%"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Posterior probabilities of Classification</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Classifying w/ .5</th>
<th style="text-align: left;">Classifying w/ .7</th>
<th style="text-align: right;">Frequency</th>
<th style="text-align: left;">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
<td style="text-align: right;">2446</td>
<td style="text-align: left;">6.16%</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;">1241</td>
<td style="text-align: left;">3.13%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: right;">10947</td>
<td style="text-align: left;">27.59%</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: right;">3805</td>
<td style="text-align: left;">9.59%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: right;">1949</td>
<td style="text-align: left;">4.91%</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3236</td>
<td style="text-align: left;">8.16%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">14</td>
<td style="text-align: left;">0.04%</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">7924</td>
<td style="text-align: left;">19.97%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3738</td>
<td style="text-align: left;">9.42%</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">858</td>
<td style="text-align: left;">2.16%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3522</td>
<td style="text-align: left;">8.88%</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>When using classification criteria based on the model output, if at least 50% of an observation’s posterior probability is accounted for by a particular class, only 1.52% of the patients remain unclassified. However, if we raise this threshold to 70%, then 48.62% of the patients would not be assigned to any latent class. This observation aligns with relative entropy principles.</p>
<div class="cell" data-paged.print="true">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(easyalluvial)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(parcats)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>p_alluvial4<span class="ot">&lt;-</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind.data.frame</span>(<span class="fu">subset</span>(Base_fiscalia_v16_grant_23_24, <span class="sc">!</span><span class="fu">is.na</span>(otras_sus1_mod)) <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"dg_trs_cons_sus_or"</span>,<span class="st">"freq_cons_sus_prin"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(.)<span class="sc">~</span> <span class="st">"none"</span>, <span class="cn">TRUE</span><span class="sc">~</span> .))) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>sus_principal_mod<span class="sc">==</span><span class="st">"Other"</span>,  <span class="sc">!</span>otras_sus1_mod<span class="sc">==</span><span class="st">"Other"</span>, <span class="sc">!</span>otras_sus2_mod<span class="sc">==</span><span class="st">"Other"</span>),</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="at">final_07=</span>posterior_glca4_07_final<span class="sc">$</span>final_07, <span class="at">final_05=</span>posterior_glca4_05_final<span class="sc">$</span>final_05) <span class="sc">%&gt;%</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">event_comp=</span> <span class="fu">factor</span>(event_comp, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Completion"</span>, <span class="st">"Non-completion"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_05=</span><span class="fu">factor</span>(final_05, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"C1: Hazardous Alcohol</span><span class="sc">\n</span><span class="st">+ Illicit User"</span>, <span class="st">"C2: Alcohol/Cocaine paste</span><span class="sc">\n</span><span class="st"> Frequent Dependence+ Heavy Illicit 2nd use"</span>, <span class="st">"C3: Frequent Dependence of Snort Cocaine </span><span class="sc">\n</span><span class="st">&amp; Cocaine paste +Illicit Secondary Subtance"</span>, <span class="st">"C4: Regular cocaine hydrochloride</span><span class="sc">\n</span><span class="st">+ Licit 2nd Substance Use"</span>, <span class="st">"C5: Frequent Hazardous Cocaine paste, Snort</span><span class="sc">\n</span><span class="st">Cocaine &amp; Marijuana Use + Licit 2nd substance"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#sus_principal_mod,</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  otras_sus1_mod,</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  otras_sus2_mod,</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>    final_05,</span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>      event_comp) <span class="sc">%&gt;%</span>  </span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>      easyalluvial<span class="sc">::</span><span class="fu">alluvial_wide</span>(</span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bin=</span><span class="dv">2</span>,</span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bin_labels =</span> <span class="fu">c</span>(<span class="st">"ambulatory"</span>, <span class="st">"residential"</span>),</span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">order_levels=</span> <span class="fu">c</span>(<span class="st">"ambulatory"</span>, <span class="st">"residential"</span>,<span class="st">"censored"</span>),</span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill_by =</span> <span class="st">'first_variable'</span>,</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">NA_label =</span> <span class="st">"non-classified"</span>,</span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">auto_rotate_xlabs =</span> T,</span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>                  <span class="at">stratum_label_size =</span> <span class="dv">3</span>,</span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">colorful_fill_variable_stratum =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>p_alluvial4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="proposal_grant_23_24_2_files/figure-html/glca25-alluvial-1.png" class="img-fluid figure-img" width="3500"></p>
<figcaption class="figure-caption">Figure 2. Sankey Plot of Transitions by Treatment Modality</figcaption>
</figure>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"glca_res_comp_off_licit_illicit_2.png"</span>, </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>       p_alluvial4, </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">height=</span><span class="dv">13</span>)<span class="co">#, fill = "white" --&gt; dentro de label repel</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>Saving 7 x 13 in image</p>
</div>
</div>
<section id="covariate-tr.-completion-1" class="level4">
<h4 class="anchored" data-anchor-id="covariate-tr.-completion-1">Covariate: Tr. completion</h4>
<ul>
<li>Adjusting by treatment completion status</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">#2023-10-25, falta completar</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>mydata_preds323<span class="ot">&lt;-</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cbind.data.frame</span>(<span class="fu">subset</span>(Base_fiscalia_v16_grant_23_24, <span class="sc">!</span><span class="fu">is.na</span>(otras_sus1_mod)) <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"dg_trs_cons_sus_or"</span>,<span class="st">"freq_cons_sus_prin"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(.)<span class="sc">~</span> <span class="st">"none"</span>, <span class="cn">TRUE</span><span class="sc">~</span> .))) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>sus_principal_mod<span class="sc">==</span><span class="st">"Other"</span>,  <span class="sc">!</span>otras_sus1_mod<span class="sc">==</span><span class="st">"Other"</span>, <span class="sc">!</span>otras_sus2_mod<span class="sc">==</span><span class="st">"Other"</span>),</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">final_07=</span>posterior_glca4_07_final<span class="sc">$</span>final_07, <span class="at">final_05=</span>posterior_glca4_05_final<span class="sc">$</span>final_05,</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    mydata_preds3a) <span class="sc">%&gt;%</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">event_comp=</span> <span class="fu">factor</span>(event_comp, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Completion"</span>, <span class="st">"Non-completion"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_05=</span><span class="fu">factor</span>(final_05, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"C1: Hazardous Alcohol</span><span class="sc">\n</span><span class="st">+ Illicit User"</span>, <span class="st">"C2: Alcohol/Cocaine paste</span><span class="sc">\n</span><span class="st"> Frequent Dependence+ Heavy Illicit 2nd use"</span>, <span class="st">"C3: Frequent Dependence of Snort Cocaine </span><span class="sc">\n</span><span class="st">&amp; Cocaine paste +Illicit Secondary Subtance"</span>, <span class="st">"C4: Regular cocaine hydrochloride</span><span class="sc">\n</span><span class="st">+ Licit 2nd Substance Use"</span>, <span class="st">"C5: Frequent Hazardous Cocaine paste, Snort</span><span class="sc">\n</span><span class="st">Cocaine &amp; Marijuana Use + Licit 2nd substance"</span>)))</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>f_preds23_adj<span class="ot">&lt;-</span> <span class="fu">item</span>(sus_principal_mod_2, otras_sus1_mod_2, dg_trs_cons_sus_or_2, freq_cons_sus_prin_2) <span class="sc">~</span> event_comp </span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>lca4052 <span class="ot">&lt;-</span> <span class="fu">glca</span>(f_preds23_adj, <span class="at">data =</span> mydata_preds323, <span class="at">nclass =</span> <span class="dv">5</span>, <span class="at">seed =</span> seed, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">n.init =</span> <span class="fl">5e1</span>, <span class="at">decreasing=</span><span class="cn">TRUE</span>, <span class="at">maxiter =</span> <span class="fl">1e4</span>, <span class="at">testiter =</span> testiter)</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>gof_lca4_adj<span class="ot">&lt;-</span> <span class="fu">gofglca</span>(lca4052, <span class="at">test=</span><span class="st">"boot"</span>, <span class="at">nboot=</span>n_bootstrap, <span class="at">seed=</span><span class="dv">2125</span>)</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>df_lca4052<span class="ot">&lt;-</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="fu">coef</span>(lca4052)) <span class="sc">%&gt;%</span> <span class="fu">rownames_to_column</span>(<span class="st">"term"</span>) <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="st">"rowname"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">"key"</span>, <span class="at">value =</span> <span class="st">"value"</span>, <span class="sc">-</span>rowname) <span class="sc">%&gt;%</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">spread</span>(<span class="at">key =</span> <span class="st">"rowname"</span>, <span class="at">value =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_names</span>(<span class="fu">as.character</span>(<span class="fu">unlist</span>(<span class="fu">tail</span>(., <span class="dv">1</span>)))) <span class="sc">%&gt;%</span> </span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">term=</span><span class="fu">strsplit</span>(<span class="fu">sub</span>(<span class="st">'^(.*?_.*?_.*?)_(.*)$'</span>, <span class="st">'</span><span class="sc">\\</span><span class="st">1,</span><span class="sc">\\</span><span class="st">2'</span>, term), <span class="st">','</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(<span class="at">col=</span>term,<span class="at">into =</span> <span class="fu">c</span>(<span class="st">"prefix"</span>, <span class="st">"suffix"</span>),  <span class="at">sep =</span> <span class="st">", "</span>, <span class="at">extra =</span> <span class="st">"merge"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"prefix"</span>, <span class="st">"suffix"</span>), <span class="sc">~</span><span class="fu">gsub</span>(<span class="st">'</span><span class="sc">\\</span><span class="st">(|"|</span><span class="sc">\\</span><span class="st">)'</span>, <span class="st">""</span>, .))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Class 1 / 5 :
                         Odds Ratio Coefficient  Std. Error  t value  Pr(&gt;|t|)
(Intercept)                 0.30244    -1.19588     0.76505   -1.563   0.13059
event_compNon-completion    1.23057     0.20748     0.07406    2.802   0.00967
                           
(Intercept)                
event_compNon-completion **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Class 2 / 5 :
                         Odds Ratio Coefficient  Std. Error  t value  Pr(&gt;|t|)
(Intercept)                 1.97877     0.68248     0.22764    2.998   0.00607
event_compNon-completion    1.53709     0.42989     0.04731    9.088  2.13e-09
                            
(Intercept)              ** 
event_compNon-completion ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Class 3 / 5 :
                         Odds Ratio Coefficient  Std. Error  t value  Pr(&gt;|t|)
(Intercept)                 0.22600    -1.48723     0.74268   -2.003   0.05619
event_compNon-completion    0.76570    -0.26696     0.08253   -3.235   0.00341
                           
(Intercept)              . 
event_compNon-completion **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Class 4 / 5 :
                         Odds Ratio Coefficient  Std. Error  t value  Pr(&gt;|t|)
(Intercept)                 0.82793    -0.18883     0.40857   -0.462     0.648
event_compNon-completion    1.09499     0.09075     0.16068    0.565     0.577</code></pre>
</div>
<div class="message">
<p>gather: reorganized (term, all_class1_5_odds_ratio, all_class1_5_coefficient, all_class1_5_std_error, all_class1_5_t_value, …) into (key, value) [was 2x22, now 42x3]</p>
</div>
<div class="message">
<p>spread: reorganized (rowname, value) into (1, 2) [was 42x3, now 21x3]</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>df_lca40522<span class="ot">&lt;-</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>df_lca4052<span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(suffix <span class="sc">==</span> <span class="st">"coefficient"</span> <span class="sc">|</span> suffix <span class="sc">==</span> <span class="st">"std_error"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>suffix, <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">"(Intercept)"</span>, <span class="st">"event_compNon-completion"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate_at</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="sc">~</span><span class="fu">as.numeric</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_log_or_int =</span> <span class="st">`</span><span class="at">(Intercept)_coefficient</span><span class="st">`</span> <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="st">`</span><span class="at">(Intercept)_std_error</span><span class="st">`</span>,</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper_log_or_int =</span> <span class="st">`</span><span class="at">(Intercept)_coefficient</span><span class="st">`</span> <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="st">`</span><span class="at">event_compNon-completion_std_error</span><span class="st">`</span>,</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_log_or_comp =</span> <span class="st">`</span><span class="at">event_compNon-completion_coefficient</span><span class="st">`</span> <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="st">`</span><span class="at">event_compNon-completion_std_error</span><span class="st">`</span>,</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper_log_or_comp =</span> <span class="st">`</span><span class="at">event_compNon-completion_coefficient</span><span class="st">`</span> <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="st">`</span><span class="at">event_compNon-completion_std_error</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"int_coef"</span><span class="ot">=</span><span class="st">"(Intercept)_coefficient"</span>, <span class="st">"int_std_error"</span><span class="ot">=</span><span class="st">"(Intercept)_std_error"</span>, <span class="st">"comp_coef"</span><span class="ot">=</span><span class="st">"event_compNon-completion_coefficient"</span>,<span class="st">"comp_std_error"</span><span class="ot">=</span><span class="st">"event_compNon-completion_std_error"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(prefix,<span class="co">#t_coef int_std_error comp_coef comp_std_error </span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>                int_coef, int_std_error, comp_coef, comp_std_error, </span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>                lower_log_or_int, upper_log_or_int, lower_log_or_comp, upper_log_or_comp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>pivot_wider: reorganized (suffix, (Intercept), event_compNon-completion) into ((Intercept)_coefficient, (Intercept)_std_error, event_compNon-completion_coefficient, event_compNon-completion_std_error) [was 8x4, now 4x5]</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List of call classes</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>call_classes <span class="ot">&lt;-</span> <span class="fu">unique</span>(df_lca4052<span class="sc">$</span>prefix)</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>result2 <span class="ot">&lt;-</span> <span class="fu">map_df</span>(call_classes, <span class="sc">~</span> {</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  df_lca40522 <span class="sc">%&gt;%</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">int_comp_coef=</span>int_coef<span class="sc">+</span>comp_coef) <span class="sc">%&gt;%</span> </span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">call_class =</span> .x,</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">nom =</span> <span class="fu">sum</span>(<span class="fu">ifelse</span>(prefix <span class="sc">==</span> .x, <span class="fu">exp</span>(int_comp_coef), <span class="dv">0</span>)),</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">den =</span> <span class="fu">sum</span>(<span class="fu">exp</span>(int_comp_coef)),</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">prob =</span> nom<span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>den))</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>result2_lo <span class="ot">&lt;-</span> <span class="fu">map_df</span>(call_classes, <span class="sc">~</span> {</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    df_lca40522 <span class="sc">%&gt;%</span></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">int_comp_coef=</span>lower_log_or_int<span class="sc">+</span>lower_log_or_comp) <span class="sc">%&gt;%</span> </span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">call_class =</span> .x,</span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nom =</span> <span class="fu">sum</span>(<span class="fu">ifelse</span>(prefix <span class="sc">==</span> .x, <span class="fu">exp</span>(int_comp_coef), <span class="dv">0</span>)),</span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>                         <span class="at">den =</span> <span class="fu">sum</span>(<span class="fu">exp</span>(int_comp_coef)),</span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>                         <span class="at">prob =</span> nom<span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>den))</span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>result2_hi <span class="ot">&lt;-</span> <span class="fu">map_df</span>(call_classes, <span class="sc">~</span> {</span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>    df_lca40522 <span class="sc">%&gt;%</span></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">int_comp_coef=</span>upper_log_or_int<span class="sc">+</span>upper_log_or_comp) <span class="sc">%&gt;%</span> </span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">call_class =</span> .x,</span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nom =</span> <span class="fu">sum</span>(<span class="fu">ifelse</span>(prefix <span class="sc">==</span> .x, <span class="fu">exp</span>(int_comp_coef), <span class="dv">0</span>)),</span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>                         <span class="at">den =</span> <span class="fu">sum</span>(<span class="fu">exp</span>(int_comp_coef)),</span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>                         <span class="at">prob =</span> nom<span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>den))</span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>df_lca40522_probs<span class="ot">&lt;-</span></span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind.data.frame</span>(</span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a><span class="at">est=</span><span class="fu">c</span>(result2<span class="sc">$</span>prob, <span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span><span class="fu">unique</span>(result2<span class="sc">$</span>den))),</span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a><span class="at">lo=</span><span class="fu">c</span>(result2_lo<span class="sc">$</span>prob, <span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span><span class="fu">unique</span>(result2_lo<span class="sc">$</span>den))),</span>
<span id="cb68-36"><a href="#cb68-36" aria-hidden="true" tabindex="-1"></a><span class="at">hi=</span><span class="fu">c</span>(result2_hi<span class="sc">$</span>prob, <span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span><span class="fu">unique</span>(result2_hi<span class="sc">$</span>den))))</span>
<span id="cb68-37"><a href="#cb68-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-38"><a href="#cb68-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-39"><a href="#cb68-39" aria-hidden="true" tabindex="-1"></a>f22 <span class="ot">&lt;-</span><span class="fu">cbind</span>(sus_principal_mod_2, otras_sus1_mod_2,dg_trs_cons_sus_or_2, freq_cons_sus_prin_2) <span class="sc">~</span> event_comp </span>
<span id="cb68-40"><a href="#cb68-40" aria-hidden="true" tabindex="-1"></a>gss.lc22 <span class="ot">&lt;-</span><span class="fu">poLCA</span>(f22, mydata_preds323, <span class="at">nclass=</span><span class="dv">5</span>,<span class="at">nrep=</span>testiter, <span class="at">maxiter=</span><span class="fl">1e5</span>, <span class="at">verbose=</span>F, <span class="at">calc.se=</span>T) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="alert alert-warning">
<p>Warning in sqrt(diag(VCE.beta)): Se han producido NaNs</p>
</div>
<div class="alert alert-warning">
<p>Warning in sqrt(diag(VCE.mix)): Se han producido NaNs</p>
</div>
<div class="alert alert-warning">
<p>Warning in sqrt(diag(VCE.beta)): Se han producido NaNs</p>
</div>
<div class="alert alert-warning">
<p>Warning in sqrt(diag(VCE.mix)): Se han producido NaNs</p>
</div>
<div class="alert alert-warning">
<p>Warning in sqrt(diag(VCE.beta)): Se han producido NaNs</p>
</div>
<div class="alert alert-warning">
<p>Warning in sqrt(diag(VCE.mix)): Se han producido NaNs</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>gss.lc22<span class="sc">$</span>eflag</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">invisible</span>(<span class="st">"no llegan a lo mismo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Given that</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>rho_glca4_adj<span class="ot">&lt;-</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">"bind_rows"</span>,lca4052<span class="sc">$</span>param<span class="sc">$</span>rho<span class="sc">$</span>ALL) <span class="sc">%&gt;%</span> </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">data.table</span>(<span class="at">keep.rownames =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>  magrittr<span class="sc">::</span><span class="fu">set_colnames</span>(<span class="fu">c</span>(<span class="st">"variables"</span>, <span class="fu">paste0</span>(<span class="st">"Class"</span>,<span class="dv">1</span><span class="sc">:</span><span class="fu">dim</span>(lca4052<span class="sc">$</span>param<span class="sc">$</span>gamma[[<span class="dv">1</span>]])[[<span class="dv">2</span>]]))) <span class="sc">%&gt;%</span> </span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(variables, <span class="at">into=</span><span class="fu">c</span>(<span class="st">"var"</span>, <span class="st">"prob"</span>), <span class="at">sep=</span><span class="st">".Y ="</span>)</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4_adj <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(rho_glca4_adj, <span class="at">level=</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">"class"</span><span class="ot">=</span><span class="st">"variable"</span>)</span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4_adj<span class="ot">&lt;-</span> lcmodel_glca4_adj <span class="sc">%&gt;%</span> </span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pr=</span><span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"[^0-9.]+"</span>, <span class="st">""</span>, prob))) <span class="sc">%&gt;%</span> </span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(traductor_cats4[,<span class="fu">c</span>(<span class="st">"var"</span>, <span class="st">"lvl2"</span>, <span class="st">"label"</span>)] <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">var=</span> <span class="fu">paste0</span>(var, <span class="st">"_2"</span>)), <span class="at">by=</span> <span class="fu">c</span>(<span class="st">"var"</span><span class="ot">=</span><span class="st">"var"</span>, <span class="st">"pr"</span><span class="ot">=</span><span class="st">"lvl2"</span>))  </span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::mutate(CATEGORIA= dplyr::case_when(var=="AÑO" &amp; prob==" 1"~"Perdidos", T~CATEGORIA))</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4_adj<span class="sc">$</span>text_label<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">""</span>,lcmodel_glca4_adj<span class="sc">$</span>label,<span class="st">"&lt;br&gt;%: "</span>,scales<span class="sc">::</span><span class="fu">percent</span>(lcmodel_glca4_adj<span class="sc">$</span>value))</span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4_adj<span class="sc">$</span>text_label2<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">""</span>,lcmodel_glca4_adj<span class="sc">$</span>label,<span class="st">"</span><span class="sc">\n</span><span class="st"> "</span>,scales<span class="sc">::</span><span class="fu">percent</span>(lcmodel_glca4_adj<span class="sc">$</span>value))</span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(lcmodel_glca4_adj,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(var, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"sus_principal_mod_2"</span>, <span class="st">"otras_sus1_mod_2"</span>, <span class="st">"otras_sus2_mod_2"</span>,<span class="st">"freq_cons_sus_prin_2"</span>,<span class="st">"dg_trs_cons_sus_or_2"</span>), <span class="at">labels=</span> <span class="fu">c</span>(<span class="st">"Primary</span><span class="sc">\n</span><span class="st">substance"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(1)"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(2)"</span>,<span class="st">"Freq.Subs.Use"</span>,<span class="st">"Dg.Subs.Dep"</span>)), <span class="at">y =</span> value, <span class="at">fill =</span> <span class="fu">factor</span>(pr), <span class="at">label=</span>text_label))</span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>)</span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">facet_grid</span>(class <span class="sc">~</span> .) </span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">type=</span><span class="st">"seq"</span>, <span class="at">palette=</span><span class="st">"Greys"</span>, <span class="at">na.value =</span> <span class="st">"white"</span>) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Response probabilities"</span>, </span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a>                  <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb72-27"><a href="#cb72-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span><span class="st">"Respone/ncategories"</span>)</span>
<span id="cb72-28"><a href="#cb72-28" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">theme</span>( <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb72-29"><a href="#cb72-29" aria-hidden="true" tabindex="-1"></a>                    <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),                    </span>
<span id="cb72-30"><a href="#cb72-30" aria-hidden="true" tabindex="-1"></a>                    <span class="at">panel.grid.major.y=</span><span class="fu">element_blank</span>())</span>
<span id="cb72-31"><a href="#cb72-31" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse=</span><span class="cn">TRUE</span>))</span>
<span id="cb72-32"><a href="#cb72-32" aria-hidden="true" tabindex="-1"></a>zp332 <span class="ot">&lt;-</span> zp332 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb72-33"><a href="#cb72-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>)</span>
<span id="cb72-34"><a href="#cb72-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-35"><a href="#cb72-35" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(zp332, <span class="at">tooltip =</span> <span class="fu">c</span>(<span class="st">"text_label"</span>),<span class="at">height=</span><span class="dv">600</span>, <span class="at">width=</span><span class="dv">800</span>)<span class="sc">%&gt;%</span> plotly<span class="sc">::</span><span class="fu">layout</span>(<span class="at">xaxis=</span> <span class="fu">list</span>(<span class="at">showticklabels =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-c6926065a00fa7a91428" style="width:100%;height:487px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c6926065a00fa7a91428">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0,1,0.01,0.99],"x":[1,2,4,3],"y":[1,0,0.99,0.01],"text":["text_label: Alcohol<br>%: 100%","text_label: Licit<br>%: 0%","text_label: Hazardous consumption<br>%: 99%","text_label: none<br>%: 1%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0,1,0.8,1],"x":[1,2,4,3],"y":[1,0,0.2,0],"text":["text_label: Alcohol<br>%: 100%","text_label: Licit<br>%: 0%","text_label: Hazardous consumption<br>%: 20%","text_label: none<br>%: 0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[1,0.62,0.87,1],"x":[1,2,4,3],"y":[0,0.38,0.13,0],"text":["text_label: Alcohol<br>%: 0%","text_label: Licit<br>%: 38%","text_label: Hazardous consumption<br>%: 13%","text_label: none<br>%: 0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[1,0.39,0.03,0.98],"x":[1,2,4,3],"y":[0,0.61,0.97,0.02],"text":["text_label: Alcohol<br>%: 0%","text_label: Licit<br>%: 61%","text_label: Hazardous consumption<br>%: 97%","text_label: none<br>%: 2%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[1,0,0.81,1],"x":[1,2,4,3],"y":[0,1,0.19,0],"text":["text_label: Alcohol<br>%: 0%","text_label: Licit<br>%: 100%","text_label: Hazardous consumption<br>%: 19%","text_label: none<br>%: 0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":null,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0,0,0,0.89],"x":[1,2,4,3],"y":[0,1,0.01,0.1],"text":["text_label: Cocaine hydrochloride<br>%: 0%","text_label: Illicit<br>%: 100%","text_label: Drug dependence<br>%: 1%","text_label: Less than one day a week<br>%: 10%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0,0,0,0.97],"x":[1,2,4,3],"y":[0,1,0.8,0.03],"text":["text_label: Cocaine hydrochloride<br>%: 0%","text_label: Illicit<br>%: 100%","text_label: Drug dependence<br>%: 80%","text_label: Less than one day a week<br>%: 3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0,0,0,0.97],"x":[1,2,4,3],"y":[1,0.62,0.87,0.03],"text":["text_label: Cocaine hydrochloride<br>%: 100%","text_label: Illicit<br>%: 62%","text_label: Drug dependence<br>%: 87%","text_label: Less than one day a week<br>%: 3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0,0,0,0.79],"x":[1,2,4,3],"y":[1,0.39,0.03,0.19],"text":["text_label: Cocaine hydrochloride<br>%: 100%","text_label: Illicit<br>%: 39%","text_label: Drug dependence<br>%: 3%","text_label: Less than one day a week<br>%: 19%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9],"base":[0,0,0,0.96],"x":[1,2,4,3],"y":[1,0,0.81,0.04],"text":["text_label: Cocaine hydrochloride<br>%: 100%","text_label: Illicit<br>%: 0%","text_label: Drug dependence<br>%: 81%","text_label: Less than one day a week<br>%: 4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,204,204,1)","line":{"width":null,"color":"transparent"}},"name":"2","legendgroup":"2","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0.01,"x":[3],"y":[0.88],"text":"text_label: 1 to 3 days a week<br>%: 88%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0.63,"x":[3],"y":[0.34],"text":"text_label: 1 to 3 days a week<br>%: 34%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0.73,"x":[3],"y":[0.24],"text":"text_label: 1 to 3 days a week<br>%: 24%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[0.79],"text":"text_label: 1 to 3 days a week<br>%: 79%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0.6,"x":[3],"y":[0.36],"text":"text_label: 1 to 3 days a week<br>%: 36%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(150,150,150,1)","line":{"width":null,"color":"transparent"}},"name":"3","legendgroup":"3","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[0.01],"text":"text_label: 4+ days a week<br>%: 1%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[0.63],"text":"text_label: 4+ days a week<br>%: 63%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[0.73],"text":"text_label: 4+ days a week<br>%: 73%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[0],"text":"text_label: 4+ days a week<br>%: 0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[0.6],"text":"text_label: 4+ days a week<br>%: 60%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(82,82,82,1)","line":{"width":null,"color":"transparent"}},"name":"4","legendgroup":"4","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":37.4307458143075,"r":18.9954337899543,"b":25.0837138508371,"l":25.5707762557078},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,4.6],"tickmode":"array","ticktext":["Primary<br />substance","Other<br />subs(1)","Freq.Subs.Use","Dg.Subs.Dep"],"tickvals":[1,2,3,4],"categoryorder":"array","categoryarray":["Primary<br />substance","Other<br />subs(1)","Freq.Subs.Use","Dg.Subs.Dep"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-30,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"y5","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.809132420091324,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"annotations":[{"text":"Response probabilities","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-7.30593607305936},{"text":"Class1","x":1,"y":0.904566210045662,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class2","x":1,"y":0.7,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class3","x":1,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class4","x":1,"y":0.3,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"Class5","x":1,"y":0.0954337899543379,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"}],"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.809132420091324,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.809132420091324,"y1":1,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.609132420091324,"y1":0.790867579908676},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.609132420091324,"y1":0.790867579908676,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.409132420091324,"y1":0.590867579908676},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.409132420091324,"y1":0.590867579908676,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.209132420091324,"y1":0.390867579908676},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0.209132420091324,"y1":0.390867579908676,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.190867579908676},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"rgba(51,51,51,1)","width":0,"linetype":"solid"},"yref":"paper","xref":"paper","y0":0,"y1":0.190867579908676,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"}],"yaxis2":{"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.609132420091324,0.790867579908676],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.409132420091324,0.590867579908676],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0.209132420091324,0.390867579908676],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"domain":[0,0.190867579908676],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","width":800,"height":600,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"14bc716b1709":{"x":{},"y":{},"fill":{},"label":{},"type":"bar"}},"cur_data":"14bc716b1709","visdat":{"14bc716b1709":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Selected Model (adjusted)</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"_fig3_adj_LCA_distribuciones_glca_licit_illicit_adj_2.png"</span>,zp332, <span class="at">dpi=</span> <span class="dv">600</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4_adj <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"variables_probabilities_in_category_glca_licit_illicit_adj_2.xlsx"</span>)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>zp332b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(lcmodel_glca4_adj,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(var, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"sus_principal_mod_2"</span>, <span class="st">"otras_sus1_mod_2"</span>, <span class="st">"otras_sus2_mod_2"</span>,<span class="st">"freq_cons_sus_prin_2"</span>,<span class="st">"dg_trs_cons_sus_or_2"</span>), <span class="at">labels=</span> <span class="fu">c</span>(<span class="st">"Primary</span><span class="sc">\n</span><span class="st">substance"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(1)"</span>, <span class="st">"Other</span><span class="sc">\n</span><span class="st">subs(2)"</span>,<span class="st">"Freq.Subs.Use"</span>,<span class="st">"Dg.Subs.Dep"</span>)), <span class="at">y =</span> value, <span class="at">fill =</span> <span class="fu">factor</span>(pr), <span class="at">label=</span>text_label2))</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>zp332b <span class="ot">&lt;-</span> zp332b <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>)</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>zp332b <span class="ot">&lt;-</span> zp332b <span class="sc">+</span> <span class="fu">facet_grid</span>(class <span class="sc">~</span> .) </span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>zp332b <span class="ot">&lt;-</span> zp332b <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">type=</span><span class="st">"seq"</span>, <span class="at">palette=</span><span class="st">"Greys"</span>, <span class="at">na.value =</span> <span class="st">"white"</span>) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>zp332b <span class="ot">&lt;-</span> zp332b <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Response probabilities"</span>, </span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span><span class="st">"Respone/ncategories"</span>)</span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>zp332b <span class="ot">&lt;-</span> zp332b <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">paste0</span>(<span class="st">"grey"</span>,<span class="fu">seq</span>(<span class="dv">20</span>,<span class="dv">80</span>, <span class="at">by=</span><span class="dv">60</span><span class="sc">/</span><span class="dv">6</span>))) <span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>zp332b <span class="ot">&lt;-</span> zp332b <span class="sc">+</span> <span class="fu">theme</span>( <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>                    <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>(),                    </span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>                    <span class="at">panel.grid.major.y=</span><span class="fu">element_blank</span>())</span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>zp332b <span class="ot">&lt;-</span> zp332b <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse=</span><span class="cn">TRUE</span>))</span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>zp332b <span class="ot">&lt;-</span> zp332b <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>)</span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"zp323.png"</span>, </span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>       zp332b<span class="sc">+</span> ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="co">#aes(#y=half, label=lab),</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">max.iter =</span> <span class="fl">1e6</span>,</span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>)<span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span> <span class="st">"none"</span>), </span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">height=</span><span class="dv">13</span>)<span class="co">#, fill = "white" --&gt; dentro de label repel</span></span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-29"><a href="#cb73-29" aria-hidden="true" tabindex="-1"></a>lcmodel_glca4_adj <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>( class, var, label, value) <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"tab_cond_pr_licit_illicit_adj_2.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
</section>
<section id="bivariate-1" class="level4">
<h4 class="anchored" data-anchor-id="bivariate-1">Bivariate</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>variables_comp3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"porc_pobr"</span>,</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"clas_r"</span>,</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>               <span class="st">"fis_comorbidity_icd_10"</span>,</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">"edad_b_ap_top_num"</span>,</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">"comorbidity_icd_10"</span>,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"con_quien_vive_joel"</span>,</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>               <span class="st">"sus_ini_mod"</span>,</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>               <span class="st">"estado_conyugal_2"</span>,</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>               <span class="st">"compromiso_biopsicosocial"</span>,</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>               <span class="st">"macrozona"</span>,</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>               <span class="st">"escolaridad_rec"</span>,</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>               <span class="st">"event_comp"</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>               )     </span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>tbone_desc_merge_grant_23_24_licit_illicit_2<span class="ot">&lt;-</span></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a><span class="fu">CreateTableOne</span>(<span class="at">vars=</span> variables_comp3, </span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">data=</span>  <span class="fu">cbind.data.frame</span>(<span class="fu">subset</span>(Base_fiscalia_v16_grant_23_24, <span class="sc">!</span><span class="fu">is.na</span>(otras_sus1_mod)) <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"sus_principal_mod"</span>, <span class="st">"otras_sus1_mod"</span>, <span class="st">"otras_sus2_mod"</span>,<span class="st">"dg_trs_cons_sus_or"</span>,<span class="st">"freq_cons_sus_prin"</span>), <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(.)<span class="sc">~</span> <span class="st">"none"</span>, <span class="cn">TRUE</span><span class="sc">~</span> .))) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>sus_principal_mod<span class="sc">==</span><span class="st">"Other"</span>,  <span class="sc">!</span>otras_sus1_mod<span class="sc">==</span><span class="st">"Other"</span>, <span class="sc">!</span>otras_sus2_mod<span class="sc">==</span><span class="st">"Other"</span>),</span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a><span class="at">final_07=</span>posterior_glca4_07_final<span class="sc">$</span>final_07, <span class="at">final_05=</span>posterior_glca4_05_final<span class="sc">$</span>final_05) <span class="sc">%&gt;%</span></span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">event_comp=</span> <span class="fu">factor</span>(event_comp, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Completion"</span>, <span class="st">"Non-completion"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">final_05=</span><span class="fu">factor</span>(final_05, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"C1: Hazardous Alcohol</span><span class="sc">\n</span><span class="st">+ Illicit User"</span>, <span class="st">"C2: Alcohol/Cocaine paste</span><span class="sc">\n</span><span class="st"> Frequent Dependence+ Heavy Illicit 2nd use"</span>, <span class="st">"C3: Frequent Dependence of Snort Cocaine </span><span class="sc">\n</span><span class="st">&amp; Cocaine paste +Illicit Secondary Subtance"</span>, <span class="st">"C4: Regular cocaine hydrochloride</span><span class="sc">\n</span><span class="st">+ Licit 2nd Substance Use"</span>, <span class="st">"C5: Frequent Hazardous Cocaine paste, Snort</span><span class="sc">\n</span><span class="st">Cocaine &amp; Marijuana Use + Licit 2nd substance"</span>))), </span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">factorVars =</span> <span class="fu">setdiff</span>(variables_comp3, <span class="fu">c</span>(<span class="st">"edad_b_ap_top_num"</span>, <span class="st">"porc_pobr"</span>)), </span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">smd=</span>T, </span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">strata=</span><span class="st">"final_05"</span>, </span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">addOverall =</span> T, </span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">includeNA=</span>T, </span>
<span id="cb74-26"><a href="#cb74-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">test=</span>T)<span class="co">#</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">#define a table</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame.TableOne</span>(tbone_desc_merge_grant_23_24_licit_illicit_2, <span class="at">smd=</span><span class="cn">TRUE</span>, <span class="at">nonnormal=</span> <span class="cn">TRUE</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">char2=</span>characteristic) <span class="sc">%&gt;%</span> </span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">fill</span>(char2) <span class="sc">%&gt;%</span> </span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(char2,<span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">level=</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(level),<span class="st">"[Missing]"</span>,level)) <span class="sc">%&gt;%</span> </span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">char2=</span>dplyr<span class="sc">::</span><span class="fu">case_when</span>(characteristic<span class="sc">==</span><span class="st">"NA"</span><span class="sc">~</span><span class="cn">NA_character_</span>,<span class="cn">TRUE</span><span class="sc">~</span><span class="fu">as.character</span>(characteristic))) <span class="sc">%&gt;%</span> </span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_cells</span>(<span class="dv">1</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">names</span>(.)), <span class="st">"bold"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">format=</span><span class="st">"html"</span>,<span class="at">caption=</span> <span class="st">"Summary descriptives, Latent classes"</span>, <span class="at">escape=</span>T) <span class="sc">%&gt;%</span> </span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"500px"</span>, <span class="at">height =</span> <span class="st">"400px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>fill: changed 29 values (69%) of ‘characteristic’ (29 fewer NA)</p>
</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:500px; ">
<table class="lightable-classic table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Summary descriptives, Latent classes</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">characteristic</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">level</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Overall</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C1: Hazardous Alcohol + Illicit User</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C2: Alcohol/Cocaine paste Frequent Dependence+ Heavy Illicit 2nd use</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C3: Frequent Dependence of Snort Cocaine &amp; Cocaine paste +Illicit Secondary Subtance</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C4: Regular cocaine hydrochloride + Licit 2nd Substance Use</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">C5: Frequent Hazardous Cocaine paste, Snort Cocaine &amp; Marijuana Use + Licit 2nd substance</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">p</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">test</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">SMD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">**n**</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">**39680**</td>
<td style="text-align: left;">**5185**</td>
<td style="text-align: left;">**3819**</td>
<td style="text-align: left;">**18871**</td>
<td style="text-align: left;">**4979**</td>
<td style="text-align: left;">**3304**</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">porc_pobr (median [IQR])</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.09 [0.06, 0.14]</td>
<td style="text-align: left;">0.09 [0.06, 0.14]</td>
<td style="text-align: left;">0.09 [0.06, 0.13]</td>
<td style="text-align: left;">0.09 [0.07, 0.14]</td>
<td style="text-align: left;">0.09 [0.06, 0.12]</td>
<td style="text-align: left;">0.09 [0.06, 0.13]</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">nonnorm</td>
<td style="text-align: left;">0.082</td>
</tr>
<tr class="odd">
<td style="text-align: left;">clas_r (%)</td>
<td style="text-align: left;">Mixta</td>
<td style="text-align: left;">3862 ( 9.7)</td>
<td style="text-align: left;">669 (12.9)</td>
<td style="text-align: left;">355 ( 9.3)</td>
<td style="text-align: left;">1626 ( 8.6)</td>
<td style="text-align: left;">449 ( 9.0)</td>
<td style="text-align: left;">420 (12.7)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.160</td>
</tr>
<tr class="even">
<td style="text-align: left;">clas_r (%)</td>
<td style="text-align: left;">Rural</td>
<td style="text-align: left;">2778 ( 7.0)</td>
<td style="text-align: left;">560 (10.8)</td>
<td style="text-align: left;">328 ( 8.6)</td>
<td style="text-align: left;">1125 ( 6.0)</td>
<td style="text-align: left;">227 ( 4.6)</td>
<td style="text-align: left;">318 ( 9.6)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">clas_r (%)</td>
<td style="text-align: left;">Urbana</td>
<td style="text-align: left;">33040 (83.3)</td>
<td style="text-align: left;">3956 (76.3)</td>
<td style="text-align: left;">3136 (82.1)</td>
<td style="text-align: left;">16120 (85.4)</td>
<td style="text-align: left;">4303 (86.4)</td>
<td style="text-align: left;">2566 (77.7)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">fis_comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Without physical comorbidity</td>
<td style="text-align: left;">14982 (37.8)</td>
<td style="text-align: left;">1952 (37.6)</td>
<td style="text-align: left;">1251 (32.8)</td>
<td style="text-align: left;">7143 (37.9)</td>
<td style="text-align: left;">2102 (42.2)</td>
<td style="text-align: left;">1232 (37.3)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.151</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fis_comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Diagnosis unknown (under study)</td>
<td style="text-align: left;">22550 (56.8)</td>
<td style="text-align: left;">2956 (57.0)</td>
<td style="text-align: left;">2187 (57.3)</td>
<td style="text-align: left;">10669 (56.5)</td>
<td style="text-align: left;">2654 (53.3)</td>
<td style="text-align: left;">1972 (59.7)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">fis_comorbidity_icd_10 (%)</td>
<td style="text-align: left;">One or more</td>
<td style="text-align: left;">2148 ( 5.4)</td>
<td style="text-align: left;">277 ( 5.3)</td>
<td style="text-align: left;">381 (10.0)</td>
<td style="text-align: left;">1059 ( 5.6)</td>
<td style="text-align: left;">223 ( 4.5)</td>
<td style="text-align: left;">100 ( 3.0)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">edad_b_ap_top_num (median [IQR])</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">32.64 [26.75, 39.25]</td>
<td style="text-align: left;">35.47 [29.07, 43.04]</td>
<td style="text-align: left;">39.84 [31.39, 48.60]</td>
<td style="text-align: left;">32.34 [26.59, 38.09]</td>
<td style="text-align: left;">32.55 [27.03, 37.48]</td>
<td style="text-align: left;">30.77 [25.48, 37.96]</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">nonnorm</td>
<td style="text-align: left;">0.368</td>
</tr>
<tr class="even">
<td style="text-align: left;">comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Diagnosis unknown (under study)</td>
<td style="text-align: left;">8465 (21.3)</td>
<td style="text-align: left;">895 (17.3)</td>
<td style="text-align: left;">690 (18.1)</td>
<td style="text-align: left;">4496 (23.8)</td>
<td style="text-align: left;">958 (19.2)</td>
<td style="text-align: left;">609 (18.4)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.145</td>
</tr>
<tr class="odd">
<td style="text-align: left;">comorbidity_icd_10 (%)</td>
<td style="text-align: left;">One</td>
<td style="text-align: left;">16332 (41.2)</td>
<td style="text-align: left;">2116 (40.8)</td>
<td style="text-align: left;">1735 (45.4)</td>
<td style="text-align: left;">7913 (41.9)</td>
<td style="text-align: left;">1904 (38.2)</td>
<td style="text-align: left;">1388 (42.0)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Two or more</td>
<td style="text-align: left;">808 ( 2.0)</td>
<td style="text-align: left;">93 ( 1.8)</td>
<td style="text-align: left;">109 ( 2.9)</td>
<td style="text-align: left;">449 ( 2.4)</td>
<td style="text-align: left;">79 ( 1.6)</td>
<td style="text-align: left;">36 ( 1.1)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">comorbidity_icd_10 (%)</td>
<td style="text-align: left;">Without psychiatric comorbidity</td>
<td style="text-align: left;">14075 (35.5)</td>
<td style="text-align: left;">2081 (40.1)</td>
<td style="text-align: left;">1285 (33.6)</td>
<td style="text-align: left;">6013 (31.9)</td>
<td style="text-align: left;">2038 (40.9)</td>
<td style="text-align: left;">1271 (38.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">con_quien_vive_joel (%)</td>
<td style="text-align: left;">Alone</td>
<td style="text-align: left;">3337 ( 8.4)</td>
<td style="text-align: left;">526 (10.1)</td>
<td style="text-align: left;">527 (13.8)</td>
<td style="text-align: left;">1588 ( 8.4)</td>
<td style="text-align: left;">269 ( 5.4)</td>
<td style="text-align: left;">230 ( 7.0)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.236</td>
</tr>
<tr class="odd">
<td style="text-align: left;">con_quien_vive_joel (%)</td>
<td style="text-align: left;">Family of origin</td>
<td style="text-align: left;">18217 (45.9)</td>
<td style="text-align: left;">2019 (38.9)</td>
<td style="text-align: left;">1534 (40.2)</td>
<td style="text-align: left;">9318 (49.4)</td>
<td style="text-align: left;">2102 (42.2)</td>
<td style="text-align: left;">1521 (46.0)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">con_quien_vive_joel (%)</td>
<td style="text-align: left;">Others</td>
<td style="text-align: left;">3520 ( 8.9)</td>
<td style="text-align: left;">400 ( 7.7)</td>
<td style="text-align: left;">472 (12.4)</td>
<td style="text-align: left;">1794 ( 9.5)</td>
<td style="text-align: left;">303 ( 6.1)</td>
<td style="text-align: left;">271 ( 8.2)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">con_quien_vive_joel (%)</td>
<td style="text-align: left;">With couple/children</td>
<td style="text-align: left;">14606 (36.8)</td>
<td style="text-align: left;">2240 (43.2)</td>
<td style="text-align: left;">1286 (33.7)</td>
<td style="text-align: left;">6171 (32.7)</td>
<td style="text-align: left;">2305 (46.3)</td>
<td style="text-align: left;">1282 (38.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Alcohol</td>
<td style="text-align: left;">21988 (55.4)</td>
<td style="text-align: left;">4302 (83.0)</td>
<td style="text-align: left;">3088 (80.9)</td>
<td style="text-align: left;">8768 (46.5)</td>
<td style="text-align: left;">2860 (57.4)</td>
<td style="text-align: left;">1809 (54.8)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.497</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Cocaína</td>
<td style="text-align: left;">1512 ( 3.8)</td>
<td style="text-align: left;">71 ( 1.4)</td>
<td style="text-align: left;">57 ( 1.5)</td>
<td style="text-align: left;">766 ( 4.1)</td>
<td style="text-align: left;">383 ( 7.7)</td>
<td style="text-align: left;">104 ( 3.1)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Marihuana</td>
<td style="text-align: left;">13855 (34.9)</td>
<td style="text-align: left;">693 (13.4)</td>
<td style="text-align: left;">558 (14.6)</td>
<td style="text-align: left;">7892 (41.8)</td>
<td style="text-align: left;">1604 (32.2)</td>
<td style="text-align: left;">1170 (35.4)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Otros</td>
<td style="text-align: left;">647 ( 1.6)</td>
<td style="text-align: left;">44 ( 0.8)</td>
<td style="text-align: left;">53 ( 1.4)</td>
<td style="text-align: left;">388 ( 2.1)</td>
<td style="text-align: left;">57 ( 1.1)</td>
<td style="text-align: left;">53 ( 1.6)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">Pasta Base</td>
<td style="text-align: left;">1549 ( 3.9)</td>
<td style="text-align: left;">50 ( 1.0)</td>
<td style="text-align: left;">45 ( 1.2)</td>
<td style="text-align: left;">1017 ( 5.4)</td>
<td style="text-align: left;">55 ( 1.1)</td>
<td style="text-align: left;">160 ( 4.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">sus_ini_mod (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">129 ( 0.3)</td>
<td style="text-align: left;">25 ( 0.5)</td>
<td style="text-align: left;">18 ( 0.5)</td>
<td style="text-align: left;">40 ( 0.2)</td>
<td style="text-align: left;">20 ( 0.4)</td>
<td style="text-align: left;">8 ( 0.2)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">Married/Shared living arrangements</td>
<td style="text-align: left;">12022 (30.3)</td>
<td style="text-align: left;">1876 (36.2)</td>
<td style="text-align: left;">1149 (30.1)</td>
<td style="text-align: left;">5102 (27.0)</td>
<td style="text-align: left;">1846 (37.1)</td>
<td style="text-align: left;">1019 (30.8)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.196</td>
</tr>
<tr class="odd">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">Separated/Divorced</td>
<td style="text-align: left;">3401 ( 8.6)</td>
<td style="text-align: left;">543 (10.5)</td>
<td style="text-align: left;">571 (15.0)</td>
<td style="text-align: left;">1434 ( 7.6)</td>
<td style="text-align: left;">398 ( 8.0)</td>
<td style="text-align: left;">241 ( 7.3)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">Single</td>
<td style="text-align: left;">23960 (60.4)</td>
<td style="text-align: left;">2717 (52.4)</td>
<td style="text-align: left;">2052 (53.7)</td>
<td style="text-align: left;">12199 (64.6)</td>
<td style="text-align: left;">2712 (54.5)</td>
<td style="text-align: left;">2019 (61.1)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">Widower</td>
<td style="text-align: left;">249 ( 0.6)</td>
<td style="text-align: left;">38 ( 0.7)</td>
<td style="text-align: left;">41 ( 1.1)</td>
<td style="text-align: left;">118 ( 0.6)</td>
<td style="text-align: left;">18 ( 0.4)</td>
<td style="text-align: left;">20 ( 0.6)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">estado_conyugal_2 (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">48 ( 0.1)</td>
<td style="text-align: left;">11 ( 0.2)</td>
<td style="text-align: left;">6 ( 0.2)</td>
<td style="text-align: left;">18 ( 0.1)</td>
<td style="text-align: left;">5 ( 0.1)</td>
<td style="text-align: left;">5 ( 0.2)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">compromiso_biopsicosocial (%)</td>
<td style="text-align: left;">1-Mild</td>
<td style="text-align: left;">2784 ( 7.0)</td>
<td style="text-align: left;">703 (13.6)</td>
<td style="text-align: left;">143 ( 3.7)</td>
<td style="text-align: left;">555 ( 2.9)</td>
<td style="text-align: left;">645 (13.0)</td>
<td style="text-align: left;">457 (13.8)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.469</td>
</tr>
<tr class="even">
<td style="text-align: left;">compromiso_biopsicosocial (%)</td>
<td style="text-align: left;">2-Moderate</td>
<td style="text-align: left;">22773 (57.4)</td>
<td style="text-align: left;">3612 (69.7)</td>
<td style="text-align: left;">1984 (52.0)</td>
<td style="text-align: left;">9230 (48.9)</td>
<td style="text-align: left;">3325 (66.8)</td>
<td style="text-align: left;">2274 (68.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">compromiso_biopsicosocial (%)</td>
<td style="text-align: left;">3-Severe</td>
<td style="text-align: left;">13382 (33.7)</td>
<td style="text-align: left;">756 (14.6)</td>
<td style="text-align: left;">1641 (43.0)</td>
<td style="text-align: left;">8801 (46.6)</td>
<td style="text-align: left;">876 (17.6)</td>
<td style="text-align: left;">475 (14.4)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">compromiso_biopsicosocial (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">741 ( 1.9)</td>
<td style="text-align: left;">114 ( 2.2)</td>
<td style="text-align: left;">51 ( 1.3)</td>
<td style="text-align: left;">285 ( 1.5)</td>
<td style="text-align: left;">133 ( 2.7)</td>
<td style="text-align: left;">98 ( 3.0)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">macrozona (%)</td>
<td style="text-align: left;">Center</td>
<td style="text-align: left;">30550 (77.0)</td>
<td style="text-align: left;">3768 (72.7)</td>
<td style="text-align: left;">2788 (73.0)</td>
<td style="text-align: left;">14518 (76.9)</td>
<td style="text-align: left;">4504 (90.5)</td>
<td style="text-align: left;">2363 (71.5)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.340</td>
</tr>
<tr class="even">
<td style="text-align: left;">macrozona (%)</td>
<td style="text-align: left;">North</td>
<td style="text-align: left;">6295 (15.9)</td>
<td style="text-align: left;">687 (13.2)</td>
<td style="text-align: left;">522 (13.7)</td>
<td style="text-align: left;">3384 (17.9)</td>
<td style="text-align: left;">200 ( 4.0)</td>
<td style="text-align: left;">742 (22.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">macrozona (%)</td>
<td style="text-align: left;">South</td>
<td style="text-align: left;">2825 ( 7.1)</td>
<td style="text-align: left;">728 (14.0)</td>
<td style="text-align: left;">508 (13.3)</td>
<td style="text-align: left;">967 ( 5.1)</td>
<td style="text-align: left;">275 ( 5.5)</td>
<td style="text-align: left;">196 ( 5.9)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">macrozona (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">10 ( 0.0)</td>
<td style="text-align: left;">2 ( 0.0)</td>
<td style="text-align: left;">1 ( 0.0)</td>
<td style="text-align: left;">2 ( 0.0)</td>
<td style="text-align: left;">0 ( 0.0)</td>
<td style="text-align: left;">3 ( 0.1)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">escolaridad_rec (%)</td>
<td style="text-align: left;">1-More than high school</td>
<td style="text-align: left;">7101 (17.9)</td>
<td style="text-align: left;">1090 (21.0)</td>
<td style="text-align: left;">828 (21.7)</td>
<td style="text-align: left;">2942 (15.6)</td>
<td style="text-align: left;">1169 (23.5)</td>
<td style="text-align: left;">583 (17.6)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.166</td>
</tr>
<tr class="even">
<td style="text-align: left;">escolaridad_rec (%)</td>
<td style="text-align: left;">2-Completed high school or less</td>
<td style="text-align: left;">22804 (57.5)</td>
<td style="text-align: left;">2866 (55.3)</td>
<td style="text-align: left;">1994 (52.2)</td>
<td style="text-align: left;">10864 (57.6)</td>
<td style="text-align: left;">2997 (60.2)</td>
<td style="text-align: left;">1963 (59.4)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">escolaridad_rec (%)</td>
<td style="text-align: left;">3-Completed primary school or less</td>
<td style="text-align: left;">9656 (24.3)</td>
<td style="text-align: left;">1202 (23.2)</td>
<td style="text-align: left;">982 (25.7)</td>
<td style="text-align: left;">5021 (26.6)</td>
<td style="text-align: left;">799 (16.0)</td>
<td style="text-align: left;">743 (22.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">escolaridad_rec (%)</td>
<td style="text-align: left;">[Missing]</td>
<td style="text-align: left;">119 ( 0.3)</td>
<td style="text-align: left;">27 ( 0.5)</td>
<td style="text-align: left;">15 ( 0.4)</td>
<td style="text-align: left;">44 ( 0.2)</td>
<td style="text-align: left;">14 ( 0.3)</td>
<td style="text-align: left;">15 ( 0.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">event_comp (%)</td>
<td style="text-align: left;">Completion</td>
<td style="text-align: left;">7461 (18.8)</td>
<td style="text-align: left;">1241 (23.9)</td>
<td style="text-align: left;">871 (22.8)</td>
<td style="text-align: left;">3244 (17.2)</td>
<td style="text-align: left;">952 (19.1)</td>
<td style="text-align: left;">641 (19.4)</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">0.085</td>
</tr>
<tr class="even">
<td style="text-align: left;">event_comp (%)</td>
<td style="text-align: left;">Non-completion</td>
<td style="text-align: left;">32219 (81.2)</td>
<td style="text-align: left;">3944 (76.1)</td>
<td style="text-align: left;">2948 (77.2)</td>
<td style="text-align: left;">15627 (82.8)</td>
<td style="text-align: left;">4027 (80.9)</td>
<td style="text-align: left;">2663 (80.6)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame.TableOne</span>(tbone_desc_merge_grant_23_24_licit_illicit_2, <span class="at">smd=</span><span class="cn">TRUE</span>, <span class="at">nonnormal=</span> <span class="cn">TRUE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">char2=</span>characteristic) <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">fill</span>(char2) <span class="sc">%&gt;%</span> </span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(char2,<span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">level=</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(level),<span class="st">"[Missing]"</span>,level)) <span class="sc">%&gt;%</span> </span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">char2=</span>dplyr<span class="sc">::</span><span class="fu">case_when</span>(characteristic<span class="sc">==</span><span class="st">"NA"</span><span class="sc">~</span><span class="cn">NA_character_</span>,<span class="cn">TRUE</span><span class="sc">~</span> <span class="fu">as.character</span>(characteristic))) <span class="sc">%&gt;%</span> </span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_cells</span>(<span class="dv">1</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">names</span>(.)), <span class="st">"bold"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> rio<span class="sc">::</span><span class="fu">export</span>(<span class="st">"tab_car_licit_illicit_2.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>fill: changed 29 values (69%) of ‘characteristic’ (29 fewer NA)</p>
</div>
</div>
<!---
#https://chat.openai.com/share/5849496c-2bd7-447f-9820-7ebfdeb0de3c 
--->
<ul>
<li><p><strong>C1: Hazardous Alcohol + Illicit User</strong>= Represents a higher proportion of urban dwellers (76.3%). 83% started with alcohol. Majority (69.7%) has moderate biopsychosocial compromise. Over half (55.3%) have completed high school or less. 76.1% non-completion rate for “event_comp”.</p></li>
<li><p><strong>C2: Alcohol/Cocaine paste Frequent Dependence+ Heavy Illicit 2nd use</strong>= High illicit secondary substance use, alongside alcohol and cocaine paste. Majority (82.1%) are urban dwellers. Majority (57.3%) under “fis_comorbidity_icd_10” are under study. Age tends to be higher with a median of 39.84. 43% have severe biopsychosocial compromise. Majority (52.2%) have completed high school or less.</p></li>
<li><p><strong>C3: Frequent Dependence of Snort Cocaine &amp; Cocaine paste + Illicit Secondary Substance</strong>= High proportion (85.4%) of urban dwellers. Significant use of snorted cocaine, cocaine paste, and other illicit substances. 46.5% started with alcohol, while 41.8% started with marijuana. Majority (48.9%) has moderate biopsychosocial compromise. High percentage (64.6%) are single. Majority (57.6%) have completed high school or less.</p></li>
<li><p><strong>Class C4: Regular cocaine hydrochloride + Licit 2nd Substance Use </strong>= Primarily use cocaine hydrochloride and have a licit second substance of choice. Highest urban dwelling proportion (86.4%). 57.4% started with alcohol. Majority (66.8%) has moderate biopsychosocial compromise. Majority (60.2%) have completed high school or less. 80.9% non-completion rate for “event_comp”.</p></li>
<li><p><strong>Class C5: Frequent Hazardous Cocaine paste, Snort Cocaine &amp; Marijuana Use + Licit 2nd substance</strong>= Varied substance use, with frequent hazardous consumption patterns for cocaine paste, snorted cocaine, and marijuana. 77.7% urban dwellers. Majority (59.7%) under “fis_comorbidity_icd_10” are under study. 54.8% started with alcohol. Majority (68.8%) has moderate biopsychosocial compromise. Majority (59.4%) have completed high school or less. 80.6% non-completion rate for “event_comp”.</p></li>
</ul>
<p><br></p>
</section>
</section>
<section id="imputation-and-export" class="level1">
<h1>Imputation and export</h1>
<div class="controlly">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(missRanger)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::filter(dplyr::case_when(!motivodeegreso_mod_imp_1 %in% c("Derivación","En curso") &amp; !is.na(tot_off_top)~T,T~F))</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co">#if(exists("no_mostrar")){</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">2125</span>)</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>Base_fiscalia_v16_grant_23_24_miss <span class="ot">&lt;-</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>  Base_fiscalia_v16_grant_23_24 <span class="sc">%&gt;%</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::filter(dplyr::case_when(!motivodeegreso_mod_imp_1 %in% c("Derivación","En curso") &amp; !is.na(tot_off_top)~T,T~F)) %&gt;% </span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(hash_key, edad_al_ing_1) <span class="sc">%&gt;%</span> </span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>     missRanger<span class="sc">::</span><span class="fu">missRanger</span>(</span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">formula =</span> porc_pobr<span class="sc">+</span> clas_r <span class="sc">+</span> fis_comorbidity_icd_10 <span class="sc">+</span> edad_b_ap_top_num <span class="sc">+</span> comorbidity_icd_10 <span class="sc">+</span> con_quien_vive_joel <span class="sc">+</span> sus_ini_mod <span class="sc">+</span> estado_conyugal_2 <span class="sc">+</span> compromiso_biopsicosocial <span class="sc">+</span> macrozona <span class="sc">+</span> escolaridad_rec <span class="sc">+</span>  <span class="er">~</span> . <span class="sc">-</span> hash_key <span class="sc">-</span>offender_d <span class="sc">-</span> age_tr_comp_imp,</span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">num.trees =</span> <span class="dv">200</span>, </span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">pmm.k =</span> <span class="dv">3</span>,                </span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">returnOOB=</span>T,</span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">maxiter=</span> <span class="dv">50</span>,</span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">verbose =</span> <span class="dv">2</span>, </span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">seed =</span> <span class="dv">2125</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Missing value imputation by random forests</code></pre>
</div>
<div class="alert alert-danger">
<p>Error in missRanger::missRanger(., formula = porc_pobr + clas_r + fis_comorbidity_icd_10 + : dim(data) &gt;= 1L are not all TRUE</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">#should drop:</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># event_offense age_dropout_imp event_comp age_at_censor_date time_to_off_from_adm time_to_drop_from_adm edad_comision_imp fec_comision_simple_2 relacion_vifsaf_2</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  values_pris<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.0013</span>, <span class="fl">0.0053</span>, <span class="fl">0.0000</span>, <span class="fl">0.0000</span>, <span class="fl">0.0000</span>, <span class="fl">0.0158</span>, <span class="fl">0.0000</span>, <span class="fl">0.0000</span>, <span class="fl">0.0000</span>, <span class="fl">0.0000</span>, <span class="fl">6e-04</span>, <span class="fl">0.0024</span>, <span class="fl">0.0024</span>, <span class="fl">5e-04</span>, <span class="fl">0.0285</span>)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"Mdn= "</span>,<span class="fu">median</span>(values_pris),<span class="st">" Q1= "</span>,<span class="fu">quantile</span>(values_pris,.<span class="dv">25</span>),<span class="st">", Q3= "</span>, <span class="fu">quantile</span>(values_pris, .<span class="dv">75</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mdn= 5e-04 Q1= 0, Q3= 0.0024"</code></pre>
</div>
</div>
</div>
<!---
Depresores: Retardan el funcionamiento del cerebro, adormeciéndolo, y pueden generar desde inhibición hasta coma. Aquí se incluyen el alcohol, los tranquilizantes y la heroína.
Estimulantes: Aceleran el funcionamiento del cerebro. Ejemplos: anfetaminas, cocaína, pasta base, cafeína y nicotina.
Perturbadores: Alteran el funcionamiento del cerebro, provocando alucinaciones y distorsión de la realidad. Entre ellos están la marihuana, el éxtasis y el LSD.
--->
<p><br></p>
</section>
<section id="export" class="level1">
<h1>Export</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">#2023-01-01 we had a problem with edad_al_ing_fmt. This variable predict better (it had lower amount of missing data and was in wide format)</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="co">#cont_vars_desc[1]&lt;-ifelse(cont_vars_desc[1]=="edad_al_ing_fmt","edad_al_ing_1",cont_vars_desc[1])</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>Base_fiscalia_v16_grant_23_24 <span class="sc">%&gt;%</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a> <span class="co"># dplyr::filter(dplyr::case_when(!motivodeegreso_mod_imp_1 %in% c("Derivación","En curso") &amp; !is.na(tot_off_top)~T,T~F)) %&gt;% </span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(hash_key, fech_ing_num_1)  <span class="sc">%&gt;%</span> </span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">data.table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>  rio<span class="sc">::</span><span class="fu">export</span>(<span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"an_grant_23_24.dta"</span>))</span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a><span class="co"># IMPUTATION</span></span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a><span class="co">#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:</span></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a><span class="co">#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:</span></span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>Base_fiscalia_v16_grant_23_24_miss <span class="sc">%&gt;%</span> </span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(hash_key, fech_ing_num_1)  <span class="sc">%&gt;%</span> </span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">data.table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a>  rio<span class="sc">::</span><span class="fu">export</span>(<span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"an_grant_23_24_miss.dta"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="alert alert-danger">
<p>Error in dplyr::arrange(., hash_key, fech_ing_num_1): objeto ‘Base_fiscalia_v16_grant_23_24_miss’ no encontrado</p>
</div>
</div>
<p><br></p>
</section>
<section id="adjusted-logistic-regression" class="level1">
<h1>Adjusted Logistic regression</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Our simulation-based approach to the estimation of mediation effects enables users to deal with missing data via standard multiple imputation procedures in a straightforward fashion. The mediation package includes a pair of utility functions – mediations and amelidiate– to facilitate such analysis. First, users simulate multiple data sets using their preferredimputation software. Next, run mediate on each data set by simply passing the data setsthrough mediations. Next, pass the output of mediations to the amelidiate function, which combines the components of the output from mediations into a format that can be analyzed with the standard summary and plot commands.5 Alternatively, users can manually run mediate on their imputed data sets and simply stack the vectors of quantities they are interested in, and use basic functions like quantile to calculate confidence intervals.</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co">#, sims = 100        Simulations: 100</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(<span class="st">"MatchIt"</span>)</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Base_fiscalia_v16_grant_23_24 %&gt;%</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  dplyr::filter(dplyr::case_when(!motivodeegreso_mod_imp_1 %in% c("Derivación","En curso") &amp; !is.na(tot_off_top)~T,T~F))</span></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>variables_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"sex"</span>, <span class="st">"edad_ini_cons"</span>, <span class="st">"escolaridad_rec"</span>, <span class="st">"condicion_ocupacional_corr"</span>, <span class="st">"num_hijos_mod_joel_bin"</span>, <span class="st">"tenencia_de_la_vivienda_mod"</span>, <span class="st">"macrozona"</span>, <span class="st">"n_off_vio"</span>, <span class="st">"n_off_acq"</span>, <span class="st">"n_off_sud"</span>, <span class="st">"n_off_oth"</span>, <span class="st">"dg_cie_10_rec"</span>, <span class="st">"dg_trs_cons_sus_or"</span>, <span class="st">"clas_r"</span>, <span class="st">"porc_pobr"</span>, <span class="st">"sus_ini_mod_mvv"</span>, <span class="st">"ano_nac_corr"</span>, <span class="st">"con_quien_vive_joel"</span>, <span class="st">"fis_comorbidity_icd_10"</span>, <span class="st">"n_off_vict"</span>)</span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a><span class="co">#edad_ini_cons macrozona estado_conyugal_2  con_quien_vive   numero_de_hijos_mod origen_ingreso_mod  tenencia_de_la_vivienda_mod rubro_trabaja_mod  condicion_ocupacional_corr     </span></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a><span class="co">#mot_egres_mod_imp_rec_num     </span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a><span class="co">#clasificacion                 </span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a><span class="co">#porc_pobr</span></span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a><span class="co">#numero_de_hijos_mod_joel</span></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a><span class="co">#ano_nac_corr </span></span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true" tabindex="-1"></a><span class="co">#num_hijos_mod_joel_bin</span></span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true" tabindex="-1"></a><span class="co">#fis_comorbidity_icd_10</span></span>
<span id="cb82-19"><a href="#cb82-19" aria-hidden="true" tabindex="-1"></a><span class="co">#clas_r</span></span>
<span id="cb82-20"><a href="#cb82-20" aria-hidden="true" tabindex="-1"></a><span class="co">#tot_off_top</span></span>
<span id="cb82-21"><a href="#cb82-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-22"><a href="#cb82-22" aria-hidden="true" tabindex="-1"></a><span class="co">#get a matched cohort of people by polysubstance use</span></span>
<span id="cb82-23"><a href="#cb82-23" aria-hidden="true" tabindex="-1"></a>m.out3 <span class="ot">&lt;-</span> <span class="fu">matchit</span>(policonsumo <span class="sc">~</span> <span class="fu">rcs</span>(edad_al_ing_1, <span class="dv">4</span>) <span class="sc">+</span> sex <span class="sc">+</span> edad_ini_cons <span class="sc">+</span> escolaridad_rec <span class="sc">+</span> condicion_ocupacional_corr <span class="sc">+</span> num_hijos_mod_joel_bin <span class="sc">+</span> tenencia_de_la_vivienda_mod <span class="sc">+</span> macrozona <span class="sc">+</span> n_off_vio <span class="sc">+</span> n_off_acq <span class="sc">+</span> n_off_sud <span class="sc">+</span> n_off_oth <span class="sc">+</span> dg_cie_10_rec <span class="sc">+</span> dg_trs_cons_sus_or <span class="sc">+</span> clas_r <span class="sc">+</span> porc_pobr <span class="sc">+</span> sus_ini_mod_mvv <span class="sc">+</span> ano_nac_corr <span class="sc">+</span> con_quien_vive_joel <span class="sc">+</span> fis_comorbidity_icd_10<span class="sc">+</span> n_off_vict, </span>
<span id="cb82-24"><a href="#cb82-24" aria-hidden="true" tabindex="-1"></a>                  <span class="at">data =</span> Base_fiscalia_v16_grant_23_24 <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="sc">!</span>motivodeegreso_mod_imp_1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Derivación"</span>,<span class="st">"En curso"</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(tot_off_top)<span class="sc">~</span>T,T<span class="sc">~</span>F)) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(variables_vector),</span>
<span id="cb82-25"><a href="#cb82-25" aria-hidden="true" tabindex="-1"></a>                    <span class="co">#Base_fiscalia_v16_grant_23_24[complete.cases(Base_fiscalia_v16_grant_23_24[,..variables_vector]),], </span></span>
<span id="cb82-26"><a href="#cb82-26" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">"nearest"</span>, </span>
<span id="cb82-27"><a href="#cb82-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">discard =</span> <span class="st">"both"</span>,</span>
<span id="cb82-28"><a href="#cb82-28" aria-hidden="true" tabindex="-1"></a>                  <span class="at">caliper =</span> .<span class="dv">05</span>, </span>
<span id="cb82-29"><a href="#cb82-29" aria-hidden="true" tabindex="-1"></a>                  <span class="at">standardize =</span> T)</span>
<span id="cb82-30"><a href="#cb82-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-31"><a href="#cb82-31" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb82-32"><a href="#cb82-32" aria-hidden="true" tabindex="-1"></a>cobalt<span class="sc">::</span><span class="fu">bal.tab</span>(m.out3, <span class="at">un =</span> <span class="cn">TRUE</span>, <span class="at">m.threshold =</span> .<span class="dv">1</span>, </span>
<span id="cb82-33"><a href="#cb82-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">v.threshold =</span> <span class="dv">2</span>))</span>
<span id="cb82-34"><a href="#cb82-34" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb82-35"><a href="#cb82-35" aria-hidden="true" tabindex="-1"></a><span class="co">#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_#_</span></span>
<span id="cb82-36"><a href="#cb82-36" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("MatchThem")</span></span>
<span id="cb82-37"><a href="#cb82-37" aria-hidden="true" tabindex="-1"></a><span class="co"># require(MatchThem)</span></span>
<span id="cb82-38"><a href="#cb82-38" aria-hidden="true" tabindex="-1"></a><span class="co">#https://cran.r-project.org/web/packages/MatchThem/MatchThem.pdf</span></span>
<span id="cb82-39"><a href="#cb82-39" aria-hidden="true" tabindex="-1"></a>imputed.datasets <span class="ot">&lt;-</span> mice<span class="sc">::</span><span class="fu">mice</span>(dplyr<span class="sc">::</span><span class="fu">select</span>(Base_fiscalia_v15f_grant_23_24,<span class="fu">c</span>(variables_vector,<span class="st">"edad_al_ing_1"</span>,<span class="st">"policonsumo"</span>,<span class="st">"time_to_off_from_adm"</span>,<span class="st">"time_to_drop_from_adm"</span>,<span class="st">"event_death"</span>,<span class="st">"event_comp"</span>,<span class="st">"event_offense"</span>)), <span class="at">m =</span> <span class="dv">5</span>)</span>
<span id="cb82-40"><a href="#cb82-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-41"><a href="#cb82-41" aria-hidden="true" tabindex="-1"></a><span class="co">#Currently, "within" (performing matching within each dataset) and "across" (estimating propensity scores within each dataset, averaging them across datasets, and performing matching using the averaged propensity scores in each dataset) approaches are available. The default is "within", which has been shown to have superior performance in most cases</span></span>
<span id="cb82-42"><a href="#cb82-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Matching the multiply imputed datasets</span></span>
<span id="cb82-43"><a href="#cb82-43" aria-hidden="true" tabindex="-1"></a>matched.datasets <span class="ot">&lt;-</span> <span class="fu">matchthem</span>(policonsumo <span class="sc">~</span>  sex <span class="sc">+</span> edad_ini_cons <span class="sc">+</span> escolaridad_rec <span class="sc">+</span> condicion_ocupacional_corr <span class="sc">+</span> num_hijos_mod_joel_bin <span class="sc">+</span> tenencia_de_la_vivienda_mod <span class="sc">+</span> macrozona <span class="sc">+</span> n_off_vio <span class="sc">+</span> n_off_acq <span class="sc">+</span> n_off_sud <span class="sc">+</span> n_off_oth <span class="sc">+</span> dg_cie_10_rec <span class="sc">+</span> dg_trs_cons_sus_or <span class="sc">+</span> clas_r <span class="sc">+</span> porc_pobr <span class="sc">+</span> sus_ini_mod_mvv <span class="sc">+</span> ano_nac_corr <span class="sc">+</span> con_quien_vive_joel <span class="sc">+</span> fis_comorbidity_icd_10<span class="sc">+</span> n_off_vict,</span>
<span id="cb82-44"><a href="#cb82-44" aria-hidden="true" tabindex="-1"></a>imputed.datasets, <span class="at">approach =</span> <span class="st">'within'</span>, <span class="at">method =</span> <span class="st">'nearest'</span>)</span>
<span id="cb82-45"><a href="#cb82-45" aria-hidden="true" tabindex="-1"></a><span class="co">#Matching Observations  | dataset: #1Error: Missing values are not allowed in the covariates.</span></span>
<span id="cb82-46"><a href="#cb82-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-47"><a href="#cb82-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-48"><a href="#cb82-48" aria-hidden="true" tabindex="-1"></a><span class="co">#Multiply imputing the missing values</span></span>
<span id="cb82-49"><a href="#cb82-49" aria-hidden="true" tabindex="-1"></a>imputed.datasets <span class="ot">&lt;-</span> mice<span class="sc">::</span><span class="fu">mice</span>(osteoarthritis, <span class="at">m =</span> <span class="dv">5</span>)</span>
<span id="cb82-50"><a href="#cb82-50" aria-hidden="true" tabindex="-1"></a><span class="co">#Matching the multiply imputed datasets</span></span>
<span id="cb82-51"><a href="#cb82-51" aria-hidden="true" tabindex="-1"></a>matched.datasets <span class="ot">&lt;-</span> <span class="fu">matchthem</span>(OSP <span class="sc">~</span> AGE <span class="sc">+</span> SEX <span class="sc">+</span> BMI <span class="sc">+</span> RAC <span class="sc">+</span> SMK,</span>
<span id="cb82-52"><a href="#cb82-52" aria-hidden="true" tabindex="-1"></a>                              imputed.datasets,</span>
<span id="cb82-53"><a href="#cb82-53" aria-hidden="true" tabindex="-1"></a>                              <span class="at">approach =</span> <span class="st">'within'</span>,</span>
<span id="cb82-54"><a href="#cb82-54" aria-hidden="true" tabindex="-1"></a>                              <span class="at">method =</span> <span class="st">'nearest'</span>)</span>
<span id="cb82-55"><a href="#cb82-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-56"><a href="#cb82-56" aria-hidden="true" tabindex="-1"></a><span class="co">#Multiply imputing the missing values</span></span>
<span id="cb82-57"><a href="#cb82-57" aria-hidden="true" tabindex="-1"></a>imputed.datasets <span class="ot">&lt;-</span> mice<span class="sc">::</span><span class="fu">mice</span>(osteoarthritis, <span class="at">m =</span> <span class="dv">5</span>)</span>
<span id="cb82-58"><a href="#cb82-58" aria-hidden="true" tabindex="-1"></a><span class="co">#Estimating weights of observations in the multiply imputed datasets</span></span>
<span id="cb82-59"><a href="#cb82-59" aria-hidden="true" tabindex="-1"></a>weighted.datasets <span class="ot">&lt;-</span> <span class="fu">weightthem</span>(OSP <span class="sc">~</span> AGE <span class="sc">+</span> SEX <span class="sc">+</span> BMI <span class="sc">+</span> RAC <span class="sc">+</span> SMK,</span>
<span id="cb82-60"><a href="#cb82-60" aria-hidden="true" tabindex="-1"></a>                              imputed.datasets,</span>
<span id="cb82-61"><a href="#cb82-61" aria-hidden="true" tabindex="-1"></a>                              <span class="at">approach =</span> <span class="st">'within'</span>,</span>
<span id="cb82-62"><a href="#cb82-62" aria-hidden="true" tabindex="-1"></a>                              <span class="at">method =</span> <span class="st">'ps'</span>,</span>
<span id="cb82-63"><a href="#cb82-63" aria-hidden="true" tabindex="-1"></a>                              <span class="at">estimand =</span> <span class="st">"ATT"</span>)</span>
<span id="cb82-64"><a href="#cb82-64" aria-hidden="true" tabindex="-1"></a><span class="co">#Analyzing the weighted datasets</span></span>
<span id="cb82-65"><a href="#cb82-65" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">with</span>(<span class="at">data =</span> weighted.datasets,</span>
<span id="cb82-66"><a href="#cb82-66" aria-hidden="true" tabindex="-1"></a><span class="at">exp =</span> <span class="fu">svyglm</span>(KOA <span class="sc">~</span> OSP, <span class="at">family =</span> binomial))</span>
<span id="cb82-67"><a href="#cb82-67" aria-hidden="true" tabindex="-1"></a><span class="co">#Pooling results obtained from analysing the datasets</span></span>
<span id="cb82-68"><a href="#cb82-68" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">pool</span>(models)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
</section>
<section id="session-info" class="level1">
<h1>Session info</h1>
<div class="cell" data-paged.print="true">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="fu">paste0</span>(<span class="st">"R library: "</span>, <span class="fu">Sys.getenv</span>(<span class="st">"R_LIBS_USER"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>R library: C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2022 (github)/renv/library/R-4.1/x86_64-w64-mingw32</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="fu">paste0</span>(<span class="st">"Date: "</span>,withr<span class="sc">::</span><span class="fu">with_locale</span>(<span class="at">new =</span> <span class="fu">c</span>(<span class="st">'LC_TIME'</span> <span class="ot">=</span> <span class="st">'C'</span>), <span class="at">code =</span><span class="fu">Sys.time</span>())))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>Date: 2023-09-29 09:22:24</p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="fu">paste0</span>(<span class="st">"Editor context: "</span>, path))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="message">
<p>Editor context: C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2022 (github)/env</p>
</div>
</div>
<div class="center-table">
<div class="cell" data-paged.print="true">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>sesion_info <span class="ot">&lt;-</span> devtools<span class="sc">::</span><span class="fu">session_info</span>()</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  tibble<span class="sc">::</span><span class="fu">as_tibble</span>(sesion_info<span class="sc">$</span>packages),</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(package, loadedversion, source)</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"R packages"</span>, <span class="at">format =</span> <span class="st">"markdown"</span>,</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Row number"</span>, <span class="st">"Package"</span>, <span class="st">"Version"</span>),</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">row.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"c"</span>, <span class="st">"l"</span>, <span class="st">"r"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>R packages</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Row number</th>
<th style="text-align: left;">Package</th>
<th style="text-align: right;">Version</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">assertthat</td>
<td style="text-align: left;">0.2.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">backports</td>
<td style="text-align: left;">1.4.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">base64enc</td>
<td style="text-align: left;">0.1-3</td>
<td style="text-align: right;">CRAN (R 4.1.1)</td>
</tr>
<tr class="even">
<td style="text-align: center;">BiocManager</td>
<td style="text-align: left;">1.30.18</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">bit</td>
<td style="text-align: left;">4.0.4</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">bit64</td>
<td style="text-align: left;">4.0.5</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">blob</td>
<td style="text-align: left;">1.2.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">broom</td>
<td style="text-align: left;">1.0.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">cachem</td>
<td style="text-align: left;">1.0.6</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">callr</td>
<td style="text-align: left;">3.7.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">cellranger</td>
<td style="text-align: left;">1.1.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">checkmate</td>
<td style="text-align: left;">2.1.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">chron</td>
<td style="text-align: left;">2.3-58</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">class</td>
<td style="text-align: left;">7.3-20</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">cli</td>
<td style="text-align: left;">3.4.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">clisymbols</td>
<td style="text-align: left;">1.2.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">cluster</td>
<td style="text-align: left;">2.1.4</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">codetools</td>
<td style="text-align: left;">0.2-19</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">colorspace</td>
<td style="text-align: left;">2.0-3</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">compareGroups</td>
<td style="text-align: left;">4.5.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">crayon</td>
<td style="text-align: left;">1.5.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">crosstalk</td>
<td style="text-align: left;">1.2.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">curl</td>
<td style="text-align: left;">4.3.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">data.table</td>
<td style="text-align: left;">1.14.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">DBI</td>
<td style="text-align: left;">1.1.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">dbplyr</td>
<td style="text-align: left;">2.2.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">deldir</td>
<td style="text-align: left;">1.0-6</td>
<td style="text-align: right;">CRAN (R 4.1.1)</td>
</tr>
<tr class="even">
<td style="text-align: center;">devtools</td>
<td style="text-align: left;">2.4.5</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">digest</td>
<td style="text-align: left;">0.6.29</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">doRNG</td>
<td style="text-align: left;">1.8.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">dplyr</td>
<td style="text-align: left;">1.0.10</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">DT</td>
<td style="text-align: left;">0.26</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">e1071</td>
<td style="text-align: left;">1.7-11</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">easyalluvial</td>
<td style="text-align: left;">0.3.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ellipsis</td>
<td style="text-align: left;">0.3.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">evaluate</td>
<td style="text-align: left;">0.17</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">fansi</td>
<td style="text-align: left;">1.0.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">farver</td>
<td style="text-align: left;">2.1.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">fastmap</td>
<td style="text-align: left;">1.1.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">flextable</td>
<td style="text-align: left;">0.8.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">FNN</td>
<td style="text-align: left;">1.1.3.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">forcats</td>
<td style="text-align: left;">0.5.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">foreach</td>
<td style="text-align: left;">1.5.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">foreign</td>
<td style="text-align: left;">0.8-83</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Formula</td>
<td style="text-align: left;">1.2-4</td>
<td style="text-align: right;">CRAN (R 4.1.1)</td>
</tr>
<tr class="even">
<td style="text-align: center;">fs</td>
<td style="text-align: left;">1.5.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">future</td>
<td style="text-align: left;">1.28.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">future.apply</td>
<td style="text-align: left;">1.10.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">gargle</td>
<td style="text-align: left;">1.2.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">gdtools</td>
<td style="text-align: left;">0.2.4</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">generics</td>
<td style="text-align: left;">0.1.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">ggalluvial</td>
<td style="text-align: left;">0.12.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ggplot2</td>
<td style="text-align: left;">3.4.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">ggrepel</td>
<td style="text-align: left;">0.9.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ggridges</td>
<td style="text-align: left;">0.5.4</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">glca</td>
<td style="text-align: left;">1.3.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">globals</td>
<td style="text-align: left;">0.16.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">glue</td>
<td style="text-align: left;">1.6.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">googledrive</td>
<td style="text-align: left;">2.0.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">googlesheets4</td>
<td style="text-align: left;">1.0.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">gower</td>
<td style="text-align: left;">1.0.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">gridExtra</td>
<td style="text-align: left;">2.3</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">gsubfn</td>
<td style="text-align: left;">0.7</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">gtable</td>
<td style="text-align: left;">0.3.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">hardhat</td>
<td style="text-align: left;">1.2.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">HardyWeinberg</td>
<td style="text-align: left;">1.7.5</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">haven</td>
<td style="text-align: left;">2.5.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">highr</td>
<td style="text-align: left;">0.9</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Hmisc</td>
<td style="text-align: left;">4.7-1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">hms</td>
<td style="text-align: left;">1.1.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">htmlTable</td>
<td style="text-align: left;">2.4.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">htmltools</td>
<td style="text-align: left;">0.5.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">htmlwidgets</td>
<td style="text-align: left;">1.5.4</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">httpuv</td>
<td style="text-align: left;">1.6.6</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">httr</td>
<td style="text-align: left;">1.4.4</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">interp</td>
<td style="text-align: left;">1.1-3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ipred</td>
<td style="text-align: left;">0.9-13</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">iterators</td>
<td style="text-align: left;">1.0.14</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">itertools</td>
<td style="text-align: left;">0.1-3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">janitor</td>
<td style="text-align: left;">2.1.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jpeg</td>
<td style="text-align: left;">0.1-9</td>
<td style="text-align: right;">CRAN (R 4.1.1)</td>
</tr>
<tr class="even">
<td style="text-align: center;">jsonlite</td>
<td style="text-align: left;">1.8.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jtools</td>
<td style="text-align: left;">2.2.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">kableExtra</td>
<td style="text-align: left;">1.3.4</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">knitr</td>
<td style="text-align: left;">1.40</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">labeling</td>
<td style="text-align: left;">0.4.2</td>
<td style="text-align: right;">CRAN (R 4.1.1)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">labelled</td>
<td style="text-align: left;">2.10.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">later</td>
<td style="text-align: left;">1.3.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lattice</td>
<td style="text-align: left;">0.20-45</td>
<td style="text-align: right;">CRAN (R 4.1.1)</td>
</tr>
<tr class="even">
<td style="text-align: center;">latticeExtra</td>
<td style="text-align: left;">0.6-30</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lava</td>
<td style="text-align: left;">1.6.10</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">lazyeval</td>
<td style="text-align: left;">0.2.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lifecycle</td>
<td style="text-align: left;">1.0.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">listenv</td>
<td style="text-align: left;">0.8.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lubridate</td>
<td style="text-align: left;">1.8.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">magrittr</td>
<td style="text-align: left;">2.0.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">MASS</td>
<td style="text-align: left;">7.3-58.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">Matrix</td>
<td style="text-align: left;">1.5-1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">memoise</td>
<td style="text-align: left;">2.0.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">mice</td>
<td style="text-align: left;">3.14.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">mime</td>
<td style="text-align: left;">0.12</td>
<td style="text-align: right;">CRAN (R 4.1.1)</td>
</tr>
<tr class="even">
<td style="text-align: center;">miniUI</td>
<td style="text-align: left;">0.1.1.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">missForest</td>
<td style="text-align: left;">1.5</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">missRanger</td>
<td style="text-align: left;">2.1.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">mitools</td>
<td style="text-align: left;">2.4</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">modelr</td>
<td style="text-align: left;">0.1.9</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">munsell</td>
<td style="text-align: left;">0.5.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">nnet</td>
<td style="text-align: left;">7.3-18</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">officer</td>
<td style="text-align: left;">0.4.4</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">openxlsx</td>
<td style="text-align: left;">4.2.5</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pacman</td>
<td style="text-align: left;">0.5.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">pander</td>
<td style="text-align: left;">0.6.5</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">parallelly</td>
<td style="text-align: left;">1.32.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">parcats</td>
<td style="text-align: left;">0.0.4</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pillar</td>
<td style="text-align: left;">1.8.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">pkgbuild</td>
<td style="text-align: left;">1.3.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pkgconfig</td>
<td style="text-align: left;">2.0.3</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">pkgload</td>
<td style="text-align: left;">1.3.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">plotly</td>
<td style="text-align: left;">4.10.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">plyr</td>
<td style="text-align: left;">1.8.7</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">png</td>
<td style="text-align: left;">0.1-7</td>
<td style="text-align: right;">CRAN (R 4.1.1)</td>
</tr>
<tr class="even">
<td style="text-align: center;">poLCA</td>
<td style="text-align: left;">1.6.0.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">prettyunits</td>
<td style="text-align: left;">1.1.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">processx</td>
<td style="text-align: left;">3.7.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">prodlim</td>
<td style="text-align: left;">2019.11.13</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">profvis</td>
<td style="text-align: left;">0.3.7</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">progressr</td>
<td style="text-align: left;">0.11.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">promises</td>
<td style="text-align: left;">1.2.0.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">proto</td>
<td style="text-align: left;">1.0.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">proxy</td>
<td style="text-align: left;">0.4-27</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ps</td>
<td style="text-align: left;">1.7.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">purrr</td>
<td style="text-align: left;">0.3.5</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">R6</td>
<td style="text-align: left;">2.5.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">ragg</td>
<td style="text-align: left;">1.2.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">randomForest</td>
<td style="text-align: left;">4.7-1.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">ranger</td>
<td style="text-align: left;">0.14.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">RColorBrewer</td>
<td style="text-align: left;">1.1-3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">Rcpp</td>
<td style="text-align: left;">1.0.9</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">readr</td>
<td style="text-align: left;">2.1.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">readxl</td>
<td style="text-align: left;">1.4.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">recipes</td>
<td style="text-align: left;">1.0.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">remotes</td>
<td style="text-align: left;">2.4.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">renv</td>
<td style="text-align: left;">1.0.1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">reprex</td>
<td style="text-align: left;">2.0.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">reshape2</td>
<td style="text-align: left;">1.4.4</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">reticulate</td>
<td style="text-align: left;">1.26</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">rio</td>
<td style="text-align: left;">0.5.29</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">rlang</td>
<td style="text-align: left;">1.0.6</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">rmarkdown</td>
<td style="text-align: left;">2.17</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">rngtools</td>
<td style="text-align: left;">1.5.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">rpart</td>
<td style="text-align: left;">4.1.16</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">Rsolnp</td>
<td style="text-align: left;">1.16</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">RSQLite</td>
<td style="text-align: left;">2.2.18</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">rstudioapi</td>
<td style="text-align: left;">0.15.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">rvest</td>
<td style="text-align: left;">1.0.3</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">scales</td>
<td style="text-align: left;">1.2.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">scatterplot3d</td>
<td style="text-align: left;">0.3-42</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">sessioninfo</td>
<td style="text-align: left;">1.2.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">shiny</td>
<td style="text-align: left;">1.7.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">snakecase</td>
<td style="text-align: left;">0.11.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sqldf</td>
<td style="text-align: left;">0.4-11</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">stringi</td>
<td style="text-align: left;">1.7.6</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">stringr</td>
<td style="text-align: left;">1.4.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">survey</td>
<td style="text-align: left;">4.1-1</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">survival</td>
<td style="text-align: left;">3.4-0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">svglite</td>
<td style="text-align: left;">2.1.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">systemfonts</td>
<td style="text-align: left;">1.0.4</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">tableone</td>
<td style="text-align: left;">0.13.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">textshaping</td>
<td style="text-align: left;">0.3.6</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">tibble</td>
<td style="text-align: left;">3.1.8</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tidylog</td>
<td style="text-align: left;">1.0.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">tidyr</td>
<td style="text-align: left;">1.2.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tidyselect</td>
<td style="text-align: left;">1.2.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">tidyverse</td>
<td style="text-align: left;">1.3.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">timeDate</td>
<td style="text-align: left;">4021.106</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">truncnorm</td>
<td style="text-align: left;">1.0-8</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tzdb</td>
<td style="text-align: left;">0.3.0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">urlchecker</td>
<td style="text-align: left;">1.0.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">usethis</td>
<td style="text-align: left;">2.1.6</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">utf8</td>
<td style="text-align: left;">1.2.2</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">uuid</td>
<td style="text-align: left;">1.1-0</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">vctrs</td>
<td style="text-align: left;">0.5.2</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">viridisLite</td>
<td style="text-align: left;">0.4.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">webshot</td>
<td style="text-align: left;">0.5.4</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">withr</td>
<td style="text-align: left;">2.5.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">writexl</td>
<td style="text-align: left;">1.4.0</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">xfun</td>
<td style="text-align: left;">0.33</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">xml2</td>
<td style="text-align: left;">1.3.3</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">xtable</td>
<td style="text-align: left;">1.8-4</td>
<td style="text-align: right;">CRAN (R 4.1.2)</td>
</tr>
<tr class="even">
<td style="text-align: center;">yaml</td>
<td style="text-align: left;">2.3.6</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">zip</td>
<td style="text-align: left;">2.2.1</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
<tr class="even">
<td style="text-align: center;">zoo</td>
<td style="text-align: left;">1.8-11</td>
<td style="text-align: right;">CRAN (R 4.1.3)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="center-table">
<div class="cell" data-paged.print="true">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>reticulate<span class="sc">::</span><span class="fu">py_list_packages</span>()<span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Python packages"</span>, <span class="at">format =</span> <span class="st">"markdown"</span>,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Package"</span>, <span class="st">"Version"</span>, <span class="st">"Requirement"</span>, <span class="st">"Channel"</span>),</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">row.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"c"</span>, <span class="st">"l"</span>, <span class="st">"r"</span>, <span class="st">"r"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Python packages</caption>
<colgroup>
<col style="width: 29%">
<col style="width: 19%">
<col style="width: 40%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Package</th>
<th style="text-align: left;">Version</th>
<th style="text-align: right;">Requirement</th>
<th style="text-align: right;">Channel</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">alabaster</td>
<td style="text-align: left;">0.7.12</td>
<td style="text-align: right;">alabaster=0.7.12</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">anaconda-client</td>
<td style="text-align: left;">1.11.2</td>
<td style="text-align: right;">anaconda-client=1.11.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">anaconda-navigator</td>
<td style="text-align: left;">2.4.0</td>
<td style="text-align: right;">anaconda-navigator=2.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">anaconda-project</td>
<td style="text-align: left;">0.11.1</td>
<td style="text-align: right;">anaconda-project=0.11.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">anyio</td>
<td style="text-align: left;">3.5.0</td>
<td style="text-align: right;">anyio=3.5.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">appdirs</td>
<td style="text-align: left;">1.4.4</td>
<td style="text-align: right;">appdirs=1.4.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">argon2-cffi</td>
<td style="text-align: left;">21.3.0</td>
<td style="text-align: right;">argon2-cffi=21.3.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">argon2-cffi-bindings</td>
<td style="text-align: left;">21.2.0</td>
<td style="text-align: right;">argon2-cffi-bindings=21.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">arrow</td>
<td style="text-align: left;">1.2.3</td>
<td style="text-align: right;">arrow=1.2.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">astor</td>
<td style="text-align: left;">0.8.1</td>
<td style="text-align: right;">astor=0.8.1</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="odd">
<td style="text-align: center;">astroid</td>
<td style="text-align: left;">2.14.2</td>
<td style="text-align: right;">astroid=2.14.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">astropy</td>
<td style="text-align: left;">5.1</td>
<td style="text-align: right;">astropy=5.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">asttokens</td>
<td style="text-align: left;">2.0.5</td>
<td style="text-align: right;">asttokens=2.0.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">atomicwrites</td>
<td style="text-align: left;">1.4.0</td>
<td style="text-align: right;">atomicwrites=1.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">attrs</td>
<td style="text-align: left;">22.1.0</td>
<td style="text-align: right;">attrs=22.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">autograd</td>
<td style="text-align: left;">1.5</td>
<td style="text-align: right;">autograd=1.5</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="odd">
<td style="text-align: center;">autograd-gamma</td>
<td style="text-align: left;">0.5.0</td>
<td style="text-align: right;">autograd-gamma=0.5.0</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="even">
<td style="text-align: center;">automat</td>
<td style="text-align: left;">20.2.0</td>
<td style="text-align: right;">automat=20.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">autopep8</td>
<td style="text-align: left;">1.6.0</td>
<td style="text-align: right;">autopep8=1.6.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">babel</td>
<td style="text-align: left;">2.11.0</td>
<td style="text-align: right;">babel=2.11.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">backcall</td>
<td style="text-align: left;">0.2.0</td>
<td style="text-align: right;">backcall=0.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">backports</td>
<td style="text-align: left;">1.1</td>
<td style="text-align: right;">backports=1.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">backports.functools_lru_cache</td>
<td style="text-align: left;">1.6.4</td>
<td style="text-align: right;">backports.functools_lru_cache=1.6.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">backports.tempfile</td>
<td style="text-align: left;">1.0</td>
<td style="text-align: right;">backports.tempfile=1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">backports.weakref</td>
<td style="text-align: left;">1.0.post1</td>
<td style="text-align: right;">backports.weakref=1.0.post1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">bcrypt</td>
<td style="text-align: left;">3.2.0</td>
<td style="text-align: right;">bcrypt=3.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">beautifulsoup4</td>
<td style="text-align: left;">4.11.1</td>
<td style="text-align: right;">beautifulsoup4=4.11.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">binaryornot</td>
<td style="text-align: left;">0.4.4</td>
<td style="text-align: right;">binaryornot=0.4.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">black</td>
<td style="text-align: left;">22.6.0</td>
<td style="text-align: right;">black=22.6.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">blas</td>
<td style="text-align: left;">1.0</td>
<td style="text-align: right;">blas=1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">bleach</td>
<td style="text-align: left;">4.1.0</td>
<td style="text-align: right;">bleach=4.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">blosc</td>
<td style="text-align: left;">1.21.3</td>
<td style="text-align: right;">blosc=1.21.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">bokeh</td>
<td style="text-align: left;">2.4.3</td>
<td style="text-align: right;">bokeh=2.4.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">boltons</td>
<td style="text-align: left;">23.0.0</td>
<td style="text-align: right;">boltons=23.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">bottleneck</td>
<td style="text-align: left;">1.3.5</td>
<td style="text-align: right;">bottleneck=1.3.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">brotli</td>
<td style="text-align: left;">1.0.9</td>
<td style="text-align: right;">brotli=1.0.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">brotli-bin</td>
<td style="text-align: left;">1.0.9</td>
<td style="text-align: right;">brotli-bin=1.0.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">brotlipy</td>
<td style="text-align: left;">0.7.0</td>
<td style="text-align: right;">brotlipy=0.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">bzip2</td>
<td style="text-align: left;">1.0.8</td>
<td style="text-align: right;">bzip2=1.0.8</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">ca-certificates</td>
<td style="text-align: left;">2023.01.10</td>
<td style="text-align: right;">ca-certificates=2023.01.10</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">certifi</td>
<td style="text-align: left;">2022.12.7</td>
<td style="text-align: right;">certifi=2022.12.7</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">cffi</td>
<td style="text-align: left;">1.15.1</td>
<td style="text-align: right;">cffi=1.15.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">cfitsio</td>
<td style="text-align: left;">3.470</td>
<td style="text-align: right;">cfitsio=3.470</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">chardet</td>
<td style="text-align: left;">4.0.0</td>
<td style="text-align: right;">chardet=4.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">charls</td>
<td style="text-align: left;">2.2.0</td>
<td style="text-align: right;">charls=2.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">charset-normalizer</td>
<td style="text-align: left;">2.0.4</td>
<td style="text-align: right;">charset-normalizer=2.0.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">click</td>
<td style="text-align: left;">8.0.4</td>
<td style="text-align: right;">click=8.0.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">cloudpickle</td>
<td style="text-align: left;">2.0.0</td>
<td style="text-align: right;">cloudpickle=2.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">clyent</td>
<td style="text-align: left;">1.2.2</td>
<td style="text-align: right;">clyent=1.2.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">colorama</td>
<td style="text-align: left;">0.4.6</td>
<td style="text-align: right;">colorama=0.4.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">colorcet</td>
<td style="text-align: left;">3.0.1</td>
<td style="text-align: right;">colorcet=3.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">comm</td>
<td style="text-align: left;">0.1.2</td>
<td style="text-align: right;">comm=0.1.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">conda</td>
<td style="text-align: left;">23.3.1</td>
<td style="text-align: right;">conda=23.3.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">conda-build</td>
<td style="text-align: left;">3.24.0</td>
<td style="text-align: right;">conda-build=3.24.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">conda-content-trust</td>
<td style="text-align: left;">0.1.3</td>
<td style="text-align: right;">conda-content-trust=0.1.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">conda-pack</td>
<td style="text-align: left;">0.6.0</td>
<td style="text-align: right;">conda-pack=0.6.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">conda-package-handling</td>
<td style="text-align: left;">2.0.2</td>
<td style="text-align: right;">conda-package-handling=2.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">conda-package-streaming</td>
<td style="text-align: left;">0.7.0</td>
<td style="text-align: right;">conda-package-streaming=0.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">conda-repo-cli</td>
<td style="text-align: left;">1.0.41</td>
<td style="text-align: right;">conda-repo-cli=1.0.41</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">conda-token</td>
<td style="text-align: left;">0.4.0</td>
<td style="text-align: right;">conda-token=0.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">conda-verify</td>
<td style="text-align: left;">3.4.2</td>
<td style="text-align: right;">conda-verify=3.4.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">console_shortcut</td>
<td style="text-align: left;">0.1.1</td>
<td style="text-align: right;">console_shortcut=0.1.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">constantly</td>
<td style="text-align: left;">15.1.0</td>
<td style="text-align: right;">constantly=15.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">contourpy</td>
<td style="text-align: left;">1.0.5</td>
<td style="text-align: right;">contourpy=1.0.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">cookiecutter</td>
<td style="text-align: left;">1.7.3</td>
<td style="text-align: right;">cookiecutter=1.7.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">cryptography</td>
<td style="text-align: left;">39.0.1</td>
<td style="text-align: right;">cryptography=39.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">cssselect</td>
<td style="text-align: left;">1.1.0</td>
<td style="text-align: right;">cssselect=1.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">curl</td>
<td style="text-align: left;">7.87.0</td>
<td style="text-align: right;">curl=7.87.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">cycler</td>
<td style="text-align: left;">0.11.0</td>
<td style="text-align: right;">cycler=0.11.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">cytoolz</td>
<td style="text-align: left;">0.12.0</td>
<td style="text-align: right;">cytoolz=0.12.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">daal4py</td>
<td style="text-align: left;">2023.0.2</td>
<td style="text-align: right;">daal4py=2023.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">dal</td>
<td style="text-align: left;">2023.0.1</td>
<td style="text-align: right;">dal=2023.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">dask</td>
<td style="text-align: left;">2022.7.0</td>
<td style="text-align: right;">dask=2022.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">dask-core</td>
<td style="text-align: left;">2022.7.0</td>
<td style="text-align: right;">dask-core=2022.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">datashader</td>
<td style="text-align: left;">0.14.4</td>
<td style="text-align: right;">datashader=0.14.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">datashape</td>
<td style="text-align: left;">0.5.4</td>
<td style="text-align: right;">datashape=0.5.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">debugpy</td>
<td style="text-align: left;">1.5.1</td>
<td style="text-align: right;">debugpy=1.5.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">decorator</td>
<td style="text-align: left;">5.1.1</td>
<td style="text-align: right;">decorator=5.1.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">defusedxml</td>
<td style="text-align: left;">0.7.1</td>
<td style="text-align: right;">defusedxml=0.7.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">diff-match-patch</td>
<td style="text-align: left;">20200713</td>
<td style="text-align: right;">diff-match-patch=20200713</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">dill</td>
<td style="text-align: left;">0.3.6</td>
<td style="text-align: right;">dill=0.3.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">distributed</td>
<td style="text-align: left;">2022.7.0</td>
<td style="text-align: right;">distributed=2022.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">docstring-to-markdown</td>
<td style="text-align: left;">0.11</td>
<td style="text-align: right;">docstring-to-markdown=0.11</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">docutils</td>
<td style="text-align: left;">0.18.1</td>
<td style="text-align: right;">docutils=0.18.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">entrypoints</td>
<td style="text-align: left;">0.4</td>
<td style="text-align: right;">entrypoints=0.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">et_xmlfile</td>
<td style="text-align: left;">1.1.0</td>
<td style="text-align: right;">et_xmlfile=1.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">executing</td>
<td style="text-align: left;">0.8.3</td>
<td style="text-align: right;">executing=0.8.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">filelock</td>
<td style="text-align: left;">3.9.0</td>
<td style="text-align: right;">filelock=3.9.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">flake8</td>
<td style="text-align: left;">6.0.0</td>
<td style="text-align: right;">flake8=6.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">flask</td>
<td style="text-align: left;">2.2.2</td>
<td style="text-align: right;">flask=2.2.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">flit-core</td>
<td style="text-align: left;">3.6.0</td>
<td style="text-align: right;">flit-core=3.6.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">fonttools</td>
<td style="text-align: left;">4.25.0</td>
<td style="text-align: right;">fonttools=4.25.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">formulaic</td>
<td style="text-align: left;">0.6.1</td>
<td style="text-align: right;">formulaic=0.6.1</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="even">
<td style="text-align: center;">freetype</td>
<td style="text-align: left;">2.12.1</td>
<td style="text-align: right;">freetype=2.12.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">fsspec</td>
<td style="text-align: left;">2022.11.0</td>
<td style="text-align: right;">fsspec=2022.11.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">future</td>
<td style="text-align: left;">0.18.3</td>
<td style="text-align: right;">future=0.18.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">gensim</td>
<td style="text-align: left;">4.3.0</td>
<td style="text-align: right;">gensim=4.3.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">giflib</td>
<td style="text-align: left;">5.2.1</td>
<td style="text-align: right;">giflib=5.2.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">glib</td>
<td style="text-align: left;">2.69.1</td>
<td style="text-align: right;">glib=2.69.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">glob2</td>
<td style="text-align: left;">0.7</td>
<td style="text-align: right;">glob2=0.7</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">greenlet</td>
<td style="text-align: left;">2.0.1</td>
<td style="text-align: right;">greenlet=2.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">gst-plugins-base</td>
<td style="text-align: left;">1.18.5</td>
<td style="text-align: right;">gst-plugins-base=1.18.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">gstreamer</td>
<td style="text-align: left;">1.18.5</td>
<td style="text-align: right;">gstreamer=1.18.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">h5py</td>
<td style="text-align: left;">3.7.0</td>
<td style="text-align: right;">h5py=3.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">hdf5</td>
<td style="text-align: left;">1.10.6</td>
<td style="text-align: right;">hdf5=1.10.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">heapdict</td>
<td style="text-align: left;">1.0.1</td>
<td style="text-align: right;">heapdict=1.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">holoviews</td>
<td style="text-align: left;">1.15.4</td>
<td style="text-align: right;">holoviews=1.15.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">huggingface_hub</td>
<td style="text-align: left;">0.10.1</td>
<td style="text-align: right;">huggingface_hub=0.10.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">hvplot</td>
<td style="text-align: left;">0.8.2</td>
<td style="text-align: right;">hvplot=0.8.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">hyperlink</td>
<td style="text-align: left;">21.0.0</td>
<td style="text-align: right;">hyperlink=21.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">icc_rt</td>
<td style="text-align: left;">2022.1.0</td>
<td style="text-align: right;">icc_rt=2022.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">icu</td>
<td style="text-align: left;">58.2</td>
<td style="text-align: right;">icu=58.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">idna</td>
<td style="text-align: left;">3.4</td>
<td style="text-align: right;">idna=3.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">imagecodecs</td>
<td style="text-align: left;">2021.8.26</td>
<td style="text-align: right;">imagecodecs=2021.8.26</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">imageio</td>
<td style="text-align: left;">2.26.0</td>
<td style="text-align: right;">imageio=2.26.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">imagesize</td>
<td style="text-align: left;">1.4.1</td>
<td style="text-align: right;">imagesize=1.4.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">imbalanced-learn</td>
<td style="text-align: left;">0.10.1</td>
<td style="text-align: right;">imbalanced-learn=0.10.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">importlib-metadata</td>
<td style="text-align: left;">4.11.3</td>
<td style="text-align: right;">importlib-metadata=4.11.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">importlib_metadata</td>
<td style="text-align: left;">4.11.3</td>
<td style="text-align: right;">importlib_metadata=4.11.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">incremental</td>
<td style="text-align: left;">21.3.0</td>
<td style="text-align: right;">incremental=21.3.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">inflection</td>
<td style="text-align: left;">0.5.1</td>
<td style="text-align: right;">inflection=0.5.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">iniconfig</td>
<td style="text-align: left;">1.1.1</td>
<td style="text-align: right;">iniconfig=1.1.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">intake</td>
<td style="text-align: left;">0.6.7</td>
<td style="text-align: right;">intake=0.6.7</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">intel-openmp</td>
<td style="text-align: left;">2021.4.0</td>
<td style="text-align: right;">intel-openmp=2021.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">interface-meta</td>
<td style="text-align: left;">1.3.0</td>
<td style="text-align: right;">interface-meta=1.3.0</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="even">
<td style="text-align: center;">intervaltree</td>
<td style="text-align: left;">3.1.0</td>
<td style="text-align: right;">intervaltree=3.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ipykernel</td>
<td style="text-align: left;">6.19.2</td>
<td style="text-align: right;">ipykernel=6.19.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">ipython</td>
<td style="text-align: left;">8.10.0</td>
<td style="text-align: right;">ipython=8.10.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ipython_genutils</td>
<td style="text-align: left;">0.2.0</td>
<td style="text-align: right;">ipython_genutils=0.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">ipywidgets</td>
<td style="text-align: left;">7.6.5</td>
<td style="text-align: right;">ipywidgets=7.6.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">isort</td>
<td style="text-align: left;">5.9.3</td>
<td style="text-align: right;">isort=5.9.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">itemadapter</td>
<td style="text-align: left;">0.3.0</td>
<td style="text-align: right;">itemadapter=0.3.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">itemloaders</td>
<td style="text-align: left;">1.0.4</td>
<td style="text-align: right;">itemloaders=1.0.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">itsdangerous</td>
<td style="text-align: left;">2.0.1</td>
<td style="text-align: right;">itsdangerous=2.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jedi</td>
<td style="text-align: left;">0.18.1</td>
<td style="text-align: right;">jedi=0.18.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jellyfish</td>
<td style="text-align: left;">0.9.0</td>
<td style="text-align: right;">jellyfish=0.9.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jinja2</td>
<td style="text-align: left;">3.1.2</td>
<td style="text-align: right;">jinja2=3.1.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jinja2-time</td>
<td style="text-align: left;">0.2.0</td>
<td style="text-align: right;">jinja2-time=0.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jmespath</td>
<td style="text-align: left;">0.10.0</td>
<td style="text-align: right;">jmespath=0.10.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">joblib</td>
<td style="text-align: left;">1.1.1</td>
<td style="text-align: right;">joblib=1.1.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jpeg</td>
<td style="text-align: left;">9e</td>
<td style="text-align: right;">jpeg=9e</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jq</td>
<td style="text-align: left;">1.6</td>
<td style="text-align: right;">jq=1.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">json5</td>
<td style="text-align: left;">0.9.6</td>
<td style="text-align: right;">json5=0.9.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jsonpatch</td>
<td style="text-align: left;">1.32</td>
<td style="text-align: right;">jsonpatch=1.32</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jsonpointer</td>
<td style="text-align: left;">2.1</td>
<td style="text-align: right;">jsonpointer=2.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jsonschema</td>
<td style="text-align: left;">4.17.3</td>
<td style="text-align: right;">jsonschema=4.17.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jupyter</td>
<td style="text-align: left;">1.0.0</td>
<td style="text-align: right;">jupyter=1.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jupyter_client</td>
<td style="text-align: left;">7.3.4</td>
<td style="text-align: right;">jupyter_client=7.3.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jupyter_console</td>
<td style="text-align: left;">6.6.2</td>
<td style="text-align: right;">jupyter_console=6.6.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jupyter_core</td>
<td style="text-align: left;">5.2.0</td>
<td style="text-align: right;">jupyter_core=5.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jupyter_server</td>
<td style="text-align: left;">1.23.4</td>
<td style="text-align: right;">jupyter_server=1.23.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jupyterlab</td>
<td style="text-align: left;">3.5.3</td>
<td style="text-align: right;">jupyterlab=3.5.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jupyterlab_pygments</td>
<td style="text-align: left;">0.1.2</td>
<td style="text-align: right;">jupyterlab_pygments=0.1.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jupyterlab_server</td>
<td style="text-align: left;">2.19.0</td>
<td style="text-align: right;">jupyterlab_server=2.19.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">jupyterlab_widgets</td>
<td style="text-align: left;">1.0.0</td>
<td style="text-align: right;">jupyterlab_widgets=1.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">jxrlib</td>
<td style="text-align: left;">1.1</td>
<td style="text-align: right;">jxrlib=1.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">keyring</td>
<td style="text-align: left;">23.4.0</td>
<td style="text-align: right;">keyring=23.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">kiwisolver</td>
<td style="text-align: left;">1.4.4</td>
<td style="text-align: right;">kiwisolver=1.4.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lazy-object-proxy</td>
<td style="text-align: left;">1.6.0</td>
<td style="text-align: right;">lazy-object-proxy=1.6.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">lcms2</td>
<td style="text-align: left;">2.12</td>
<td style="text-align: right;">lcms2=2.12</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lerc</td>
<td style="text-align: left;">3.0</td>
<td style="text-align: right;">lerc=3.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libaec</td>
<td style="text-align: left;">1.0.4</td>
<td style="text-align: right;">libaec=1.0.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libarchive</td>
<td style="text-align: left;">3.6.2</td>
<td style="text-align: right;">libarchive=3.6.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libbrotlicommon</td>
<td style="text-align: left;">1.0.9</td>
<td style="text-align: right;">libbrotlicommon=1.0.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libbrotlidec</td>
<td style="text-align: left;">1.0.9</td>
<td style="text-align: right;">libbrotlidec=1.0.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libbrotlienc</td>
<td style="text-align: left;">1.0.9</td>
<td style="text-align: right;">libbrotlienc=1.0.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libclang</td>
<td style="text-align: left;">12.0.0</td>
<td style="text-align: right;">libclang=12.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libcurl</td>
<td style="text-align: left;">7.87.0</td>
<td style="text-align: right;">libcurl=7.87.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libdeflate</td>
<td style="text-align: left;">1.17</td>
<td style="text-align: right;">libdeflate=1.17</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libffi</td>
<td style="text-align: left;">3.4.2</td>
<td style="text-align: right;">libffi=3.4.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libiconv</td>
<td style="text-align: left;">1.16</td>
<td style="text-align: right;">libiconv=1.16</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">liblief</td>
<td style="text-align: left;">0.12.3</td>
<td style="text-align: right;">liblief=0.12.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libogg</td>
<td style="text-align: left;">1.3.5</td>
<td style="text-align: right;">libogg=1.3.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libpng</td>
<td style="text-align: left;">1.6.39</td>
<td style="text-align: right;">libpng=1.6.39</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libsodium</td>
<td style="text-align: left;">1.0.18</td>
<td style="text-align: right;">libsodium=1.0.18</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libspatialindex</td>
<td style="text-align: left;">1.9.3</td>
<td style="text-align: right;">libspatialindex=1.9.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libssh2</td>
<td style="text-align: left;">1.10.0</td>
<td style="text-align: right;">libssh2=1.10.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libtiff</td>
<td style="text-align: left;">4.5.0</td>
<td style="text-align: right;">libtiff=4.5.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libuv</td>
<td style="text-align: left;">1.44.2</td>
<td style="text-align: right;">libuv=1.44.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libvorbis</td>
<td style="text-align: left;">1.3.7</td>
<td style="text-align: right;">libvorbis=1.3.7</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libwebp</td>
<td style="text-align: left;">1.2.4</td>
<td style="text-align: right;">libwebp=1.2.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libwebp-base</td>
<td style="text-align: left;">1.2.4</td>
<td style="text-align: right;">libwebp-base=1.2.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libxml2</td>
<td style="text-align: left;">2.9.14</td>
<td style="text-align: right;">libxml2=2.9.14</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">libxslt</td>
<td style="text-align: left;">1.1.35</td>
<td style="text-align: right;">libxslt=1.1.35</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">libzopfli</td>
<td style="text-align: left;">1.0.3</td>
<td style="text-align: right;">libzopfli=1.0.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">lifelines</td>
<td style="text-align: left;">0.27.7</td>
<td style="text-align: right;">lifelines=0.27.7</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="odd">
<td style="text-align: center;">llvmlite</td>
<td style="text-align: left;">0.39.1</td>
<td style="text-align: right;">llvmlite=0.39.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">locket</td>
<td style="text-align: left;">1.0.0</td>
<td style="text-align: right;">locket=1.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lxml</td>
<td style="text-align: left;">4.9.1</td>
<td style="text-align: right;">lxml=4.9.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">lz4</td>
<td style="text-align: left;">3.1.3</td>
<td style="text-align: right;">lz4=3.1.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lz4-c</td>
<td style="text-align: left;">1.9.4</td>
<td style="text-align: right;">lz4-c=1.9.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">lzo</td>
<td style="text-align: left;">2.10</td>
<td style="text-align: right;">lzo=2.10</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">m2-msys2-runtime</td>
<td style="text-align: left;">2.5.0.17080.65c939c</td>
<td style="text-align: right;">m2-msys2-runtime=2.5.0.17080.65c939c</td>
<td style="text-align: right;">pkgs/msys2</td>
</tr>
<tr class="even">
<td style="text-align: center;">m2-patch</td>
<td style="text-align: left;">2.7.5</td>
<td style="text-align: right;">m2-patch=2.7.5</td>
<td style="text-align: right;">pkgs/msys2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">m2w64-libwinpthread-git</td>
<td style="text-align: left;">5.0.0.4634.697f757</td>
<td style="text-align: right;">m2w64-libwinpthread-git=5.0.0.4634.697f757</td>
<td style="text-align: right;">pkgs/msys2</td>
</tr>
<tr class="even">
<td style="text-align: center;">markdown</td>
<td style="text-align: left;">3.4.1</td>
<td style="text-align: right;">markdown=3.4.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">markupsafe</td>
<td style="text-align: left;">2.1.1</td>
<td style="text-align: right;">markupsafe=2.1.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">matplotlib</td>
<td style="text-align: left;">3.7.0</td>
<td style="text-align: right;">matplotlib=3.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">matplotlib-base</td>
<td style="text-align: left;">3.7.0</td>
<td style="text-align: right;">matplotlib-base=3.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">matplotlib-inline</td>
<td style="text-align: left;">0.1.6</td>
<td style="text-align: right;">matplotlib-inline=0.1.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">mccabe</td>
<td style="text-align: left;">0.7.0</td>
<td style="text-align: right;">mccabe=0.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">menuinst</td>
<td style="text-align: left;">1.4.19</td>
<td style="text-align: right;">menuinst=1.4.19</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">mistune</td>
<td style="text-align: left;">0.8.4</td>
<td style="text-align: right;">mistune=0.8.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">mkl</td>
<td style="text-align: left;">2021.4.0</td>
<td style="text-align: right;">mkl=2021.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">mkl-service</td>
<td style="text-align: left;">2.4.0</td>
<td style="text-align: right;">mkl-service=2.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">mkl_fft</td>
<td style="text-align: left;">1.3.1</td>
<td style="text-align: right;">mkl_fft=1.3.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">mkl_random</td>
<td style="text-align: left;">1.2.2</td>
<td style="text-align: right;">mkl_random=1.2.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">mock</td>
<td style="text-align: left;">4.0.3</td>
<td style="text-align: right;">mock=4.0.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">mpmath</td>
<td style="text-align: left;">1.2.1</td>
<td style="text-align: right;">mpmath=1.2.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">msgpack-python</td>
<td style="text-align: left;">1.0.3</td>
<td style="text-align: right;">msgpack-python=1.0.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">msys2-conda-epoch</td>
<td style="text-align: left;">20160418</td>
<td style="text-align: right;">msys2-conda-epoch=20160418</td>
<td style="text-align: right;">pkgs/msys2</td>
</tr>
<tr class="even">
<td style="text-align: center;">multipledispatch</td>
<td style="text-align: left;">0.6.0</td>
<td style="text-align: right;">multipledispatch=0.6.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">munkres</td>
<td style="text-align: left;">1.1.4</td>
<td style="text-align: right;">munkres=1.1.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">mypy_extensions</td>
<td style="text-align: left;">0.4.3</td>
<td style="text-align: right;">mypy_extensions=0.4.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">navigator-updater</td>
<td style="text-align: left;">0.3.0</td>
<td style="text-align: right;">navigator-updater=0.3.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">nbclassic</td>
<td style="text-align: left;">0.5.2</td>
<td style="text-align: right;">nbclassic=0.5.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">nbclient</td>
<td style="text-align: left;">0.5.13</td>
<td style="text-align: right;">nbclient=0.5.13</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">nbconvert</td>
<td style="text-align: left;">6.5.4</td>
<td style="text-align: right;">nbconvert=6.5.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">nbformat</td>
<td style="text-align: left;">5.7.0</td>
<td style="text-align: right;">nbformat=5.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">nest-asyncio</td>
<td style="text-align: left;">1.5.6</td>
<td style="text-align: right;">nest-asyncio=1.5.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">networkx</td>
<td style="text-align: left;">2.8.4</td>
<td style="text-align: right;">networkx=2.8.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">ninja</td>
<td style="text-align: left;">1.10.2</td>
<td style="text-align: right;">ninja=1.10.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ninja-base</td>
<td style="text-align: left;">1.10.2</td>
<td style="text-align: right;">ninja-base=1.10.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">nltk</td>
<td style="text-align: left;">3.7</td>
<td style="text-align: right;">nltk=3.7</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">notebook</td>
<td style="text-align: left;">6.5.2</td>
<td style="text-align: right;">notebook=6.5.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">notebook-shim</td>
<td style="text-align: left;">0.2.2</td>
<td style="text-align: right;">notebook-shim=0.2.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">numba</td>
<td style="text-align: left;">0.56.4</td>
<td style="text-align: right;">numba=0.56.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">numexpr</td>
<td style="text-align: left;">2.8.4</td>
<td style="text-align: right;">numexpr=2.8.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">numpy</td>
<td style="text-align: left;">1.23.5</td>
<td style="text-align: right;">numpy=1.23.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">numpy-base</td>
<td style="text-align: left;">1.23.5</td>
<td style="text-align: right;">numpy-base=1.23.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">numpydoc</td>
<td style="text-align: left;">1.5.0</td>
<td style="text-align: right;">numpydoc=1.5.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">openjpeg</td>
<td style="text-align: left;">2.4.0</td>
<td style="text-align: right;">openjpeg=2.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">openpyxl</td>
<td style="text-align: left;">3.0.10</td>
<td style="text-align: right;">openpyxl=3.0.10</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">openssl</td>
<td style="text-align: left;">1.1.1t</td>
<td style="text-align: right;">openssl=1.1.1t</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">packaging</td>
<td style="text-align: left;">22.0</td>
<td style="text-align: right;">packaging=22.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pandas</td>
<td style="text-align: left;">1.5.3</td>
<td style="text-align: right;">pandas=1.5.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pandocfilters</td>
<td style="text-align: left;">1.5.0</td>
<td style="text-align: right;">pandocfilters=1.5.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">panel</td>
<td style="text-align: left;">0.14.3</td>
<td style="text-align: right;">panel=0.14.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">param</td>
<td style="text-align: left;">1.12.3</td>
<td style="text-align: right;">param=1.12.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">paramiko</td>
<td style="text-align: left;">2.8.1</td>
<td style="text-align: right;">paramiko=2.8.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">parsel</td>
<td style="text-align: left;">1.6.0</td>
<td style="text-align: right;">parsel=1.6.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">parso</td>
<td style="text-align: left;">0.8.3</td>
<td style="text-align: right;">parso=0.8.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">partd</td>
<td style="text-align: left;">1.2.0</td>
<td style="text-align: right;">partd=1.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pathlib</td>
<td style="text-align: left;">1.0.1</td>
<td style="text-align: right;">pathlib=1.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pathspec</td>
<td style="text-align: left;">0.10.3</td>
<td style="text-align: right;">pathspec=0.10.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">patsy</td>
<td style="text-align: left;">0.5.3</td>
<td style="text-align: right;">patsy=0.5.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pcre</td>
<td style="text-align: left;">8.45</td>
<td style="text-align: right;">pcre=8.45</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pep8</td>
<td style="text-align: left;">1.7.1</td>
<td style="text-align: right;">pep8=1.7.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pexpect</td>
<td style="text-align: left;">4.8.0</td>
<td style="text-align: right;">pexpect=4.8.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pickleshare</td>
<td style="text-align: left;">0.7.5</td>
<td style="text-align: right;">pickleshare=0.7.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pillow</td>
<td style="text-align: left;">9.4.0</td>
<td style="text-align: right;">pillow=9.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pip</td>
<td style="text-align: left;">22.3.1</td>
<td style="text-align: right;">pip=22.3.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pkginfo</td>
<td style="text-align: left;">1.9.6</td>
<td style="text-align: right;">pkginfo=1.9.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">platformdirs</td>
<td style="text-align: left;">2.5.2</td>
<td style="text-align: right;">platformdirs=2.5.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">plotly</td>
<td style="text-align: left;">5.9.0</td>
<td style="text-align: right;">plotly=5.9.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pluggy</td>
<td style="text-align: left;">1.0.0</td>
<td style="text-align: right;">pluggy=1.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ply</td>
<td style="text-align: left;">3.11</td>
<td style="text-align: right;">ply=3.11</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pooch</td>
<td style="text-align: left;">1.4.0</td>
<td style="text-align: right;">pooch=1.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">powershell_shortcut</td>
<td style="text-align: left;">0.0.1</td>
<td style="text-align: right;">powershell_shortcut=0.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">poyo</td>
<td style="text-align: left;">0.5.0</td>
<td style="text-align: right;">poyo=0.5.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">prometheus_client</td>
<td style="text-align: left;">0.14.1</td>
<td style="text-align: right;">prometheus_client=0.14.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">prompt-toolkit</td>
<td style="text-align: left;">3.0.36</td>
<td style="text-align: right;">prompt-toolkit=3.0.36</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">prompt_toolkit</td>
<td style="text-align: left;">3.0.36</td>
<td style="text-align: right;">prompt_toolkit=3.0.36</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">protego</td>
<td style="text-align: left;">0.1.16</td>
<td style="text-align: right;">protego=0.1.16</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">psutil</td>
<td style="text-align: left;">5.9.0</td>
<td style="text-align: right;">psutil=5.9.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">ptyprocess</td>
<td style="text-align: left;">0.7.0</td>
<td style="text-align: right;">ptyprocess=0.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pure_eval</td>
<td style="text-align: left;">0.2.2</td>
<td style="text-align: right;">pure_eval=0.2.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">py</td>
<td style="text-align: left;">1.11.0</td>
<td style="text-align: right;">py=1.11.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">py-lief</td>
<td style="text-align: left;">0.12.3</td>
<td style="text-align: right;">py-lief=0.12.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pyasn1</td>
<td style="text-align: left;">0.4.8</td>
<td style="text-align: right;">pyasn1=0.4.8</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyasn1-modules</td>
<td style="text-align: left;">0.2.8</td>
<td style="text-align: right;">pyasn1-modules=0.2.8</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pycodestyle</td>
<td style="text-align: left;">2.10.0</td>
<td style="text-align: right;">pycodestyle=2.10.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pycosat</td>
<td style="text-align: left;">0.6.4</td>
<td style="text-align: right;">pycosat=0.6.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pycparser</td>
<td style="text-align: left;">2.21</td>
<td style="text-align: right;">pycparser=2.21</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyct</td>
<td style="text-align: left;">0.5.0</td>
<td style="text-align: right;">pyct=0.5.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pycurl</td>
<td style="text-align: left;">7.45.1</td>
<td style="text-align: right;">pycurl=7.45.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pydispatcher</td>
<td style="text-align: left;">2.0.5</td>
<td style="text-align: right;">pydispatcher=2.0.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pydocstyle</td>
<td style="text-align: left;">6.3.0</td>
<td style="text-align: right;">pydocstyle=6.3.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyenv-win</td>
<td style="text-align: left;">3.1.1</td>
<td style="text-align: right;">pyenv-win=3.1.1</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="even">
<td style="text-align: center;">pyerfa</td>
<td style="text-align: left;">2.0.0</td>
<td style="text-align: right;">pyerfa=2.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyflakes</td>
<td style="text-align: left;">3.0.1</td>
<td style="text-align: right;">pyflakes=3.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pygments</td>
<td style="text-align: left;">2.11.2</td>
<td style="text-align: right;">pygments=2.11.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyhamcrest</td>
<td style="text-align: left;">2.0.2</td>
<td style="text-align: right;">pyhamcrest=2.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pyjwt</td>
<td style="text-align: left;">2.4.0</td>
<td style="text-align: right;">pyjwt=2.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pylint</td>
<td style="text-align: left;">2.16.2</td>
<td style="text-align: right;">pylint=2.16.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pylint-venv</td>
<td style="text-align: left;">2.3.0</td>
<td style="text-align: right;">pylint-venv=2.3.0</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyls-spyder</td>
<td style="text-align: left;">0.4.0</td>
<td style="text-align: right;">pyls-spyder=0.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pynacl</td>
<td style="text-align: left;">1.5.0</td>
<td style="text-align: right;">pynacl=1.5.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyodbc</td>
<td style="text-align: left;">4.0.34</td>
<td style="text-align: right;">pyodbc=4.0.34</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pyopenssl</td>
<td style="text-align: left;">23.0.0</td>
<td style="text-align: right;">pyopenssl=23.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyparsing</td>
<td style="text-align: left;">3.0.9</td>
<td style="text-align: right;">pyparsing=3.0.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pyqt</td>
<td style="text-align: left;">5.15.7</td>
<td style="text-align: right;">pyqt=5.15.7</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyqt5-sip</td>
<td style="text-align: left;">12.11.0</td>
<td style="text-align: right;">pyqt5-sip=12.11.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pyqtwebengine</td>
<td style="text-align: left;">5.15.7</td>
<td style="text-align: right;">pyqtwebengine=5.15.7</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyrsistent</td>
<td style="text-align: left;">0.18.0</td>
<td style="text-align: right;">pyrsistent=0.18.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pysocks</td>
<td style="text-align: left;">1.7.1</td>
<td style="text-align: right;">pysocks=1.7.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pytables</td>
<td style="text-align: left;">3.7.0</td>
<td style="text-align: right;">pytables=3.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pytest</td>
<td style="text-align: left;">7.1.2</td>
<td style="text-align: right;">pytest=7.1.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">python</td>
<td style="text-align: left;">3.10.9</td>
<td style="text-align: right;">python=3.10.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">python-dateutil</td>
<td style="text-align: left;">2.8.2</td>
<td style="text-align: right;">python-dateutil=2.8.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">python-fastjsonschema</td>
<td style="text-align: left;">2.16.2</td>
<td style="text-align: right;">python-fastjsonschema=2.16.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">python-libarchive-c</td>
<td style="text-align: left;">2.9</td>
<td style="text-align: right;">python-libarchive-c=2.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">python-lsp-black</td>
<td style="text-align: left;">1.2.1</td>
<td style="text-align: right;">python-lsp-black=1.2.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">python-lsp-jsonrpc</td>
<td style="text-align: left;">1.0.0</td>
<td style="text-align: right;">python-lsp-jsonrpc=1.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">python-lsp-server</td>
<td style="text-align: left;">1.7.1</td>
<td style="text-align: right;">python-lsp-server=1.7.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">python-slugify</td>
<td style="text-align: left;">5.0.2</td>
<td style="text-align: right;">python-slugify=5.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">python-snappy</td>
<td style="text-align: left;">0.6.1</td>
<td style="text-align: right;">python-snappy=0.6.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pytoolconfig</td>
<td style="text-align: left;">1.2.5</td>
<td style="text-align: right;">pytoolconfig=1.2.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pytorch</td>
<td style="text-align: left;">1.12.1</td>
<td style="text-align: right;">pytorch=1.12.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pytz</td>
<td style="text-align: left;">2022.7</td>
<td style="text-align: right;">pytz=2022.7</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyviz_comms</td>
<td style="text-align: left;">2.0.2</td>
<td style="text-align: right;">pyviz_comms=2.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pywavelets</td>
<td style="text-align: left;">1.4.1</td>
<td style="text-align: right;">pywavelets=1.4.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pywin32</td>
<td style="text-align: left;">305</td>
<td style="text-align: right;">pywin32=305</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pywin32-ctypes</td>
<td style="text-align: left;">0.2.0</td>
<td style="text-align: right;">pywin32-ctypes=0.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pywinpty</td>
<td style="text-align: left;">2.0.10</td>
<td style="text-align: right;">pywinpty=2.0.10</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">pyyaml</td>
<td style="text-align: left;">6.0</td>
<td style="text-align: right;">pyyaml=6.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pyzmq</td>
<td style="text-align: left;">23.2.0</td>
<td style="text-align: right;">pyzmq=23.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">qdarkstyle</td>
<td style="text-align: left;">3.0.2</td>
<td style="text-align: right;">qdarkstyle=3.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">qstylizer</td>
<td style="text-align: left;">0.2.2</td>
<td style="text-align: right;">qstylizer=0.2.2</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="even">
<td style="text-align: center;">qt-main</td>
<td style="text-align: left;">5.15.2</td>
<td style="text-align: right;">qt-main=5.15.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">qt-webengine</td>
<td style="text-align: left;">5.15.9</td>
<td style="text-align: right;">qt-webengine=5.15.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">qtawesome</td>
<td style="text-align: left;">1.2.2</td>
<td style="text-align: right;">qtawesome=1.2.2</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="odd">
<td style="text-align: center;">qtconsole</td>
<td style="text-align: left;">5.4.0</td>
<td style="text-align: right;">qtconsole=5.4.0</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="even">
<td style="text-align: center;">qtpy</td>
<td style="text-align: left;">2.2.0</td>
<td style="text-align: right;">qtpy=2.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">qtwebkit</td>
<td style="text-align: left;">5.212</td>
<td style="text-align: right;">qtwebkit=5.212</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">queuelib</td>
<td style="text-align: left;">1.5.0</td>
<td style="text-align: right;">queuelib=1.5.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">regex</td>
<td style="text-align: left;">2022.7.9</td>
<td style="text-align: right;">regex=2022.7.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">requests</td>
<td style="text-align: left;">2.28.1</td>
<td style="text-align: right;">requests=2.28.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">requests-file</td>
<td style="text-align: left;">1.5.1</td>
<td style="text-align: right;">requests-file=1.5.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">requests-toolbelt</td>
<td style="text-align: left;">0.9.1</td>
<td style="text-align: right;">requests-toolbelt=0.9.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">rope</td>
<td style="text-align: left;">1.7.0</td>
<td style="text-align: right;">rope=1.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">rtree</td>
<td style="text-align: left;">1.0.1</td>
<td style="text-align: right;">rtree=1.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ruamel.yaml</td>
<td style="text-align: left;">0.17.21</td>
<td style="text-align: right;">ruamel.yaml=0.17.21</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">ruamel.yaml.clib</td>
<td style="text-align: left;">0.2.6</td>
<td style="text-align: right;">ruamel.yaml.clib=0.2.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ruamel_yaml</td>
<td style="text-align: left;">0.17.21</td>
<td style="text-align: right;">ruamel_yaml=0.17.21</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">scikit-image</td>
<td style="text-align: left;">0.19.3</td>
<td style="text-align: right;">scikit-image=0.19.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">scikit-learn</td>
<td style="text-align: left;">1.2.1</td>
<td style="text-align: right;">scikit-learn=1.2.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">scikit-learn-intelex</td>
<td style="text-align: left;">2023.0.2</td>
<td style="text-align: right;">scikit-learn-intelex=2023.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">scipy</td>
<td style="text-align: left;">1.10.0</td>
<td style="text-align: right;">scipy=1.10.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">scrapy</td>
<td style="text-align: left;">2.8.0</td>
<td style="text-align: right;">scrapy=2.8.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">seaborn</td>
<td style="text-align: left;">0.12.2</td>
<td style="text-align: right;">seaborn=0.12.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">send2trash</td>
<td style="text-align: left;">1.8.0</td>
<td style="text-align: right;">send2trash=1.8.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">service_identity</td>
<td style="text-align: left;">18.1.0</td>
<td style="text-align: right;">service_identity=18.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">setuptools</td>
<td style="text-align: left;">65.6.3</td>
<td style="text-align: right;">setuptools=65.6.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sip</td>
<td style="text-align: left;">6.6.2</td>
<td style="text-align: right;">sip=6.6.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">six</td>
<td style="text-align: left;">1.16.0</td>
<td style="text-align: right;">six=1.16.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">smart_open</td>
<td style="text-align: left;">5.2.1</td>
<td style="text-align: right;">smart_open=5.2.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">snappy</td>
<td style="text-align: left;">1.1.9</td>
<td style="text-align: right;">snappy=1.1.9</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sniffio</td>
<td style="text-align: left;">1.2.0</td>
<td style="text-align: right;">sniffio=1.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">snowballstemmer</td>
<td style="text-align: left;">2.2.0</td>
<td style="text-align: right;">snowballstemmer=2.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sortedcontainers</td>
<td style="text-align: left;">2.4.0</td>
<td style="text-align: right;">sortedcontainers=2.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">soupsieve</td>
<td style="text-align: left;">2.3.2.post1</td>
<td style="text-align: right;">soupsieve=2.3.2.post1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">speechrecognition</td>
<td style="text-align: left;">3.10.0</td>
<td style="text-align: right;">speechrecognition=3.10.0</td>
<td style="text-align: right;">pypi</td>
</tr>
<tr class="even">
<td style="text-align: center;">sphinx</td>
<td style="text-align: left;">5.0.2</td>
<td style="text-align: right;">sphinx=5.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sphinxcontrib-applehelp</td>
<td style="text-align: left;">1.0.2</td>
<td style="text-align: right;">sphinxcontrib-applehelp=1.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">sphinxcontrib-devhelp</td>
<td style="text-align: left;">1.0.2</td>
<td style="text-align: right;">sphinxcontrib-devhelp=1.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sphinxcontrib-htmlhelp</td>
<td style="text-align: left;">2.0.0</td>
<td style="text-align: right;">sphinxcontrib-htmlhelp=2.0.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">sphinxcontrib-jsmath</td>
<td style="text-align: left;">1.0.1</td>
<td style="text-align: right;">sphinxcontrib-jsmath=1.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sphinxcontrib-qthelp</td>
<td style="text-align: left;">1.0.3</td>
<td style="text-align: right;">sphinxcontrib-qthelp=1.0.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">sphinxcontrib-serializinghtml</td>
<td style="text-align: left;">1.1.5</td>
<td style="text-align: right;">sphinxcontrib-serializinghtml=1.1.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">spyder</td>
<td style="text-align: left;">5.4.1</td>
<td style="text-align: right;">spyder=5.4.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">spyder-kernels</td>
<td style="text-align: left;">2.4.1</td>
<td style="text-align: right;">spyder-kernels=2.4.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sqlalchemy</td>
<td style="text-align: left;">1.4.39</td>
<td style="text-align: right;">sqlalchemy=1.4.39</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">sqlite</td>
<td style="text-align: left;">3.40.1</td>
<td style="text-align: right;">sqlite=3.40.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">stack_data</td>
<td style="text-align: left;">0.2.0</td>
<td style="text-align: right;">stack_data=0.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">statsmodels</td>
<td style="text-align: left;">0.13.5</td>
<td style="text-align: right;">statsmodels=0.13.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sympy</td>
<td style="text-align: left;">1.11.1</td>
<td style="text-align: right;">sympy=1.11.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">tabulate</td>
<td style="text-align: left;">0.8.10</td>
<td style="text-align: right;">tabulate=0.8.10</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tbb</td>
<td style="text-align: left;">2021.7.0</td>
<td style="text-align: right;">tbb=2021.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">tbb4py</td>
<td style="text-align: left;">2021.7.0</td>
<td style="text-align: right;">tbb4py=2021.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tblib</td>
<td style="text-align: left;">1.7.0</td>
<td style="text-align: right;">tblib=1.7.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">tenacity</td>
<td style="text-align: left;">8.0.1</td>
<td style="text-align: right;">tenacity=8.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">terminado</td>
<td style="text-align: left;">0.17.1</td>
<td style="text-align: right;">terminado=0.17.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">text-unidecode</td>
<td style="text-align: left;">1.3</td>
<td style="text-align: right;">text-unidecode=1.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">textdistance</td>
<td style="text-align: left;">4.2.1</td>
<td style="text-align: right;">textdistance=4.2.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">threadpoolctl</td>
<td style="text-align: left;">2.2.0</td>
<td style="text-align: right;">threadpoolctl=2.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">three-merge</td>
<td style="text-align: left;">0.1.1</td>
<td style="text-align: right;">three-merge=0.1.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">tifffile</td>
<td style="text-align: left;">2021.7.2</td>
<td style="text-align: right;">tifffile=2021.7.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tinycss2</td>
<td style="text-align: left;">1.2.1</td>
<td style="text-align: right;">tinycss2=1.2.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">tk</td>
<td style="text-align: left;">8.6.12</td>
<td style="text-align: right;">tk=8.6.12</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tldextract</td>
<td style="text-align: left;">3.2.0</td>
<td style="text-align: right;">tldextract=3.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">tokenizers</td>
<td style="text-align: left;">0.11.4</td>
<td style="text-align: right;">tokenizers=0.11.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">toml</td>
<td style="text-align: left;">0.10.2</td>
<td style="text-align: right;">toml=0.10.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">tomli</td>
<td style="text-align: left;">2.0.1</td>
<td style="text-align: right;">tomli=2.0.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tomlkit</td>
<td style="text-align: left;">0.11.1</td>
<td style="text-align: right;">tomlkit=0.11.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">toolz</td>
<td style="text-align: left;">0.12.0</td>
<td style="text-align: right;">toolz=0.12.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tornado</td>
<td style="text-align: left;">6.1</td>
<td style="text-align: right;">tornado=6.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">tqdm</td>
<td style="text-align: left;">4.64.1</td>
<td style="text-align: right;">tqdm=4.64.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">traitlets</td>
<td style="text-align: left;">5.7.1</td>
<td style="text-align: right;">traitlets=5.7.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">transformers</td>
<td style="text-align: left;">4.24.0</td>
<td style="text-align: right;">transformers=4.24.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">twisted</td>
<td style="text-align: left;">22.2.0</td>
<td style="text-align: right;">twisted=22.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">twisted-iocpsupport</td>
<td style="text-align: left;">1.0.2</td>
<td style="text-align: right;">twisted-iocpsupport=1.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">typing-extensions</td>
<td style="text-align: left;">4.4.0</td>
<td style="text-align: right;">typing-extensions=4.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">typing_extensions</td>
<td style="text-align: left;">4.4.0</td>
<td style="text-align: right;">typing_extensions=4.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">tzdata</td>
<td style="text-align: left;">2022g</td>
<td style="text-align: right;">tzdata=2022g</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">ujson</td>
<td style="text-align: left;">5.4.0</td>
<td style="text-align: right;">ujson=5.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">unidecode</td>
<td style="text-align: left;">1.2.0</td>
<td style="text-align: right;">unidecode=1.2.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">urllib3</td>
<td style="text-align: left;">1.26.14</td>
<td style="text-align: right;">urllib3=1.26.14</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">vc</td>
<td style="text-align: left;">14.2</td>
<td style="text-align: right;">vc=14.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">vs2015_runtime</td>
<td style="text-align: left;">14.27.29016</td>
<td style="text-align: right;">vs2015_runtime=14.27.29016</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">w3lib</td>
<td style="text-align: left;">1.21.0</td>
<td style="text-align: right;">w3lib=1.21.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">watchdog</td>
<td style="text-align: left;">2.1.6</td>
<td style="text-align: right;">watchdog=2.1.6</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">wcwidth</td>
<td style="text-align: left;">0.2.5</td>
<td style="text-align: right;">wcwidth=0.2.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">webencodings</td>
<td style="text-align: left;">0.5.1</td>
<td style="text-align: right;">webencodings=0.5.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">websocket-client</td>
<td style="text-align: left;">0.58.0</td>
<td style="text-align: right;">websocket-client=0.58.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">werkzeug</td>
<td style="text-align: left;">2.2.2</td>
<td style="text-align: right;">werkzeug=2.2.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">whatthepatch</td>
<td style="text-align: left;">1.0.2</td>
<td style="text-align: right;">whatthepatch=1.0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">wheel</td>
<td style="text-align: left;">0.38.4</td>
<td style="text-align: right;">wheel=0.38.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">widgetsnbextension</td>
<td style="text-align: left;">3.5.2</td>
<td style="text-align: right;">widgetsnbextension=3.5.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">win_inet_pton</td>
<td style="text-align: left;">1.1.0</td>
<td style="text-align: right;">win_inet_pton=1.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">wincertstore</td>
<td style="text-align: left;">0.2</td>
<td style="text-align: right;">wincertstore=0.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">winpty</td>
<td style="text-align: left;">0.4.3</td>
<td style="text-align: right;">winpty=0.4.3</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">wrapt</td>
<td style="text-align: left;">1.14.1</td>
<td style="text-align: right;">wrapt=1.14.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">xarray</td>
<td style="text-align: left;">2022.11.0</td>
<td style="text-align: right;">xarray=2022.11.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">xlwings</td>
<td style="text-align: left;">0.29.1</td>
<td style="text-align: right;">xlwings=0.29.1</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">xz</td>
<td style="text-align: left;">5.2.10</td>
<td style="text-align: right;">xz=5.2.10</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">yaml</td>
<td style="text-align: left;">0.2.5</td>
<td style="text-align: right;">yaml=0.2.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">yapf</td>
<td style="text-align: left;">0.31.0</td>
<td style="text-align: right;">yapf=0.31.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">zeromq</td>
<td style="text-align: left;">4.3.4</td>
<td style="text-align: right;">zeromq=4.3.4</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">zfp</td>
<td style="text-align: left;">0.5.5</td>
<td style="text-align: right;">zfp=0.5.5</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">zict</td>
<td style="text-align: left;">2.1.0</td>
<td style="text-align: right;">zict=2.1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">zipp</td>
<td style="text-align: left;">3.11.0</td>
<td style="text-align: right;">zipp=3.11.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">zlib</td>
<td style="text-align: left;">1.2.13</td>
<td style="text-align: right;">zlib=1.2.13</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">zope</td>
<td style="text-align: left;">1.0</td>
<td style="text-align: right;">zope=1.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">zope.interface</td>
<td style="text-align: left;">5.4.0</td>
<td style="text-align: right;">zope.interface=5.4.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="even">
<td style="text-align: center;">zstandard</td>
<td style="text-align: left;">0.19.0</td>
<td style="text-align: right;">zstandard=0.19.0</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
<tr class="odd">
<td style="text-align: center;">zstd</td>
<td style="text-align: left;">1.5.2</td>
<td style="text-align: right;">zstd=1.5.2</td>
<td style="text-align: right;">pkgs/main</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Save</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="st">"an_grant_23_24_2.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>